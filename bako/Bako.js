!function(){"use strict";function t(t,e){function i(){}i.prototype=t;var n=new i;for(var s in e)n[s]=e[s];return e.toString!==Object.prototype.toString&&(n.toString=e.toString),n}function e(t,e){if(null==e)return null;null==e.__id__&&(e.__id__=C++);var i;return null==t.hx__closures__?t.hx__closures__={}:i=t.hx__closures__[e.__id__],null==i&&(i=function(){return i.method.apply(i.scope,arguments)},i.scope=t,i.method=e,t.hx__closures__[e.__id__]=i),i}var i={},n=function(){return A.Boot.__string_rec(this,"")},s=function(){};i.ApplicationMain=s,s.__name__=["ApplicationMain"],s.main=function(){s.completed=0,s.loaders=new w.ds.StringMap,s.urlLoaders=new w.ds.StringMap,s.total=0,_.Lib.get_current().loaderInfo=_.display.LoaderInfo.create(null),_.Lib.get_stage().frameRate=120,_.Lib.get_current().addChild(s.preloader=new h),s.preloader.onInit(),s.loadFile("img/hero.png");for(var t="NME_:bitmap_",e=0,i=w.Resource.listNames();e<i.length;){var n=i[e];if(++e,B.startsWith(n,t)){var o=v.resolveClass(B.replace(n.substring(t.length),"_","."));if(null!=o){s.total++;{v.createInstance(o,[0,0,!0,16777215,s.bitmapClass_onComplete])}}}}if(0!=s.total){s.loaderStack=[];for(var a=s.loaders.keys();a.hasNext();){var r=a.next();s.loaderStack.push(r)}s.urlLoaderStack=[];for(var l=s.urlLoaders.keys();l.hasNext();){var r=l.next();s.urlLoaderStack.push(r)}for(var e=0;8>e;){{e++}s.nextLoader()}}else s.begin()},s.nextLoader=function(){if(0!=s.loaderStack.length){var t=s.loaderStack.shift(),e=s.loaders.get(t);e.contentLoaderInfo.addEventListener("complete",s.loader_onComplete),e.load(new _.net.URLRequest(t))}else if(0!=s.urlLoaderStack.length){var t=s.urlLoaderStack.shift(),e=s.urlLoaders.get(t);e.addEventListener("complete",s.loader_onComplete),e.load(new _.net.URLRequest(t))}},s.loadFile=function(t){s.loaders.set(t,new _.display.Loader),s.total++},s.loadBinary=function(t){var e=new _.net.URLLoader;e.set_dataFormat(_.net.URLLoaderDataFormat.BINARY),s.urlLoaders.set(t,e),s.total++},s.loadSound=function(t){return},s.begin=function(){s.preloader.addEventListener("complete",s.preloader_onComplete),s.preloader.onLoaded()},s.bitmapClass_onComplete=function(t){s.completed++;var e=v.getClass(t);e.preload=t,s.completed==s.total&&s.begin()},s.loader_onComplete=function(){s.completed++,s.preloader.onUpdate(s.completed,s.total),s.completed==s.total?s.begin():s.nextLoader()},s.preloader_onComplete=function(){if(s.preloader.removeEventListener("complete",s.preloader_onComplete),_.Lib.get_current().removeChild(s.preloader),s.preloader=null,null==y.field(o,"main")){var t=v.createInstance(a,[]);A.Boot.__instanceof(t,_.display.DisplayObject)&&_.Lib.get_current().addChild(t)}else y.field(o,"main").apply(o,[])};var o=function(){};i.Main=o,o.__name__=["Main"],o.main=function(){var t,e,i,n;S.Love.load=function(){console.log("yo"),u.image=S.Love.graphics.newImage("img/hero.png"),t=f.physics.newWorld(new b.common.math.B2Vec2(0,1e3),!0),e=new m,n=new Array,n.push(new u(t)),n.push(new u(t)),n.push(new u(t)),n.push(new u(t));var s=new u(t,"static");s.setPosition(100,500),n.push(s),i=S.Love.timer.getTime()},S.Love.update=function(e){t.step(e,8,3)},S.Love.keypressed=function(){},S.Love.mousepressed=function(){},S.Love.draw=function(){e.draw();for(var t=0;t<n.length;){var i=n[t];++t,i.draw()}},S.Love.init()},o.prototype={__class__:o};var a=function(){o.call(this)};i.DocumentClass=a,a.__name__=["DocumentClass"],a.__super__=o,a.prototype=t(o.prototype,{__class__:a});var r=function(){};i.HxOverrides=r,r.__name__=["HxOverrides"],r.cca=function(t,e){var i=t.charCodeAt(e);return i!=i?void 0:i},r.substr=function(t,e,i){return null!=e&&0!=e&&null!=i&&0>i?"":(null==i&&(i=t.length),0>e?(e=t.length+e,0>e&&(e=0)):0>i&&(i=t.length+i-e),t.substr(e,i))},r.remove=function(t,e){for(var i=0,n=t.length;n>i;){if(t[i]==e)return t.splice(i,1),!0;i++}return!1},r.iter=function(t){return{cur:0,arr:t,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var l=function(){};i.Tile=l,l.__name__=["Tile"],l.prototype={draw:function(){},__class__:l};var m=function(){this.tiles=new Array;for(var t=[[1,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1]],e=0;4>e;){var i=e++;this.tiles[i]=[];for(var n=0;9>n;){var s=n++;this.tiles[i][s]=1==t[i][s]?new l:null}}};i.Level=m,m.__name__=["Level"],m.prototype={draw:function(){for(var t=0,e=this.tiles.length;e>t;)for(var i=t++,n=this.tiles[i],s=0,o=n.length;o>s;){var a=s++,r=n[a];null!=r&&r.draw()}},__class__:m};var c=function(){};i.IMap=c,c.__name__=["IMap"];var _={};_.events={},_.events.IEventDispatcher=function(){},i["flash.events.IEventDispatcher"]=_.events.IEventDispatcher,_.events.IEventDispatcher.__name__=["flash","events","IEventDispatcher"],_.events.IEventDispatcher.prototype={__class__:_.events.IEventDispatcher},_.events.EventDispatcher=function(){this.eventList=new w.ds.StringMap},i["flash.events.EventDispatcher"]=_.events.EventDispatcher,_.events.EventDispatcher.__name__=["flash","events","EventDispatcher"],_.events.EventDispatcher.__interfaces__=[_.events.IEventDispatcher],_.events.EventDispatcher.prototype={dispatchEvent:function(t){null==t.get_target()&&t.set_target(this);var e=t.type;if(this.eventList.exists(e))for(var i=0,n=this.eventList.get(e);i<n.length;){var s=n[i];++i,s(t)}return!0},hasEventListener:function(t){return this.eventList.exists(t)},removeEventListener:function(t,e,i,n,s){if(null==s&&(s=!1),null==n&&(n=0),null==i&&(i=!1),this.eventList.exists(t)){for(var o=this.eventList.get(t),a=0;a<o.length;){var l=o[a];if(++a,y.compareMethods(l,e)){r.remove(o,l);break}}0==o.length&&this.eventList.remove(t)}},addEventListener:function(t,e,i,n,s){null==s&&(s=!1),null==n&&(n=0),null==i&&(i=!1);var o;this.eventList.exists(t)?o=this.eventList.get(t):this.eventList.set(t,o=[]),o.push(e)},__class__:_.events.EventDispatcher},_.events.EventWrapper=function(){_.events.EventDispatcher.call(this),this.eventMap=new w.ds.ObjectMap},i["flash.events.EventWrapper"]=_.events.EventWrapper,_.events.EventWrapper.__name__=["flash","events","EventWrapper"],_.events.EventWrapper.__super__=_.events.EventDispatcher,_.events.EventWrapper.prototype=t(_.events.EventDispatcher.prototype,{removeEventListener:function(t,e,i,n,s){null==s&&(s=!1),null==n&&(n=0),null==i&&(i=!1),_.events.EventDispatcher.prototype.removeEventListener.call(this,t,e,i,n,s),this.eventMap.h.hasOwnProperty(e.__id__)&&(this.component.removeEventListener(t,this.eventMap.h[e.__id__],i),this.eventMap.remove(e))},addEventListener:function(t,e,i,n,s){null==s&&(s=!1),null==n&&(n=0),null==i&&(i=!1);var o=this;_.events.EventDispatcher.prototype.addEventListener.call(this,t,e,i,n,s);var a=function(){var t,i=function(t){t.get_target()==o.component&&t.set_target(o),t.set_currentTarget(o),e(t)};return t=i}(this);this.eventMap.h.hasOwnProperty(e.__id__)||this.eventMap.set(e,a),this.component.addEventListener(t,a,i)},__class__:_.events.EventWrapper}),_.display={},_.display.DisplayObject=function(){this.y=0,this.x=0,this.rotation=0,this.scaleY=1,this.scaleX=1,this.alpha=1,this.visible=!0,_.events.EventWrapper.call(this),this.eventRemap=new w.ds.StringMap,null==this.component&&(this.component=_.Lib.jsDiv()),this.component.node=this,this.component.setAttribute("node",v.getClassName(v.getClass(this))),this.transform=new _.geom.Transform(this)},i["flash.display.DisplayObject"]=_.display.DisplayObject,_.display.DisplayObject.__name__=["flash","display","DisplayObject"],_.display.DisplayObject.__super__=_.events.EventWrapper,_.display.DisplayObject.prototype=t(_.events.EventWrapper.prototype,{toString:function(){return v.getClassName(v.getClass(this))},addEventListener:function(t,e,i,n,s){null==s&&(s=!1),null==n&&(n=0),null==i&&(i=!1);var o=this;if(_.events.EventWrapper.prototype.addEventListener.call(this,t,e,i,n,s),_.display.DisplayObject.remapTouch.exists(t)){var a=function(e){var i=new _.events.MouseEvent(t,e.bubbles,e.cancelable,0,0,o,e.ctrlKey,e.altKey,e.shiftKey,!1),n=e.targetTouches;n.length>0?(i.pageX=n[0].pageX,i.pageY=n[0].pageY):(i.pageX=o.get_stage().mousePos.x,i.pageY=o.get_stage().mousePos.y),o.dispatchEvent(i)};_.events.EventWrapper.prototype.addEventListener.call(this,_.display.DisplayObject.remapTouch.get(t),a,i,n,s)}},get_mouseY:function(){return(_.display.DisplayObject.convPoint=this.globalToLocal(_.Lib.get_current().get_stage().mousePos,_.display.DisplayObject.convPoint)).y},get_mouseX:function(){return(_.display.DisplayObject.convPoint=this.globalToLocal(_.Lib.get_current().get_stage().mousePos,_.display.DisplayObject.convPoint)).x},localToGlobal:function(t,e){null==e&&(e=new _.geom.Point);var i=_.display.DisplayObject.convMatrix,n=t.x,s=t.y;return null==i&&(i=_.display.DisplayObject.convMatrix=new _.geom.Matrix),i.identity(),i=this.getGlobalMatrix(i),e.x=n*i.a+s*i.c+i.tx,e.y=n*i.b+s*i.d+i.ty,e},globalToLocal:function(t,e){null==e&&(e=new _.geom.Point);var i=_.display.DisplayObject.convMatrix,n=t.x,s=t.y;return null==i&&(i=_.display.DisplayObject.convMatrix=new _.geom.Matrix),i.identity(),i=this.getGlobalMatrix(i),i.invert(),e.x=n*i.a+s*i.c+i.tx,e.y=n*i.b+s*i.d+i.ty,e},getGlobalMatrix:function(t){null==t&&(t=new _.geom.Matrix);for(var e=this;null!=e;)(0!=e.x||0!=e.y)&&t.translate(e.x,e.y),(1!=e.scaleX||1!=e.scaleY)&&t.scale(e.scaleX,e.scaleY),0!=e.rotation&&t.rotate(e.rotation),t.concat(e.transform.get_matrix()),e=e.parent;return t},getRect:function(t){return this.getBounds(t)},getBounds:function(t){var e=this.getGlobalMatrix(),i=new _.geom.Rectangle(0,0,this.get_width(),this.get_height());return null==t&&(t=this),t!=this&&(i.transform(e),null!=t&&(e=t.getGlobalMatrix(),e.invert(),i.transform(e))),i},set_stage:function(t){if(this._stage!=t){var e=null!=this._stage!=(null!=t);this._stage=t,e&&this.dispatchEvent(new _.events.Event(null!=t?"addedToStage":"removedFromStage"))}return t},get_stage:function(){return this._stage},set_scrollRect:function(t){return console&&console.log(d.string(this)+".scrollRect = "+d.string(t)),t},set_visible:function(t){return this.component.style.display=(this.visible=t)?null:"none",t},set_alpha:function(t){return t!=this.alpha&&(this.component.style.opacity=(this.alpha=t).toFixed(4)),t},set_height:function(t){return t},set_width:function(t){return t},get_height:function(){return this.qHeight||0},get_width:function(){return this.qWidth||0},set_scaleY:function(t){return this.scaleY!=t&&(this.scaleY=t,this.syncMtx()),t},set_scaleX:function(t){return this.scaleX!=t&&(this.scaleX=t,this.syncMtx()),t},set_rotation:function(t){return this.rotation!=t&&(this.rotation=t,this.syncMtx()),t},set_y:function(t){return this.y!=t&&(this.y=t,this.syncMtx()),t},set_x:function(t){return this.x!=t&&(this.x=t,this.syncMtx()),t},syncMtx:function(){var t,e,i=this.component.style;if(1!=this._syncMtx_set&&(this._syncMtx_set=!0,t="0% 0%",e="syncMtx-origin",i.setProperty(e,t,null),i.setProperty("-o-"+e,t,null),i.setProperty("-ms-"+e,t,null),i.setProperty("-moz-"+e,t,null),i.setProperty("-webkit-"+e,t,null)),t="",(0!=this.x||0!=this.y)&&(t+="translate("+this.x+"px, "+this.y+"px) "),(1!=this.scaleX||1!=this.scaleY)&&(t+="scale("+this.scaleX+", "+this.scaleY+") "),0!=this.rotation&&(t+="rotate("+this.rotation+"deg) "),null!=this.transform){var n=this.transform.get_matrix();null==n||n.isIdentity()||(t+="matrix("+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.tx+", "+n.ty+") ")}this.component.setAttribute("transform",t),e="transform",i.setProperty(e,t,null),i.setProperty("-o-"+e,t,null),i.setProperty("-ms-"+e,t,null),i.setProperty("-moz-"+e,t,null),i.setProperty("-webkit-"+e,t,null)},invalidate:function(){},broadcastEvent:function(t){this.dispatchEvent(t)},__class__:_.display.DisplayObject,__properties__:{set_stage:"set_stage",get_stage:"get_stage",set_visible:"set_visible",set_alpha:"set_alpha",set_scaleX:"set_scaleX",set_scaleY:"set_scaleY",set_rotation:"set_rotation",set_x:"set_x",set_y:"set_y",set_width:"set_width",get_width:"get_width",set_height:"set_height",get_height:"get_height",set_scrollRect:"set_scrollRect",get_mouseX:"get_mouseX",get_mouseY:"get_mouseY"}}),_.display.InteractiveObject=function(){_.display.DisplayObject.call(this),this.tabEnabled=!1,this.tabIndex=0,this.mouseEnabled=this.doubleClickEnabled=!0},i["flash.display.InteractiveObject"]=_.display.InteractiveObject,_.display.InteractiveObject.__name__=["flash","display","InteractiveObject"],_.display.InteractiveObject.__super__=_.display.DisplayObject,_.display.InteractiveObject.prototype=t(_.display.DisplayObject.prototype,{giveFocus:function(){this.component.focus()},__class__:_.display.InteractiveObject}),_.display.DisplayObjectContainer=function(){_.display.InteractiveObject.call(this),this.children=[]},i["flash.display.DisplayObjectContainer"]=_.display.DisplayObjectContainer,_.display.DisplayObjectContainer.__name__=["flash","display","DisplayObjectContainer"],_.display.DisplayObjectContainer.__super__=_.display.InteractiveObject,_.display.DisplayObjectContainer.prototype=t(_.display.InteractiveObject.prototype,{set_stage:function(t){_.display.InteractiveObject.prototype.set_stage.call(this,t);for(var e=0,i=this.children;e<i.length;){var n=i[e];++e,n.set_stage(t)}return t},broadcastEvent:function(t){this.dispatchEvent(t);for(var e=0,i=this.children;e<i.length;){var n=i[e];++e,n.broadcastEvent(t)}},contains:function(t){for(var e=0,i=this.children;e<i.length;){var n=i[e];if(++e,n==t)return!0}return!1},getChildIndex:function(t){for(var e=-1,i=this.children.length;++e<i;)if(this.children[e]==t)return e;return-1},getChildAt:function(t){return this.children[t]},removeChildAt:function(t){return this.removeChild(this.children[t])},addChildAt:function(t,e){return e<this.children.length?(null!=t.parent&&t.parent.removeChild(t),t.parent=this,t.set_stage(this.get_stage()),this.component.insertBefore(t.component,this.children[e].component),this.children.splice(e,0,t),t):this.addChild(t)},removeChild:function(t){t.parent=null,t.set_stage(null),r.remove(this.children,t),this.component.removeChild(t.component);var e=new _.events.Event("removed");return t.dispatchEvent(e),this.dispatchEvent(e),t},addChild:function(t){null!=t.parent&&t.parent.removeChild(t),t.parent=this,t.set_stage(this.get_stage()),this.children.push(t),this.component.appendChild(t.component);var e=new _.events.Event("added");return t.dispatchEvent(e),this.dispatchEvent(e),t},get_numChildren:function(){return this.children.length},__class__:_.display.DisplayObjectContainer,__properties__:t(_.display.InteractiveObject.prototype.__properties__,{get_numChildren:"get_numChildren"})}),_.display.IBitmapDrawable=function(){},i["flash.display.IBitmapDrawable"]=_.display.IBitmapDrawable,_.display.IBitmapDrawable.__name__=["flash","display","IBitmapDrawable"],_.display.IBitmapDrawable.prototype={__class__:_.display.IBitmapDrawable},_.display.Sprite=function(){_.display.DisplayObjectContainer.call(this)},i["flash.display.Sprite"]=_.display.Sprite,_.display.Sprite.__name__=["flash","display","Sprite"],_.display.Sprite.__interfaces__=[_.display.IBitmapDrawable],_.display.Sprite.__super__=_.display.DisplayObjectContainer,_.display.Sprite.prototype=t(_.display.DisplayObjectContainer.prototype,{drawToSurface:function(t,e,i,n,s,o,a){this.get_graphics().drawToSurface(t,e,i,n,s,o,a)},set_useHandCursor:function(t){return this.component.style.cursor=t?"pointer":null,this.useHandCursor=t},set_stage:function(t){var e=null==this.get_stage()&&null!=t,i=_.display.DisplayObjectContainer.prototype.set_stage.call(this,t);return e&&null!=this._graphics&&this._graphics.invalidate(),i},get_graphics:function(){if(null==this._graphics){var t=new _.display.Graphics,e=t.component;t.set_displayObject(this),0==this.children.length?this.component.appendChild(e):this.component.insertBefore(e,this.children[0].component),this._graphics=t}return this._graphics},__class__:_.display.Sprite,__properties__:t(_.display.DisplayObjectContainer.prototype.__properties__,{get_graphics:"get_graphics",set_useHandCursor:"set_useHandCursor"})});var h=function(){_.display.Sprite.call(this);var t=this.getBackgroundColor(),e=t>>16&255,i=t>>8&255,n=255&t,s=.299*e+.587*i+.114*n,o=0;70>s&&(o=16777215);var a=30,r=9,l=this.getHeight()/2-r/2,m=this.getWidth()-2*a,c=3;this.outline=new _.display.Sprite,this.outline.get_graphics().lineStyle(1,o,.15,!0),this.outline.get_graphics().drawRoundRect(0,0,m,r,2*c,2*c),this.outline.set_x(a),this.outline.set_y(l),this.addChild(this.outline),this.progress=new _.display.Sprite,this.progress.get_graphics().beginFill(o,.35),this.progress.get_graphics().drawRect(0,0,m-2*c,r-2*c),this.progress.set_x(a+c),this.progress.set_y(l+c),this.progress.set_scaleX(0),this.addChild(this.progress)};i.NMEPreloader=h,h.__name__=["NMEPreloader"],h.__super__=_.display.Sprite,h.prototype=t(_.display.Sprite.prototype,{onUpdate:function(t,e){var i=t/e;this.progress.set_scaleX(i)},onLoaded:function(){this.dispatchEvent(new _.events.Event("complete"))},onInit:function(){},getWidth:function(){var t=800;return t>0?t:_.Lib.get_current().get_stage().get_stageWidth()},getHeight:function(){var t=480;return t>0?t:_.Lib.get_current().get_stage().get_stageHeight()},getBackgroundColor:function(){return 0},__class__:h});var u=function(t,e){null==e&&(e="dynamic"),this.shape=f.physics.newRectangleShape(u.image._bitmapData.component.width,u.image._bitmapData.component.height),this.body=f.physics.newBody(t,new b.common.math.B2Vec2(100,100),e),this.fixture=f.physics.newFixture(this.body,this.shape),this.body.applyTorque(200*Math.random()-100),this.body.setAngularDamping(.9),this.body.setSleepingAllowed(!1)};i.PhysBox=u,u.__name__=["PhysBox"],u.prototype={setPosition:function(t,e){var i=new b.common.math.B2Vec2(t,e);this.body.setPosition(function(){var t,e=f.physics.meter;return t=new b.common.math.B2Vec2(i.x/e,i.y/e)}(this))},draw:function(){var t=function(t){var e,i=t.body.getPosition();return e=function(){var t,e=f.physics.meter;return t=new b.common.math.B2Vec2(i.x*e,i.y*e)}(t)}(this).x,e=function(t){var e,i=t.body.getPosition();return e=function(){var t,e=f.physics.meter;return t=new b.common.math.B2Vec2(i.x*e,i.y*e)}(t)}(this).y,i=this.body.getAngle();S.Love.graphics.draw(u.image,t,e,i,1,1,u.image._bitmapData.component.width/2,u.image._bitmapData.component.height/2)},__class__:u};var y=function(){};i.Reflect=y,y.__name__=["Reflect"],y.hasField=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},y.field=function(t,e){var i=null;try{i=t[e]}catch(n){}return i},y.getProperty=function(t,e){var i;return null==t?null:t.__properties__&&(i=t.__properties__["get_"+e])?t[i]():t[e]},y.fields=function(t){var e=[];if(null!=t){var i=Object.prototype.hasOwnProperty;for(var n in t)"__id__"!=n&&"hx__closures__"!=n&&i.call(t,n)&&e.push(n)}return e},y.isFunction=function(t){return"function"==typeof t&&!(t.__name__||t.__ename__)},y.compareMethods=function(t,e){return t==e?!0:y.isFunction(t)&&y.isFunction(e)?t.scope==e.scope&&t.method==e.method&&null!=t.method:!1},y.deleteField=function(t,e){return y.hasField(t,e)?(delete t[e],!0):!1};var d=function(){};i.Std=d,d.__name__=["Std"],d.string=function(t){return A.Boot.__string_rec(t,"")};var p={};p.Vec2_Impl_=function(){},i["_Stove.Vec2_Impl_"]=p.Vec2_Impl_,p.Vec2_Impl_.__name__=["_Stove","Vec2_Impl_"],p.Vec2_Impl_.__properties__={set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"},p.Vec2_Impl_._new=function(t,e){return null==e&&(e=0),null==t&&(t=0),new b.common.math.B2Vec2(t,e)},p.Vec2_Impl_.get_x=function(t){return t.x},p.Vec2_Impl_.set_x=function(t,e){return t.x=e},p.Vec2_Impl_.get_y=function(t){return t.y},p.Vec2_Impl_.set_y=function(t,e){return t.y=e},p.Vec2_Impl_.mul=function(t,e){return new b.common.math.B2Vec2(t.x*e,t.y*e)},p.Vec2_Impl_.div=function(t,e){return new b.common.math.B2Vec2(t.x/e,t.y/e)},p.Vec2_Impl_.add=function(t,e){return new b.common.math.B2Vec2(t.x+e.x,t.y+e.y)},p.Vec2_Impl_.add2=function(t,e){return new b.common.math.B2Vec2(t.x+e.x,t.y+e.y)},p.Body_Impl_=function(){},i["_Stove.Body_Impl_"]=p.Body_Impl_,p.Body_Impl_.__name__=["_Stove","Body_Impl_"],p.Body_Impl_._new=function(t){return t},p.Body_Impl_.setLinearDamping=function(t,e){return t.setLinearDamping(e)},p.Body_Impl_.setAngularDamping=function(t,e){return t.setAngularDamping(e)},p.Body_Impl_.setSleepingAllowed=function(t,e){return t.setSleepingAllowed(e)},p.Body_Impl_.getLinearVelocity=function(t){var e=t.getLinearVelocity();return function(){var t,i=f.physics.meter;return t=new b.common.math.B2Vec2(e.x*i,e.y*i)}(this)},p.Body_Impl_.applyImpulse=function(t,e,i){return t.applyImpulse(function(){var t,i=f.physics.meter;return t=new b.common.math.B2Vec2(e.x/i,e.y/i)}(this),function(){var t,e=f.physics.meter;return t=new b.common.math.B2Vec2(i.x/e,i.y/e)}(this))},p.Body_Impl_.applyTorque=function(t,e){return t.applyTorque(e)},p.Body_Impl_.getPosition=function(t){var e=t.getPosition();return function(){var t,i=f.physics.meter;return t=new b.common.math.B2Vec2(e.x*i,e.y*i)}(this)},p.Body_Impl_.setPosition=function(t,e){return t.setPosition(function(){var t,i=f.physics.meter;return t=new b.common.math.B2Vec2(e.x/i,e.y/i)}(this))},p.Body_Impl_.getAngle=function(t){return t.getAngle()};var g=function(){this.meter=30};i.StovePhysics=g,g.__name__=["StovePhysics"],g.prototype={newRectangleShape:function(t,e){var i=new b.collision.shapes.B2PolygonShape;return i.setAsBox(t/this.meter/2,e/this.meter/2),i},newCircleShape:function(t){return new b.collision.shapes.B2CircleShape(t/this.meter)},newFixture:function(t,e,i){null==i&&(i=1);var n=new b.dynamics.B2FixtureDef;return n.density=i,n.shape=e,t.createFixture(n)},newBody:function(t,e,i){null==i&&(i="static");var n=new b.dynamics.B2BodyDef;switch(null==e&&(e=new b.common.math.B2Vec2(0,0)),n.position=function(t){var i,n=t.meter;return i=new b.common.math.B2Vec2(e.x/n,e.y/n)}(this),i){case"static":n.type=b.dynamics.B2Body.b2_staticBody;break;case"dynamic":n.type=b.dynamics.B2Body.b2_dynamicBody;break;default:throw"Invalid type used!"}return t.createBody(n)},newWorld:function(t,e){return new b.dynamics.B2World(function(e){var i,n=e.meter;return i=new b.common.math.B2Vec2(t.x/n,t.y/n)}(this),e)},getMeter:function(){return this.meter},setMeter:function(t){this.meter=t},__class__:g};var f=function(){};i.Stove=f,f.__name__=["Stove"];var x=function(){this.b=""};i.StringBuf=x,x.__name__=["StringBuf"],x.prototype={__class__:x};var B=function(){};i.StringTools=B,B.__name__=["StringTools"],B.urlEncode=function(t){return encodeURIComponent(t)},B.urlDecode=function(t){return decodeURIComponent(t.split("+").join(" "))},B.htmlEscape=function(t,e){return t=t.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"),e?t.split('"').join("&quot;").split("'").join("&#039;"):t},B.startsWith=function(t,e){return t.length>=e.length&&r.substr(t,0,e.length)==e},B.replace=function(t,e,i){return t.split(e).join(i)};var v=function(){};i.Type=v,v.__name__=["Type"],v.getClass=function(t){return null==t?null:t.__class__},v.getClassName=function(t){var e=t.__name__;return e.join(".")},v.resolveClass=function(t){var e=i[t];return null!=e&&e.__name__?e:null},v.resolveEnum=function(t){var e=i[t];return null!=e&&e.__ename__?e:null},v.createInstance=function(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);default:throw"Too many arguments"}return null},v.allEnums=function(t){for(var e=[],i=t.__constructs__,n=0;n<i.length;){var s=i[n];++n;var o=y.field(t,s);y.isFunction(o)||e.push(o)}return e};var b={};b.collision={},b.collision.B2AABB=function(){this.lowerBound=new b.common.math.B2Vec2,this.upperBound=new b.common.math.B2Vec2},i["box2D.collision.B2AABB"]=b.collision.B2AABB,b.collision.B2AABB.__name__=["box2D","collision","B2AABB"],b.collision.B2AABB.prototype={combine:function(t,e){this.lowerBound.x=Math.min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,e.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,e.upperBound.y)},testOverlap:function(t){var e=t.lowerBound.x-this.upperBound.x,i=t.lowerBound.y-this.upperBound.y,n=this.lowerBound.x-t.upperBound.x,s=this.lowerBound.y-t.upperBound.y;return e>0||i>0?!1:n>0||s>0?!1:!0},rayCast:function(t,e){var i,n,s,o,a,r=-Number.MAX_VALUE,l=Number.MAX_VALUE,m=e.p1.x,c=e.p1.y,_=e.p2.x-e.p1.x,h=e.p2.y-e.p1.y,u=Math.abs(_),y=Math.abs(h),d=t.normal;if(u<Number.MIN_VALUE){if(m<this.lowerBound.x||this.upperBound.x<m)return!1}else if(i=1/_,n=(this.lowerBound.x-m)*i,s=(this.upperBound.x-m)*i,a=-1,n>s&&(o=n,n=s,s=o,a=1),n>r&&(d.x=a,d.y=0,r=n),l=Math.min(l,s),r>l)return!1;if(y<Number.MIN_VALUE){if(c<this.lowerBound.y||this.upperBound.y<c)return!1}else if(i=1/h,n=(this.lowerBound.y-c)*i,s=(this.upperBound.y-c)*i,a=-1,n>s&&(o=n,n=s,s=o,a=1),n>r&&(d.y=a,d.x=0,r=n),l=Math.min(l,s),r>l)return!1;return t.fraction=r,!0},contains:function(t){var e=!0;return e=e&&this.lowerBound.x<=t.lowerBound.x,e=e&&this.lowerBound.y<=t.lowerBound.y,e=e&&t.upperBound.x<=this.upperBound.x,e=e&&t.upperBound.y<=this.upperBound.y},getExtents:function(){return new b.common.math.B2Vec2((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},getCenter:function(){return new b.common.math.B2Vec2((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},isValid:function(){var t=this.upperBound.x-this.lowerBound.x,e=this.upperBound.y-this.lowerBound.y,i=t>=0&&e>=0;return i=i&&this.lowerBound.isValid()&&this.upperBound.isValid()},__class__:b.collision.B2AABB},b.common={},b.common.math={},b.common.math.B2Vec2=function(t,e){null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e},i["box2D.common.math.B2Vec2"]=b.common.math.B2Vec2,b.common.math.B2Vec2.__name__=["box2D","common","math","B2Vec2"],b.common.math.B2Vec2.make=function(t,e){return new b.common.math.B2Vec2(t,e)},b.common.math.B2Vec2.prototype={isValid:function(){return b.common.math.B2Math.isValid(this.x)&&b.common.math.B2Math.isValid(this.y)},normalize:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t<Number.MIN_VALUE)return 0;var e=1/t;return this.x*=e,this.y*=e,t},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},abs:function(){this.x<0&&(this.x=-this.x),this.y<0&&(this.y=-this.y)},maxV:function(t){this.x=this.x>t.x?this.x:t.x,this.y=this.y>t.y?this.y:t.y},minV:function(t){this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y},crossFV:function(t){var e=this.x;this.x=-t*this.y,this.y=t*e},crossVF:function(t){var e=this.x;this.x=t*this.y,this.y=-t*e},mulTM:function(t){var e=b.common.math.B2Math.dot(this,t.col1);this.y=b.common.math.B2Math.dot(this,t.col2),this.x=e},mulM:function(t){var e=this.x;this.x=t.col1.x*e+t.col2.x*this.y,this.y=t.col1.y*e+t.col2.y*this.y},multiply:function(t){this.x*=t,this.y*=t},subtract:function(t){this.x-=t.x,this.y-=t.y},add:function(t){this.x+=t.x,this.y+=t.y},copy:function(){return new b.common.math.B2Vec2(this.x,this.y)},negativeSelf:function(){this.x=-this.x,this.y=-this.y},getNegative:function(){return new b.common.math.B2Vec2(-this.x,-this.y)},setV:function(t){this.x=t.x,this.y=t.y},set:function(t,e){null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e},setZero:function(){this.x=0,this.y=0},__class__:b.common.math.B2Vec2},b.collision.ClipVertex=function(){this.v=new b.common.math.B2Vec2,this.id=new b.collision.B2ContactID},i["box2D.collision.ClipVertex"]=b.collision.ClipVertex,b.collision.ClipVertex.__name__=["box2D","collision","ClipVertex"],b.collision.ClipVertex.prototype={set:function(t){this.v.setV(t.v),this.id.set(t.id)},__class__:b.collision.ClipVertex},b.collision.B2ContactID=function(){this.features=new b.collision.Features,this.features._m_id=this},i["box2D.collision.B2ContactID"]=b.collision.B2ContactID,b.collision.B2ContactID.__name__=["box2D","collision","B2ContactID"],b.collision.B2ContactID.prototype={set_key:function(t){return this._key=t,this.features._referenceEdge=255&this._key,this.features._incidentEdge=(65280&this._key)>>8&255,this.features._incidentVertex=(16711680&this._key)>>16&255,this.features._flip=(-16777216&this._key)>>24&255,this._key},get_key:function(){return this._key},copy:function(){var t=new b.collision.B2ContactID;return t.set_key(this.get_key()),t},set:function(t){this.set_key(t._key)},__class__:b.collision.B2ContactID,__properties__:{set_key:"set_key",get_key:"get_key"}},b.collision.Features=function(){},i["box2D.collision.Features"]=b.collision.Features,b.collision.Features.__name__=["box2D","collision","Features"],b.collision.Features.prototype={set_flip:function(t){return this._flip=t,this._m_id._key=16777215&this._m_id._key|this._flip<<24&-16777216,t},get_flip:function(){return this._flip},set_incidentVertex:function(t){return this._incidentVertex=t,this._m_id._key=-16711681&this._m_id._key|this._incidentVertex<<16&16711680,t},get_incidentVertex:function(){return this._incidentVertex},set_incidentEdge:function(t){return this._incidentEdge=t,this._m_id._key=-65281&this._m_id._key|this._incidentEdge<<8&65280,t},get_incidentEdge:function(){return this._incidentEdge},set_referenceEdge:function(t){return this._referenceEdge=t,this._m_id._key=-256&this._m_id._key|255&this._referenceEdge,t},get_referenceEdge:function(){return this._referenceEdge},__class__:b.collision.Features,__properties__:{set_referenceEdge:"set_referenceEdge",get_referenceEdge:"get_referenceEdge",set_incidentEdge:"set_incidentEdge",get_incidentEdge:"get_incidentEdge",set_incidentVertex:"set_incidentVertex",get_incidentVertex:"get_incidentVertex",set_flip:"set_flip",get_flip:"get_flip"}},b.collision.B2Collision=function(){},i["box2D.collision.B2Collision"]=b.collision.B2Collision,b.collision.B2Collision.__name__=["box2D","collision","B2Collision"],b.collision.B2Collision.clipSegmentToLine=function(t,e,i,n){var s,o=0;s=e[0];var a=s.v;s=e[1];var r=s.v,l=i.x*a.x+i.y*a.y-n,m=i.x*r.x+i.y*r.y-n;if(0>=l&&t[o++].set(e[0]),0>=m&&t[o++].set(e[1]),0>l*m){var c=l/(l-m);s=t[o];var _=s.v;_.x=a.x+c*(r.x-a.x),_.y=a.y+c*(r.y-a.y),s=t[o];var h;l>0?(h=e[0],s.id=h.id):(h=e[1],s.id=h.id),++o}return o},b.collision.B2Collision.edgeSeparation=function(t,e,i,n,s){var o,a,r=(t.m_vertexCount,t.m_vertices),l=t.m_normals,m=n.m_vertexCount,c=n.m_vertices;o=e.R,a=l[i];var _=o.col1.x*a.x+o.col2.x*a.y,h=o.col1.y*a.x+o.col2.y*a.y;o=s.R;for(var u=o.col1.x*_+o.col1.y*h,y=o.col2.x*_+o.col2.y*h,d=0,p=Number.MAX_VALUE,g=0;m>g;){var f=g++;a=c[f];var x=a.x*u+a.y*y;p>x&&(p=x,d=f)}a=r[i],o=e.R;var B=e.position.x+(o.col1.x*a.x+o.col2.x*a.y),v=e.position.y+(o.col1.y*a.x+o.col2.y*a.y);a=c[d],o=s.R;var b=s.position.x+(o.col1.x*a.x+o.col2.x*a.y),w=s.position.y+(o.col1.y*a.x+o.col2.y*a.y);b-=B,w-=v;var A=b*_+w*h;return A},b.collision.B2Collision.findMaxSeparation=function(t,e,i,n,s){var o,a,r=e.m_vertexCount,l=e.m_normals;a=s.R,o=n.m_centroid;var m=s.position.x+(a.col1.x*o.x+a.col2.x*o.y),c=s.position.y+(a.col1.y*o.x+a.col2.y*o.y);a=i.R,o=e.m_centroid,m-=i.position.x+(a.col1.x*o.x+a.col2.x*o.y),c-=i.position.y+(a.col1.y*o.x+a.col2.y*o.y);for(var _=m*i.R.col1.x+c*i.R.col1.y,h=m*i.R.col2.x+c*i.R.col2.y,u=0,y=-Number.MAX_VALUE,d=0;r>d;){var p=d++;o=l[p];var g=o.x*_+o.y*h;g>y&&(y=g,u=p)}var f,x,B,v=b.collision.B2Collision.edgeSeparation(e,i,u,n,s),w=u-1>=0?u-1:r-1,A=b.collision.B2Collision.edgeSeparation(e,i,w,n,s),S=r>u+1?u+1:0,L=b.collision.B2Collision.edgeSeparation(e,i,S,n,s);if(A>v&&A>L)B=-1,f=w,x=A;else{if(!(L>v))return t[0]=u,v;B=1,f=S,x=L}for(;;){if(u=-1==B?f-1>=0?f-1:r-1:r>f+1?f+1:0,v=b.collision.B2Collision.edgeSeparation(e,i,u,n,s),!(v>x))break;f=u,x=v}return t[0]=f,x},b.collision.B2Collision.findIncidentEdge=function(t,e,i,n,s,o){var a,r,l=(e.m_vertexCount,e.m_normals),m=s.m_vertexCount,c=s.m_vertices,_=s.m_normals;a=i.R,r=l[n];
var h=a.col1.x*r.x+a.col2.x*r.y,u=a.col1.y*r.x+a.col2.y*r.y;a=o.R;var y=a.col1.x*h+a.col1.y*u;u=a.col2.x*h+a.col2.y*u,h=y;for(var d=0,p=Number.MAX_VALUE,g=0;m>g;){var f=g++;r=_[f];var x=h*r.x+u*r.y;p>x&&(p=x,d=f)}var B,v=d,b=m>v+1?v+1:0;B=t[0],r=c[v],a=o.R,B.v.x=o.position.x+(a.col1.x*r.x+a.col2.x*r.y),B.v.y=o.position.y+(a.col1.y*r.x+a.col2.y*r.y),B.id.features.set_referenceEdge(n),B.id.features.set_incidentEdge(v),B.id.features.set_incidentVertex(0),B=t[1],r=c[b],a=o.R,B.v.x=o.position.x+(a.col1.x*r.x+a.col2.x*r.y),B.v.y=o.position.y+(a.col1.y*r.x+a.col2.y*r.y),B.id.features.set_referenceEdge(n),B.id.features.set_incidentEdge(b),B.id.features.set_incidentVertex(1)},b.collision.B2Collision.makeClipPointVector=function(){var t=new Array;return t[0]=new b.collision.ClipVertex,t[1]=new b.collision.ClipVertex,t},b.collision.B2Collision.collidePolygons=function(t,e,i,n,s){var o;t.m_pointCount=0;var a=e.m_radius+n.m_radius,r=0;b.collision.B2Collision.s_edgeAO[0]=r;var l=b.collision.B2Collision.findMaxSeparation(b.collision.B2Collision.s_edgeAO,e,i,n,s);if(r=b.collision.B2Collision.s_edgeAO[0],!(l>a)){var m=0;b.collision.B2Collision.s_edgeBO[0]=m;var c=b.collision.B2Collision.findMaxSeparation(b.collision.B2Collision.s_edgeBO,n,s,e,i);if(m=b.collision.B2Collision.s_edgeBO[0],!(c>a)){var _,h,u,y,d,p,g,f=.98,x=.001;c>f*l+x?(_=n,h=e,u=s,y=i,d=m,t.m_type=b.collision.B2ManifoldType.FACE_B,p=1):(_=e,h=n,u=i,y=s,d=r,t.m_type=b.collision.B2ManifoldType.FACE_A,p=0);var B=b.collision.B2Collision.s_incidentEdge;b.collision.B2Collision.findIncidentEdge(B,_,u,d,h,y);var v,w=_.m_vertexCount,A=_.m_vertices,S=A[d];v=w>d+1?A[d+1|0]:A[0];var L=b.collision.B2Collision.s_localTangent;L.set(v.x-S.x,v.y-S.y),L.normalize();var M=b.collision.B2Collision.s_localNormal;M.x=L.y,M.y=-L.x;var C=b.collision.B2Collision.s_planePoint;C.set(.5*(S.x+v.x),.5*(S.y+v.y));var T=b.collision.B2Collision.s_tangent;g=u.R,T.x=g.col1.x*L.x+g.col2.x*L.y,T.y=g.col1.y*L.x+g.col2.y*L.y;var I=b.collision.B2Collision.s_tangent2;I.x=-T.x,I.y=-T.y;var D=b.collision.B2Collision.s_normal;D.x=T.y,D.y=-T.x;var V=b.collision.B2Collision.s_v11,E=b.collision.B2Collision.s_v12;V.x=u.position.x+(g.col1.x*S.x+g.col2.x*S.y),V.y=u.position.y+(g.col1.y*S.x+g.col2.y*S.y),E.x=u.position.x+(g.col1.x*v.x+g.col2.x*v.y),E.y=u.position.y+(g.col1.y*v.x+g.col2.y*v.y);var F,P=D.x*V.x+D.y*V.y,R=-T.x*V.x-T.y*V.y+a,j=T.x*E.x+T.y*E.y+a,O=b.collision.B2Collision.s_clipPoints1,J=b.collision.B2Collision.s_clipPoints2;if(F=b.collision.B2Collision.clipSegmentToLine(O,B,I,R),!(2>F||(F=b.collision.B2Collision.clipSegmentToLine(J,O,T,j),2>F))){t.m_localPlaneNormal.setV(M),t.m_localPoint.setV(C);for(var N=0,k=0,q=b.common.B2Settings.b2_maxManifoldPoints;q>k;){var U=k++;o=J[U];var z=D.x*o.v.x+D.y*o.v.y-P;if(a>=z){var K=t.m_points[N];g=y.R;var W=o.v.x-y.position.x,H=o.v.y-y.position.y;K.m_localPoint.x=W*g.col1.x+H*g.col1.y,K.m_localPoint.y=W*g.col2.x+H*g.col2.y,K.m_id.set(o.id),K.m_id.features.set_flip(p),++N}}t.m_pointCount=N}}}},b.collision.B2Collision.collideCircles=function(t,e,i,n,s){t.m_pointCount=0;var o,a;o=i.R,a=e.m_p;var r=i.position.x+(o.col1.x*a.x+o.col2.x*a.y),l=i.position.y+(o.col1.y*a.x+o.col2.y*a.y);o=s.R,a=n.m_p;var m=s.position.x+(o.col1.x*a.x+o.col2.x*a.y),c=s.position.y+(o.col1.y*a.x+o.col2.y*a.y),_=m-r,h=c-l,u=_*_+h*h,y=e.m_radius+n.m_radius;u>y*y||(t.m_type=b.collision.B2ManifoldType.CIRCLES,t.m_localPoint.setV(e.m_p),t.m_localPlaneNormal.setZero(),t.m_pointCount=1,t.m_points[0].m_localPoint.setV(n.m_p),t.m_points[0].m_id.set_key(0))},b.collision.B2Collision.collidePolygonAndCircle=function(t,e,i,n,s){t.m_pointCount=0;var o,a,r,l;l=s.R,r=n.m_p;var m=s.position.x+(l.col1.x*r.x+l.col2.x*r.y),c=s.position.y+(l.col1.y*r.x+l.col2.y*r.y);o=m-i.position.x,a=c-i.position.y,l=i.R;for(var _=o*l.col1.x+a*l.col1.y,h=o*l.col2.x+a*l.col2.y,u=0,y=-Number.MAX_VALUE,d=e.m_radius+n.m_radius,p=e.m_vertexCount,g=e.m_vertices,f=e.m_normals,x=0;p>x;){var B=x++;r=g[B],o=_-r.x,a=h-r.y,r=f[B];var v=r.x*o+r.y*a;if(v>d)return;v>y&&(y=v,u=B)}var w=u,A=p>w+1?w+1:0,S=g[w],L=g[A];if(y<Number.MIN_VALUE)return t.m_pointCount=1,t.m_type=b.collision.B2ManifoldType.FACE_A,t.m_localPlaneNormal.setV(f[u]),t.m_localPoint.x=.5*(S.x+L.x),t.m_localPoint.y=.5*(S.y+L.y),t.m_points[0].m_localPoint.setV(n.m_p),t.m_points[0].m_id.set_key(0),void 0;var M=(_-S.x)*(L.x-S.x)+(h-S.y)*(L.y-S.y),C=(_-L.x)*(S.x-L.x)+(h-L.y)*(S.y-L.y);if(0>=M){if((_-S.x)*(_-S.x)+(h-S.y)*(h-S.y)>d*d)return;t.m_pointCount=1,t.m_type=b.collision.B2ManifoldType.FACE_A,t.m_localPlaneNormal.x=_-S.x,t.m_localPlaneNormal.y=h-S.y,t.m_localPlaneNormal.normalize(),t.m_localPoint.setV(S),t.m_points[0].m_localPoint.setV(n.m_p),t.m_points[0].m_id.set_key(0)}else if(0>=C){if((_-L.x)*(_-L.x)+(h-L.y)*(h-L.y)>d*d)return;t.m_pointCount=1,t.m_type=b.collision.B2ManifoldType.FACE_A,t.m_localPlaneNormal.x=_-L.x,t.m_localPlaneNormal.y=h-L.y,t.m_localPlaneNormal.normalize(),t.m_localPoint.setV(L),t.m_points[0].m_localPoint.setV(n.m_p),t.m_points[0].m_id.set_key(0)}else{var T=.5*(S.x+L.x),I=.5*(S.y+L.y);if(y=(_-T)*f[w].x+(h-I)*f[w].y,y>d)return;t.m_pointCount=1,t.m_type=b.collision.B2ManifoldType.FACE_A,t.m_localPlaneNormal.x=f[w].x,t.m_localPlaneNormal.y=f[w].y,t.m_localPlaneNormal.normalize(),t.m_localPoint.set(T,I),t.m_points[0].m_localPoint.setV(n.m_p),t.m_points[0].m_id.set_key(0)}},b.collision.B2Collision.testOverlap=function(t,e){var i=e.lowerBound,n=t.upperBound,s=i.x-n.x,o=i.y-n.y;i=t.lowerBound,n=e.upperBound;var a=i.x-n.x,r=i.y-n.y;return s>0||o>0?!1:a>0||r>0?!1:!0},b.collision.B2ContactPoint=function(){this.position=new b.common.math.B2Vec2,this.velocity=new b.common.math.B2Vec2,this.normal=new b.common.math.B2Vec2,this.id=new b.collision.B2ContactID},i["box2D.collision.B2ContactPoint"]=b.collision.B2ContactPoint,b.collision.B2ContactPoint.__name__=["box2D","collision","B2ContactPoint"],b.collision.B2ContactPoint.prototype={__class__:b.collision.B2ContactPoint},b.collision.B2Simplex=function(){this.m_v1=new b.collision.B2SimplexVertex,this.m_v2=new b.collision.B2SimplexVertex,this.m_v3=new b.collision.B2SimplexVertex,this.m_vertices=new Array,this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},i["box2D.collision.B2Simplex"]=b.collision.B2Simplex,b.collision.B2Simplex.__name__=["box2D","collision","B2Simplex"],b.collision.B2Simplex.prototype={solve3:function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,n=b.common.math.B2Math.subtractVV(e,t),s=b.common.math.B2Math.dot(t,n),o=b.common.math.B2Math.dot(e,n),a=o,r=-s,l=b.common.math.B2Math.subtractVV(i,t),m=b.common.math.B2Math.dot(t,l),c=b.common.math.B2Math.dot(i,l),_=c,h=-m,u=b.common.math.B2Math.subtractVV(i,e),y=b.common.math.B2Math.dot(e,u),d=b.common.math.B2Math.dot(i,u),p=d,g=-y,f=b.common.math.B2Math.crossVV(n,l),x=f*b.common.math.B2Math.crossVV(e,i),B=f*b.common.math.B2Math.crossVV(i,t),v=f*b.common.math.B2Math.crossVV(t,e);if(0>=r&&0>=h)return this.m_v1.a=1,this.m_count=1,void 0;if(a>0&&r>0&&0>=v){var w=1/(a+r);return this.m_v1.a=a*w,this.m_v2.a=r*w,this.m_count=2,void 0}if(_>0&&h>0&&0>=B){var A=1/(_+h);return this.m_v1.a=_*A,this.m_v3.a=h*A,this.m_count=2,this.m_v2.set(this.m_v3),void 0}if(0>=a&&0>=g)return this.m_v2.a=1,this.m_count=1,this.m_v1.set(this.m_v2),void 0;if(0>=_&&0>=p)return this.m_v3.a=1,this.m_count=1,this.m_v1.set(this.m_v3),void 0;if(p>0&&g>0&&0>=x){var S=1/(p+g);return this.m_v2.a=p*S,this.m_v3.a=g*S,this.m_count=2,this.m_v1.set(this.m_v3),void 0}var L=1/(x+B+v);this.m_v1.a=x*L,this.m_v2.a=B*L,this.m_v3.a=v*L,this.m_count=3},solve2:function(){var t=this.m_v1.w,e=this.m_v2.w,i=b.common.math.B2Math.subtractVV(e,t),n=-(t.x*i.x+t.y*i.y);if(0>=n)return this.m_v1.a=1,this.m_count=1,void 0;var s=e.x*i.x+e.y*i.y;if(0>=s)return this.m_v2.a=1,this.m_count=1,this.m_v1.set(this.m_v2),void 0;var o=1/(s+n);this.m_v1.a=s*o,this.m_v2.a=n*o,this.m_count=2},getMetric:function(){var t=this;switch(t.m_count){case 0:return b.common.B2Settings.b2Assert(!1),0;case 1:return 0;case 2:return b.common.math.B2Math.subtractVV(this.m_v1.w,this.m_v2.w).length();case 3:return b.common.math.B2Math.crossVV(b.common.math.B2Math.subtractVV(this.m_v2.w,this.m_v1.w),b.common.math.B2Math.subtractVV(this.m_v3.w,this.m_v1.w));default:return b.common.B2Settings.b2Assert(!1),0}},getWitnessPoints:function(t,e){var i=this;switch(i.m_count){case 0:b.common.B2Settings.b2Assert(!1);break;case 1:t.setV(this.m_v1.wA),e.setV(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:b.common.B2Settings.b2Assert(!1)}},getClosestPoint:function(){var t=this;switch(t.m_count){case 0:return b.common.B2Settings.b2Assert(!1),new b.common.math.B2Vec2;case 1:return this.m_v1.w;case 2:return new b.common.math.B2Vec2(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return b.common.B2Settings.b2Assert(!1),new b.common.math.B2Vec2}},getSearchDirection:function(){var t=this;switch(t.m_count){case 1:return this.m_v1.w.getNegative();case 2:var e=b.common.math.B2Math.subtractVV(this.m_v2.w,this.m_v1.w),i=b.common.math.B2Math.crossVV(e,this.m_v1.w.getNegative());return i>0?b.common.math.B2Math.crossFV(1,e):b.common.math.B2Math.crossVF(e,1);default:return b.common.B2Settings.b2Assert(!1),new b.common.math.B2Vec2}},writeCache:function(t){t.metric=this.getMetric(),t.count=0|this.m_count;for(var e=this.m_vertices,i=0,n=this.m_count;n>i;){var s=i++;t.indexA[s]=0|e[s].indexA,t.indexB[s]=0|e[s].indexB}},readCache:function(t,e,i,n,s){b.common.B2Settings.b2Assert(0<=t.count&&t.count<=3);var o,a;this.m_count=t.count;for(var r,l=this.m_vertices,m=0,c=this.m_count;c>m;){var _=m++;r=l[_],r.indexA=t.indexA[_],r.indexB=t.indexB[_],o=e.getVertex(r.indexA),a=n.getVertex(r.indexB),r.wA=b.common.math.B2Math.mulX(i,o),r.wB=b.common.math.B2Math.mulX(s,a),r.w=b.common.math.B2Math.subtractVV(r.wB,r.wA),r.a=0}if(this.m_count>1){var h=t.metric,u=this.getMetric();(.5*h>u||u>2*h||u<Number.MIN_VALUE)&&(this.m_count=0)}0==this.m_count&&(r=l[0],r.indexA=0,r.indexB=0,o=e.getVertex(0),a=n.getVertex(0),r.wA=b.common.math.B2Math.mulX(i,o),r.wB=b.common.math.B2Math.mulX(s,a),r.w=b.common.math.B2Math.subtractVV(r.wB,r.wA),this.m_count=1)},__class__:b.collision.B2Simplex},b.collision.B2SimplexVertex=function(){},i["box2D.collision.B2SimplexVertex"]=b.collision.B2SimplexVertex,b.collision.B2SimplexVertex.__name__=["box2D","collision","B2SimplexVertex"],b.collision.B2SimplexVertex.prototype={set:function(t){this.wA.setV(t.wA),this.wB.setV(t.wB),this.w.setV(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB},__class__:b.collision.B2SimplexVertex},b.collision.B2Distance=function(){},i["box2D.collision.B2Distance"]=b.collision.B2Distance,b.collision.B2Distance.__name__=["box2D","collision","B2Distance"],b.collision.B2Distance.distance=function(t,e,i){++b.collision.B2Distance.b2_gjkCalls;var n=i.proxyA,s=i.proxyB,o=i.transformA,a=i.transformB,r=b.collision.B2Distance.s_simplex;r.readCache(e,n,o,s,a);for(var l,m=r.m_vertices,c=20,_=b.collision.B2Distance.s_saveA,h=b.collision.B2Distance.s_saveB,u=0,y=r.getClosestPoint(),d=y.lengthSquared(),p=d,g=0;c>g;){u=r.m_count;for(var f=0;u>f;){var x=f++;_[x]=m[x].indexA,h[x]=m[x].indexB}switch(r.m_count){case 1:break;case 2:r.solve2();break;case 3:r.solve3();break;default:b.common.B2Settings.b2Assert(!1)}if(3==r.m_count)break;l=r.getClosestPoint(),p=l.lengthSquared(),d=p;var B=r.getSearchDirection();if(B.lengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;var v=m[r.m_count];v.indexA=0|n.getSupport(b.common.math.B2Math.mulTMV(o.R,B.getNegative())),v.wA=b.common.math.B2Math.mulX(o,n.getVertex(v.indexA)),v.indexB=0|s.getSupport(b.common.math.B2Math.mulTMV(a.R,B)),v.wB=b.common.math.B2Math.mulX(a,s.getVertex(v.indexB)),v.w=b.common.math.B2Math.subtractVV(v.wB,v.wA),++g,++b.collision.B2Distance.b2_gjkIters;for(var w=!1,f=0;u>f;){var x=f++;if(v.indexA==_[x]&&v.indexB==h[x]){w=!0;break}}if(w)break;++r.m_count}if(b.collision.B2Distance.b2_gjkMaxIters=0|b.common.math.B2Math.max(b.collision.B2Distance.b2_gjkMaxIters,g),r.getWitnessPoints(t.pointA,t.pointB),t.distance=b.common.math.B2Math.subtractVV(t.pointA,t.pointB).length(),t.iterations=g,r.writeCache(e),i.useRadii){var A=n.m_radius,S=s.m_radius;if(t.distance>A+S&&t.distance>Number.MIN_VALUE){t.distance-=A+S;var L=b.common.math.B2Math.subtractVV(t.pointB,t.pointA);L.normalize(),t.pointA.x+=A*L.x,t.pointA.y+=A*L.y,t.pointB.x-=S*L.x,t.pointB.y-=S*L.y}else l=new b.common.math.B2Vec2,l.x=.5*(t.pointA.x+t.pointB.x),l.y=.5*(t.pointA.y+t.pointB.y),t.pointA.x=t.pointB.x=l.x,t.pointA.y=t.pointB.y=l.y,t.distance=0}},b.collision.B2DistanceInput=function(){},i["box2D.collision.B2DistanceInput"]=b.collision.B2DistanceInput,b.collision.B2DistanceInput.__name__=["box2D","collision","B2DistanceInput"],b.collision.B2DistanceInput.prototype={__class__:b.collision.B2DistanceInput},b.collision.B2DistanceOutput=function(){this.pointA=new b.common.math.B2Vec2,this.pointB=new b.common.math.B2Vec2},i["box2D.collision.B2DistanceOutput"]=b.collision.B2DistanceOutput,b.collision.B2DistanceOutput.__name__=["box2D","collision","B2DistanceOutput"],b.collision.B2DistanceOutput.prototype={__class__:b.collision.B2DistanceOutput},b.collision.B2DistanceProxy=function(){this.m_vertices=new Array},i["box2D.collision.B2DistanceProxy"]=b.collision.B2DistanceProxy,b.collision.B2DistanceProxy.__name__=["box2D","collision","B2DistanceProxy"],b.collision.B2DistanceProxy.prototype={getVertex:function(t){return b.common.B2Settings.b2Assert(t>=0&&t<this.m_count),this.m_vertices[t]},getVertexCount:function(){return this.m_count},getSupportVertex:function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1,s=this.m_count;s>n;){var o=n++,a=this.m_vertices[o].x*t.x+this.m_vertices[o].y*t.y;a>i&&(e=o,i=a)}return this.m_vertices[e]},getSupport:function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1,s=this.m_count;s>n;){var o=n++,a=this.m_vertices[o].x*t.x+this.m_vertices[o].y*t.y;a>i&&(e=o,i=a)}return e},set:function(t){var e=t.getType();switch(e[1]){case 1:var i=A.Boot.__cast(t,b.collision.shapes.B2CircleShape);this.m_vertices=new Array,this.m_vertices[0]=i.m_p,this.m_count=1,this.m_radius=i.m_radius;break;case 2:var n=A.Boot.__cast(t,b.collision.shapes.B2PolygonShape);this.m_vertices=n.m_vertices,this.m_count=n.m_vertexCount,this.m_radius=n.m_radius;break;default:b.common.B2Settings.b2Assert(!1)}},__class__:b.collision.B2DistanceProxy},b.collision.B2DynamicTree=function(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0},i["box2D.collision.B2DynamicTree"]=b.collision.B2DynamicTree,b.collision.B2DynamicTree.__name__=["box2D","collision","B2DynamicTree"],b.collision.B2DynamicTree.prototype={removeLeaf:function(t){if(t==this.m_root)return this.m_root=null,void 0;var e,i=t.parent,n=i.parent;if(e=i.child1==t?i.child2:i.child1,null!=n)for(n.child1==i?n.child1=e:n.child2=e,e.parent=n,this.freeNode(i);null!=n;){var s=n.aabb;if(n.aabb=new b.collision.B2AABB,n.aabb.combine(n.child1.aabb,n.child2.aabb),s.contains(n.aabb))break;n=n.parent}else this.m_root=e,e.parent=null,this.freeNode(i)},insertLeaf:function(t){if(++this.m_insertionCount,null==this.m_root)return this.m_root=t,this.m_root.parent=null,void 0;var e=t.aabb.getCenter(),i=this.m_root;if(0==i.isLeaf())do{var n=i.child1,s=i.child2,o=Math.abs((n.aabb.lowerBound.x+n.aabb.upperBound.x)/2-e.x)+Math.abs((n.aabb.lowerBound.y+n.aabb.upperBound.y)/2-e.y),a=Math.abs((s.aabb.lowerBound.x+s.aabb.upperBound.x)/2-e.x)+Math.abs((s.aabb.lowerBound.y+s.aabb.upperBound.y)/2-e.y);i=a>o?n:s}while(0==i.isLeaf());var r=i.parent,l=this.allocateNode();if(l.parent=r,l.userData=null,l.aabb.combine(t.aabb,i.aabb),null!=r){i.parent.child1==i?r.child1=l:r.child2=l,l.child1=i,l.child2=t,i.parent=l,t.parent=l;do{if(r.aabb.contains(l.aabb))break;r.aabb.combine(r.child1.aabb,r.child2.aabb),l=r,r=r.parent}while(null!=r)}else l.child1=i,l.child2=t,i.parent=l,t.parent=l,this.m_root=l},freeNode:function(t){t.parent=this.m_freeList,this.m_freeList=t},allocateNode:function(){if(null!=this.m_freeList){var t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t}return new b.collision.B2DynamicTreeNode},rayCast:function(t,e){if(null!=this.m_root){var i=e.p1,n=e.p2,s=b.common.math.B2Math.subtractVV(i,n);s.normalize();var o,a,r=b.common.math.B2Math.crossFV(1,s),l=b.common.math.B2Math.absV(r),m=e.maxFraction,c=new b.collision.B2AABB;o=i.x+m*(n.x-i.x),a=i.y+m*(n.y-i.y),c.lowerBound.x=Math.min(i.x,o),c.lowerBound.y=Math.min(i.y,a),c.upperBound.x=Math.max(i.x,o),c.upperBound.y=Math.max(i.y,a);var _=new Array,h=0;for(_[h++]=this.m_root;h>0;){var u=_[--h];if(0!=u.aabb.testOverlap(c)){var y=u.aabb.getCenter(),d=u.aabb.getExtents(),p=Math.abs(r.x*(i.x-y.x)+r.y*(i.y-y.y))-l.x*d.x-l.y*d.y;if(!(p>0))if(u.isLeaf()){var g=new b.collision.B2RayCastInput;if(g.p1=e.p1,g.p2=e.p2,g.maxFraction=e.maxFraction,m=t(g,u),0==m)return;o=i.x+m*(n.x-i.x),a=i.y+m*(n.y-i.y),c.lowerBound.x=Math.min(i.x,o),c.lowerBound.y=Math.min(i.y,a),c.upperBound.x=Math.max(i.x,o),c.upperBound.y=Math.max(i.y,a)}else _[h++]=u.child1,_[h++]=u.child2}}}},query:function(t,e){if(null!=this.m_root){var i=new Array,n=0;for(i[n++]=this.m_root;n>0;){var s=i[--n];if(s.aabb.testOverlap(e))if(s.isLeaf()){var o=t(s);if(!o)return}else i[n++]=s.child1,i[n++]=s.child2}}},getUserData:function(t){return t.userData},getFatAABB:function(t){return t.aabb},rebalance:function(t){if(null!=this.m_root)for(var e=0;t>e;){for(var i=(e++,this.m_root),n=0;0==i.isLeaf();)i=0!=(this.m_path>>n&1)?i.child2:i.child1,n=n+1&31;++this.m_path,this.removeLeaf(i),this.insertLeaf(i)}},moveProxy:function(t,e,i){if(b.common.B2Settings.b2Assert(t.isLeaf()),t.aabb.contains(e))return!1;this.removeLeaf(t);var n=b.common.B2Settings.b2_aabbExtension+b.common.B2Settings.b2_aabbMultiplier*(i.x>0?i.x:-i.x),s=b.common.B2Settings.b2_aabbExtension+b.common.B2Settings.b2_aabbMultiplier*(i.y>0?i.y:-i.y);return t.aabb.lowerBound.x=e.lowerBound.x-n,t.aabb.lowerBound.y=e.lowerBound.y-s,t.aabb.upperBound.x=e.upperBound.x+n,t.aabb.upperBound.y=e.upperBound.y+s,this.insertLeaf(t),!0},destroyProxy:function(t){this.removeLeaf(t),this.freeNode(t)},createProxy:function(t,e){var i=this.allocateNode(),n=b.common.B2Settings.b2_aabbExtension,s=b.common.B2Settings.b2_aabbExtension;return i.aabb.lowerBound.x=t.lowerBound.x-n,i.aabb.lowerBound.y=t.lowerBound.y-s,i.aabb.upperBound.x=t.upperBound.x+n,i.aabb.upperBound.y=t.upperBound.y+s,i.userData=e,this.insertLeaf(i),i},__class__:b.collision.B2DynamicTree},b.collision.IBroadPhase=function(){},i["box2D.collision.IBroadPhase"]=b.collision.IBroadPhase,b.collision.IBroadPhase.__name__=["box2D","collision","IBroadPhase"],b.collision.IBroadPhase.prototype={__class__:b.collision.IBroadPhase},b.collision.B2DynamicTreeBroadPhase=function(){this.m_tree=new b.collision.B2DynamicTree,this.m_moveBuffer=new Array,this.m_pairBuffer=new Array,this.m_pairCount=0},i["box2D.collision.B2DynamicTreeBroadPhase"]=b.collision.B2DynamicTreeBroadPhase,b.collision.B2DynamicTreeBroadPhase.__name__=["box2D","collision","B2DynamicTreeBroadPhase"],b.collision.B2DynamicTreeBroadPhase.__interfaces__=[b.collision.IBroadPhase],b.collision.B2DynamicTreeBroadPhase.prototype={comparePairs:function(){return 0},unBufferMove:function(t){r.remove(this.m_moveBuffer,t)},bufferMove:function(t){this.m_moveBuffer[this.m_moveBuffer.length]=t},rebalance:function(t){this.m_tree.rebalance(t)},validate:function(){},rayCast:function(t,e){this.m_tree.rayCast(t,e)},query:function(t,e){this.m_tree.query(t,e)},updatePairs:function(t){var e=this;this.m_pairCount=0;for(var i=0,n=this.m_moveBuffer;i<n.length;){var s=[n[i]];++i;var o=function(t){return function(i){if(i==t[0])return!0;e.m_pairCount==e.m_pairBuffer.length&&(e.m_pairBuffer[e.m_pairCount]=new b.collision.B2DynamicTreePair);var n=e.m_pairBuffer[e.m_pairCount];return i.id<t[0].id?(n.proxyA=i,n.proxyB=t[0]):(n.proxyA=t[0],n.proxyB=i),++e.m_pairCount,!0}}(s),a=this.m_tree.getFatAABB(s[0]);this.m_tree.query(o,a)}this.m_moveBuffer=new Array;for(var r=!0,l=0;r;)if(l>=this.m_pairCount)r=!1;else{var m=this.m_pairBuffer[l],c=this.m_tree.getUserData(m.proxyA),_=this.m_tree.getUserData(m.proxyB);for(t(c,_),++l;l<this.m_pairCount;){var h=this.m_pairBuffer[l];if(h.proxyA!=m.proxyA||h.proxyB!=m.proxyB)break;++l}}},getProxyCount:function(){return this.m_proxyCount},getFatAABB:function(t){return this.m_tree.getFatAABB(t)},getUserData:function(t){return this.m_tree.getUserData(t)},testOverlap:function(t,e){var i=this.m_tree.getFatAABB(t),n=this.m_tree.getFatAABB(e);return i.testOverlap(n)},moveProxy:function(t,e,i){var n=this.m_tree.moveProxy(t,e,i);n&&this.bufferMove(t)},destroyProxy:function(t){this.unBufferMove(t),--this.m_proxyCount,this.m_tree.destroyProxy(t)},createProxy:function(t,e){var i=this.m_tree.createProxy(t,e);return++this.m_proxyCount,this.bufferMove(i),i},__class__:b.collision.B2DynamicTreeBroadPhase},b.collision.B2DynamicTreeNode=function(){this.aabb=new b.collision.B2AABB,this.id=b.collision.B2DynamicTreeNode.currentID++},i["box2D.collision.B2DynamicTreeNode"]=b.collision.B2DynamicTreeNode,b.collision.B2DynamicTreeNode.__name__=["box2D","collision","B2DynamicTreeNode"],b.collision.B2DynamicTreeNode.prototype={isLeaf:function(){return null==this.child1},__class__:b.collision.B2DynamicTreeNode},b.collision.B2DynamicTreePair=function(){},i["box2D.collision.B2DynamicTreePair"]=b.collision.B2DynamicTreePair,b.collision.B2DynamicTreePair.__name__=["box2D","collision","B2DynamicTreePair"],b.collision.B2DynamicTreePair.prototype={__class__:b.collision.B2DynamicTreePair},b.collision.B2Manifold=function(){this.m_pointCount=0,this.m_points=new Array;for(var t=0,e=b.common.B2Settings.b2_maxManifoldPoints;e>t;){var i=t++;this.m_points[i]=new b.collision.B2ManifoldPoint}this.m_localPlaneNormal=new b.common.math.B2Vec2,this.m_localPoint=new b.common.math.B2Vec2},i["box2D.collision.B2Manifold"]=b.collision.B2Manifold,b.collision.B2Manifold.__name__=["box2D","collision","B2Manifold"],b.collision.B2Manifold.prototype={copy:function(){var t=new b.collision.B2Manifold;return t.set(this),t},set:function(t){this.m_pointCount=t.m_pointCount;for(var e=0,i=b.common.B2Settings.b2_maxManifoldPoints;i>e;){var n=e++;this.m_points[n].set(t.m_points[n])}this.m_localPlaneNormal.setV(t.m_localPlaneNormal),this.m_localPoint.setV(t.m_localPoint),this.m_type=t.m_type},reset:function(){for(var t=0,e=b.common.B2Settings.b2_maxManifoldPoints;e>t;){var i=t++;this.m_points[i].reset()}this.m_localPlaneNormal.setZero(),this.m_localPoint.setZero(),this.m_type=b.collision.B2ManifoldType.CIRCLES,this.m_pointCount=0},__class__:b.collision.B2Manifold},b.collision.B2ManifoldPoint=function(){this.m_localPoint=new b.common.math.B2Vec2,this.m_id=new b.collision.B2ContactID,this.reset()},i["box2D.collision.B2ManifoldPoint"]=b.collision.B2ManifoldPoint,b.collision.B2ManifoldPoint.__name__=["box2D","collision","B2ManifoldPoint"],b.collision.B2ManifoldPoint.prototype={set:function(t){this.m_localPoint.setV(t.m_localPoint),this.m_normalImpulse=t.m_normalImpulse,this.m_tangentImpulse=t.m_tangentImpulse,this.m_id.set(t.m_id)},reset:function(){this.m_localPoint.setZero(),this.m_normalImpulse=0,this.m_tangentImpulse=0,this.m_id.set_key(0)},__class__:b.collision.B2ManifoldPoint},b.collision.B2ManifoldType=i["box2D.collision.B2ManifoldType"]={__ename__:!0,__constructs__:["CIRCLES","FACE_A","FACE_B"]},b.collision.B2ManifoldType.CIRCLES=["CIRCLES",0],b.collision.B2ManifoldType.CIRCLES.toString=n,b.collision.B2ManifoldType.CIRCLES.__enum__=b.collision.B2ManifoldType,b.collision.B2ManifoldType.FACE_A=["FACE_A",1],b.collision.B2ManifoldType.FACE_A.toString=n,b.collision.B2ManifoldType.FACE_A.__enum__=b.collision.B2ManifoldType,b.collision.B2ManifoldType.FACE_B=["FACE_B",2],b.collision.B2ManifoldType.FACE_B.toString=n,b.collision.B2ManifoldType.FACE_B.__enum__=b.collision.B2ManifoldType,b.collision.B2OBB=function(){this.R=new b.common.math.B2Mat22,this.center=new b.common.math.B2Vec2,this.extents=new b.common.math.B2Vec2},i["box2D.collision.B2OBB"]=b.collision.B2OBB,b.collision.B2OBB.__name__=["box2D","collision","B2OBB"],b.collision.B2OBB.prototype={__class__:b.collision.B2OBB},b.collision.B2RayCastInput=function(t,e,i){null==i&&(i=1),this.p1=new b.common.math.B2Vec2,this.p2=new b.common.math.B2Vec2,null!=t&&this.p1.setV(t),null!=e&&this.p2.setV(e),this.maxFraction=i},i["box2D.collision.B2RayCastInput"]=b.collision.B2RayCastInput,b.collision.B2RayCastInput.__name__=["box2D","collision","B2RayCastInput"],b.collision.B2RayCastInput.prototype={__class__:b.collision.B2RayCastInput},b.collision.B2RayCastOutput=function(){this.normal=new b.common.math.B2Vec2},i["box2D.collision.B2RayCastOutput"]=b.collision.B2RayCastOutput,b.collision.B2RayCastOutput.__name__=["box2D","collision","B2RayCastOutput"],b.collision.B2RayCastOutput.prototype={__class__:b.collision.B2RayCastOutput},b.collision.B2SeparationFunction=function(){this.m_localPoint=new b.common.math.B2Vec2,this.m_axis=new b.common.math.B2Vec2},i["box2D.collision.B2SeparationFunction"]=b.collision.B2SeparationFunction,b.collision.B2SeparationFunction.__name__=["box2D","collision","B2SeparationFunction"],b.collision.B2SeparationFunction.prototype={evaluate:function(t,e){var i,n,s,o,a,r,l,m,c=this;switch(c.m_type[1]){case 0:return i=b.common.math.B2Math.mulTMV(t.R,this.m_axis),n=b.common.math.B2Math.mulTMV(e.R,this.m_axis.getNegative()),s=this.m_proxyA.getSupportVertex(i),o=this.m_proxyB.getSupportVertex(n),a=b.common.math.B2Math.mulX(t,s),r=b.common.math.B2Math.mulX(e,o),l=(r.x-a.x)*this.m_axis.x+(r.y-a.y)*this.m_axis.y;case 1:return m=b.common.math.B2Math.mulMV(t.R,this.m_axis),a=b.common.math.B2Math.mulX(t,this.m_localPoint),n=b.common.math.B2Math.mulTMV(e.R,m.getNegative()),o=this.m_proxyB.getSupportVertex(n),r=b.common.math.B2Math.mulX(e,o),l=(r.x-a.x)*m.x+(r.y-a.y)*m.y;case 2:return m=b.common.math.B2Math.mulMV(e.R,this.m_axis),r=b.common.math.B2Math.mulX(e,this.m_localPoint),i=b.common.math.B2Math.mulTMV(t.R,m.getNegative()),s=this.m_proxyA.getSupportVertex(i),a=b.common.math.B2Math.mulX(t,s),l=(a.x-r.x)*m.x+(a.y-r.y)*m.y}},initialize:function(t,e,i,n,s){this.m_proxyA=e,this.m_proxyB=n;var o=t.count;b.common.B2Settings.b2Assert(o>0&&3>o);var a,r,l,m,c,_,h,u,y,d,p,g,f,x,B=new b.common.math.B2Vec2,v=new b.common.math.B2Vec2;if(1==o)this.m_type=b.collision.B2SeparationFunctionType.POINTS,B=this.m_proxyA.getVertex(t.indexA[0]),v=this.m_proxyB.getVertex(t.indexB[0]),g=B,p=i.R,c=i.position.x+(p.col1.x*g.x+p.col2.x*g.y),_=i.position.y+(p.col1.y*g.x+p.col2.y*g.y),g=v,p=s.R,h=s.position.x+(p.col1.x*g.x+p.col2.x*g.y),u=s.position.y+(p.col1.y*g.x+p.col2.y*g.y),this.m_axis.x=h-c,this.m_axis.y=u-_,this.m_axis.normalize();else if(t.indexB[0]==t.indexB[1])this.m_type=b.collision.B2SeparationFunctionType.FACE_A,a=this.m_proxyA.getVertex(t.indexA[0]),r=this.m_proxyA.getVertex(t.indexA[1]),v=this.m_proxyB.getVertex(t.indexB[0]),this.m_localPoint.x=.5*(a.x+r.x),this.m_localPoint.y=.5*(a.y+r.y),this.m_axis=b.common.math.B2Math.crossVF(b.common.math.B2Math.subtractVV(r,a),1),this.m_axis.normalize(),g=this.m_axis,p=i.R,y=p.col1.x*g.x+p.col2.x*g.y,d=p.col1.y*g.x+p.col2.y*g.y,g=this.m_localPoint,p=i.R,c=i.position.x+(p.col1.x*g.x+p.col2.x*g.y),_=i.position.y+(p.col1.y*g.x+p.col2.y*g.y),g=v,p=s.R,h=s.position.x+(p.col1.x*g.x+p.col2.x*g.y),u=s.position.y+(p.col1.y*g.x+p.col2.y*g.y),f=(h-c)*y+(u-_)*d,0>f&&this.m_axis.negativeSelf();else if(t.indexA[0]==t.indexA[0])this.m_type=b.collision.B2SeparationFunctionType.FACE_B,l=this.m_proxyB.getVertex(t.indexB[0]),m=this.m_proxyB.getVertex(t.indexB[1]),B=this.m_proxyA.getVertex(t.indexA[0]),this.m_localPoint.x=.5*(l.x+m.x),this.m_localPoint.y=.5*(l.y+m.y),this.m_axis=b.common.math.B2Math.crossVF(b.common.math.B2Math.subtractVV(m,l),1),this.m_axis.normalize(),g=this.m_axis,p=s.R,y=p.col1.x*g.x+p.col2.x*g.y,d=p.col1.y*g.x+p.col2.y*g.y,g=this.m_localPoint,p=s.R,h=s.position.x+(p.col1.x*g.x+p.col2.x*g.y),u=s.position.y+(p.col1.y*g.x+p.col2.y*g.y),g=B,p=i.R,c=i.position.x+(p.col1.x*g.x+p.col2.x*g.y),_=i.position.y+(p.col1.y*g.x+p.col2.y*g.y),f=(c-h)*y+(_-u)*d,0>f&&this.m_axis.negativeSelf();else{a=this.m_proxyA.getVertex(t.indexA[0]),r=this.m_proxyA.getVertex(t.indexA[1]),l=this.m_proxyB.getVertex(t.indexB[0]),m=this.m_proxyB.getVertex(t.indexB[1]);var w=(b.common.math.B2Math.mulX(i,B),b.common.math.B2Math.mulMV(i.R,b.common.math.B2Math.subtractVV(r,a))),A=(b.common.math.B2Math.mulX(s,v),b.common.math.B2Math.mulMV(s.R,b.common.math.B2Math.subtractVV(m,l))),S=w.x*w.x+w.y*w.y,L=A.x*A.x+A.y*A.y,M=b.common.math.B2Math.subtractVV(A,w),C=w.x*M.x+w.y*M.y,T=A.x*M.x+A.y*M.y,I=w.x*A.x+w.y*A.y,D=S*L-I*I;f=0,0!=D&&(f=b.common.math.B2Math.clamp((I*T-C*L)/D,0,1));var V=(I*f+T)/L;0>V&&(V=0,f=b.common.math.B2Math.clamp((I-C)/S,0,1)),B=new b.common.math.B2Vec2,B.x=a.x+f*(r.x-a.x),B.y=a.y+f*(r.y-a.y),v=new b.common.math.B2Vec2,v.x=l.x+f*(m.x-l.x),v.y=l.y+f*(m.y-l.y),0==f||1==f?(this.m_type=b.collision.B2SeparationFunctionType.FACE_B,this.m_axis=b.common.math.B2Math.crossVF(b.common.math.B2Math.subtractVV(m,l),1),this.m_axis.normalize(),this.m_localPoint=v,g=this.m_axis,p=s.R,y=p.col1.x*g.x+p.col2.x*g.y,d=p.col1.y*g.x+p.col2.y*g.y,g=this.m_localPoint,p=s.R,h=s.position.x+(p.col1.x*g.x+p.col2.x*g.y),u=s.position.y+(p.col1.y*g.x+p.col2.y*g.y),g=B,p=i.R,c=i.position.x+(p.col1.x*g.x+p.col2.x*g.y),_=i.position.y+(p.col1.y*g.x+p.col2.y*g.y),x=(c-h)*y+(_-u)*d,0>f&&this.m_axis.negativeSelf()):(this.m_type=b.collision.B2SeparationFunctionType.FACE_A,this.m_axis=b.common.math.B2Math.crossVF(b.common.math.B2Math.subtractVV(r,a),1),this.m_localPoint=B,g=this.m_axis,p=i.R,y=p.col1.x*g.x+p.col2.x*g.y,d=p.col1.y*g.x+p.col2.y*g.y,g=this.m_localPoint,p=i.R,c=i.position.x+(p.col1.x*g.x+p.col2.x*g.y),_=i.position.y+(p.col1.y*g.x+p.col2.y*g.y),g=v,p=s.R,h=s.position.x+(p.col1.x*g.x+p.col2.x*g.y),u=s.position.y+(p.col1.y*g.x+p.col2.y*g.y),x=(h-c)*y+(u-_)*d,0>f&&this.m_axis.negativeSelf())}},__class__:b.collision.B2SeparationFunction},b.collision.B2SeparationFunctionType=i["box2D.collision.B2SeparationFunctionType"]={__ename__:!0,__constructs__:["POINTS","FACE_A","FACE_B"]},b.collision.B2SeparationFunctionType.POINTS=["POINTS",0],b.collision.B2SeparationFunctionType.POINTS.toString=n,b.collision.B2SeparationFunctionType.POINTS.__enum__=b.collision.B2SeparationFunctionType,b.collision.B2SeparationFunctionType.FACE_A=["FACE_A",1],b.collision.B2SeparationFunctionType.FACE_A.toString=n,b.collision.B2SeparationFunctionType.FACE_A.__enum__=b.collision.B2SeparationFunctionType,b.collision.B2SeparationFunctionType.FACE_B=["FACE_B",2],b.collision.B2SeparationFunctionType.FACE_B.toString=n,b.collision.B2SeparationFunctionType.FACE_B.__enum__=b.collision.B2SeparationFunctionType,b.collision.B2SimplexCache=function(){this.indexA=new Array,this.indexB=new Array},i["box2D.collision.B2SimplexCache"]=b.collision.B2SimplexCache,b.collision.B2SimplexCache.__name__=["box2D","collision","B2SimplexCache"],b.collision.B2SimplexCache.prototype={__class__:b.collision.B2SimplexCache},b.collision.B2TOIInput=function(){this.proxyA=new b.collision.B2DistanceProxy,this.proxyB=new b.collision.B2DistanceProxy,this.sweepA=new b.common.math.B2Sweep,this.sweepB=new b.common.math.B2Sweep},i["box2D.collision.B2TOIInput"]=b.collision.B2TOIInput,b.collision.B2TOIInput.__name__=["box2D","collision","B2TOIInput"],b.collision.B2TOIInput.prototype={__class__:b.collision.B2TOIInput},b.common.math.B2Transform=function(t,e){this.position=new b.common.math.B2Vec2,this.R=new b.common.math.B2Mat22,null!=t&&(this.position.setV(t),this.R.setM(e))},i["box2D.common.math.B2Transform"]=b.common.math.B2Transform,b.common.math.B2Transform.__name__=["box2D","common","math","B2Transform"],b.common.math.B2Transform.prototype={getAngle:function(){return Math.atan2(this.R.col1.y,this.R.col1.x)
},set:function(t){this.position.setV(t.position),this.R.setM(t.R)},setIdentity:function(){this.position.setZero(),this.R.setIdentity()},initialize:function(t,e){this.position.setV(t),this.R.setM(e)},__class__:b.common.math.B2Transform},b.common.math.B2Mat22=function(){this.col1=new b.common.math.B2Vec2(0,1),this.col2=new b.common.math.B2Vec2(0,1)},i["box2D.common.math.B2Mat22"]=b.common.math.B2Mat22,b.common.math.B2Mat22.__name__=["box2D","common","math","B2Mat22"],b.common.math.B2Mat22.fromAngle=function(t){var e=new b.common.math.B2Mat22;return e.set(t),e},b.common.math.B2Mat22.fromVV=function(t,e){var i=new b.common.math.B2Mat22;return i.setVV(t,e),i},b.common.math.B2Mat22.prototype={abs:function(){this.col1.abs(),this.col2.abs()},solve:function(t,e,i){var n=this.col1.x,s=this.col2.x,o=this.col1.y,a=this.col2.y,r=n*a-s*o;return 0!=r&&(r=1/r),t.x=r*(a*e-s*i),t.y=r*(n*i-o*e),t},getInverse:function(t){var e=this.col1.x,i=this.col2.x,n=this.col1.y,s=this.col2.y,o=e*s-i*n;return 0!=o&&(o=1/o),t.col1.x=o*s,t.col2.x=-o*i,t.col1.y=-o*n,t.col2.y=o*e,t},getAngle:function(){return Math.atan2(this.col1.y,this.col1.x)},setZero:function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},setIdentity:function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},addM:function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y},setM:function(t){this.col1.setV(t.col1),this.col2.setV(t.col2)},copy:function(){var t=new b.common.math.B2Mat22;return t.setM(this),t},setVV:function(t,e){this.col1.setV(t),this.col2.setV(e)},set:function(t){var e=Math.cos(t),i=Math.sin(t);this.col1.x=e,this.col2.x=-i,this.col1.y=i,this.col2.y=e},__class__:b.common.math.B2Mat22},b.collision.B2TimeOfImpact=function(){},i["box2D.collision.B2TimeOfImpact"]=b.collision.B2TimeOfImpact,b.collision.B2TimeOfImpact.__name__=["box2D","collision","B2TimeOfImpact"],b.collision.B2TimeOfImpact.timeOfImpact=function(t){++b.collision.B2TimeOfImpact.b2_toiCalls;var e=t.proxyA,i=t.proxyB,n=t.sweepA,s=t.sweepB;b.common.B2Settings.b2Assert(n.t0==s.t0),b.common.B2Settings.b2Assert(1-n.t0>Number.MIN_VALUE);var o=e.m_radius+i.m_radius,a=t.tolerance,r=0,l=1e3,m=0,c=0;for(b.collision.B2TimeOfImpact.s_cache.count=0,b.collision.B2TimeOfImpact.s_distanceInput.useRadii=!1;;){if(n.getTransform(b.collision.B2TimeOfImpact.s_xfA,r),s.getTransform(b.collision.B2TimeOfImpact.s_xfB,r),b.collision.B2TimeOfImpact.s_distanceInput.proxyA=e,b.collision.B2TimeOfImpact.s_distanceInput.proxyB=i,b.collision.B2TimeOfImpact.s_distanceInput.transformA=b.collision.B2TimeOfImpact.s_xfA,b.collision.B2TimeOfImpact.s_distanceInput.transformB=b.collision.B2TimeOfImpact.s_xfB,b.collision.B2Distance.distance(b.collision.B2TimeOfImpact.s_distanceOutput,b.collision.B2TimeOfImpact.s_cache,b.collision.B2TimeOfImpact.s_distanceInput),b.collision.B2TimeOfImpact.s_distanceOutput.distance<=0){r=1;break}b.collision.B2TimeOfImpact.s_fcn.initialize(b.collision.B2TimeOfImpact.s_cache,e,b.collision.B2TimeOfImpact.s_xfA,i,b.collision.B2TimeOfImpact.s_xfB);var _=b.collision.B2TimeOfImpact.s_fcn.evaluate(b.collision.B2TimeOfImpact.s_xfA,b.collision.B2TimeOfImpact.s_xfB);if(0>=_){r=1;break}if(0==m&&(c=_>o?b.common.math.B2Math.max(o-a,.75*o):b.common.math.B2Math.max(_-a,.02*o)),.5*a>_-c){if(0==m){r=1;break}break}var h=r,u=r,y=1,d=_;n.getTransform(b.collision.B2TimeOfImpact.s_xfA,y),s.getTransform(b.collision.B2TimeOfImpact.s_xfB,y);var p=b.collision.B2TimeOfImpact.s_fcn.evaluate(b.collision.B2TimeOfImpact.s_xfA,b.collision.B2TimeOfImpact.s_xfB);if(p>=c){r=1;break}for(var g=0;;){var f;f=0!=(1&g)?u+(c-d)*(y-u)/(p-d):.5*(u+y),n.getTransform(b.collision.B2TimeOfImpact.s_xfA,f),s.getTransform(b.collision.B2TimeOfImpact.s_xfB,f);var x=b.collision.B2TimeOfImpact.s_fcn.evaluate(b.collision.B2TimeOfImpact.s_xfA,b.collision.B2TimeOfImpact.s_xfB);if(b.common.math.B2Math.abs(x-c)<.025*a){h=f;break}if(x>c?(u=f,d=x):(y=f,p=x),++g,++b.collision.B2TimeOfImpact.b2_toiRootIters,50==g)break}if(b.collision.B2TimeOfImpact.b2_toiMaxRootIters=0|b.common.math.B2Math.max(b.collision.B2TimeOfImpact.b2_toiMaxRootIters,g),h<(1+100*Number.MIN_VALUE)*r)break;if(r=h,m++,++b.collision.B2TimeOfImpact.b2_toiIters,m==l)break}return b.collision.B2TimeOfImpact.b2_toiMaxIters=0|b.common.math.B2Math.max(b.collision.B2TimeOfImpact.b2_toiMaxIters,m),r},b.collision.B2WorldManifold=function(){this.m_normal=new b.common.math.B2Vec2,this.m_points=new Array;for(var t=0,e=b.common.B2Settings.b2_maxManifoldPoints;e>t;){var i=t++;this.m_points[i]=new b.common.math.B2Vec2}},i["box2D.collision.B2WorldManifold"]=b.collision.B2WorldManifold,b.collision.B2WorldManifold.__name__=["box2D","collision","B2WorldManifold"],b.collision.B2WorldManifold.prototype={initialize:function(t,e,i,n,s){if(0!=t.m_pointCount){var o,a,r,l,m,c,_,h;switch(t.m_type[1]){case 0:a=e.R,o=t.m_localPoint;var u=e.position.x+a.col1.x*o.x+a.col2.x*o.y,y=e.position.y+a.col1.y*o.x+a.col2.y*o.y;a=n.R,o=t.m_points[0].m_localPoint;var d=n.position.x+a.col1.x*o.x+a.col2.x*o.y,p=n.position.y+a.col1.y*o.x+a.col2.y*o.y,g=d-u,f=p-y,x=g*g+f*f;if(x>Number.MIN_VALUE*Number.MIN_VALUE){var B=Math.sqrt(x);this.m_normal.x=g/B,this.m_normal.y=f/B}else this.m_normal.x=1,this.m_normal.y=0;var v=u+i*this.m_normal.x,b=y+i*this.m_normal.y,w=d-s*this.m_normal.x,A=p-s*this.m_normal.y;this.m_points[0].x=.5*(v+w),this.m_points[0].y=.5*(b+A);break;case 1:a=e.R,o=t.m_localPlaneNormal,r=a.col1.x*o.x+a.col2.x*o.y,l=a.col1.y*o.x+a.col2.y*o.y,a=e.R,o=t.m_localPoint,m=e.position.x+a.col1.x*o.x+a.col2.x*o.y,c=e.position.y+a.col1.y*o.x+a.col2.y*o.y,this.m_normal.x=r,this.m_normal.y=l;for(var S=0,L=t.m_pointCount;L>S;){var M=S++;a=n.R,o=t.m_points[M].m_localPoint,_=n.position.x+a.col1.x*o.x+a.col2.x*o.y,h=n.position.y+a.col1.y*o.x+a.col2.y*o.y,this.m_points[M].x=_+.5*(i-(_-m)*r-(h-c)*l-s)*r,this.m_points[M].y=h+.5*(i-(_-m)*r-(h-c)*l-s)*l}break;case 2:a=n.R,o=t.m_localPlaneNormal,r=a.col1.x*o.x+a.col2.x*o.y,l=a.col1.y*o.x+a.col2.y*o.y,a=n.R,o=t.m_localPoint,m=n.position.x+a.col1.x*o.x+a.col2.x*o.y,c=n.position.y+a.col1.y*o.x+a.col2.y*o.y,this.m_normal.x=-r,this.m_normal.y=-l;for(var S=0,L=t.m_pointCount;L>S;){var M=S++;a=e.R,o=t.m_points[M].m_localPoint,_=e.position.x+a.col1.x*o.x+a.col2.x*o.y,h=e.position.y+a.col1.y*o.x+a.col2.y*o.y,this.m_points[M].x=_+.5*(s-(_-m)*r-(h-c)*l-i)*r,this.m_points[M].y=h+.5*(s-(_-m)*r-(h-c)*l-i)*l}}}},__class__:b.collision.B2WorldManifold},b.collision.shapes={},b.collision.shapes.B2Shape=function(){this.m_type=b.collision.shapes.B2ShapeType.UNKNOWN_SHAPE,this.m_radius=b.common.B2Settings.b2_linearSlop},i["box2D.collision.shapes.B2Shape"]=b.collision.shapes.B2Shape,b.collision.shapes.B2Shape.__name__=["box2D","collision","shapes","B2Shape"],b.collision.shapes.B2Shape.testOverlap=function(){return!0},b.collision.shapes.B2Shape.prototype={computeSubmergedArea:function(){return 0},computeMass:function(){},computeAABB:function(){},rayCast:function(){return!1},testPoint:function(){return!1},getType:function(){return this.m_type},set:function(t){this.m_radius=t.m_radius},copy:function(){return null},__class__:b.collision.shapes.B2Shape},b.collision.shapes.B2CircleShape=function(t){null==t&&(t=0),b.collision.shapes.B2Shape.call(this),this.m_p=new b.common.math.B2Vec2,this.m_type=b.collision.shapes.B2ShapeType.CIRCLE_SHAPE,this.m_radius=t},i["box2D.collision.shapes.B2CircleShape"]=b.collision.shapes.B2CircleShape,b.collision.shapes.B2CircleShape.__name__=["box2D","collision","shapes","B2CircleShape"],b.collision.shapes.B2CircleShape.__super__=b.collision.shapes.B2Shape,b.collision.shapes.B2CircleShape.prototype=t(b.collision.shapes.B2Shape.prototype,{setRadius:function(t){this.m_radius=t},getRadius:function(){return this.m_radius},setLocalPosition:function(t){this.m_p.setV(t)},getLocalPosition:function(){return this.m_p},computeSubmergedArea:function(t,e,i,n){var s=b.common.math.B2Math.mulX(i,this.m_p),o=-(b.common.math.B2Math.dot(t,s)-e);if(o<-this.m_radius+Number.MIN_VALUE)return 0;if(o>this.m_radius)return n.setV(s),Math.PI*this.m_radius*this.m_radius;var a=this.m_radius*this.m_radius,r=o*o,l=a*(Math.asin(o/this.m_radius)+Math.PI/2)+o*Math.sqrt(a-r),m=-2/3*Math.pow(a-r,1.5)/l;return n.x=s.x+t.x*m,n.y=s.y+t.y*m,l},computeMass:function(t,e){t.mass=e*b.common.B2Settings.b2_pi*this.m_radius*this.m_radius,t.center.setV(this.m_p),t.I=t.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},computeAABB:function(t,e){var i=e.R,n=e.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),s=e.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y);t.lowerBound.set(n-this.m_radius,s-this.m_radius),t.upperBound.set(n+this.m_radius,s+this.m_radius)},rayCast:function(t,e,i){var n=i.R,s=i.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y),o=i.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y),a=e.p1.x-s,r=e.p1.y-o,l=a*a+r*r-this.m_radius*this.m_radius,m=e.p2.x-e.p1.x,c=e.p2.y-e.p1.y,_=a*m+r*c,h=m*m+c*c,u=_*_-h*l;if(0>u||h<Number.MIN_VALUE)return!1;var y=-(_+Math.sqrt(u));return y>=0&&y<=e.maxFraction*h?(y/=h,t.fraction=y,t.normal.x=a+y*m,t.normal.y=r+y*c,t.normal.normalize(),!0):!1},testPoint:function(t,e){var i=t.R,n=t.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),s=t.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y);return n=e.x-n,s=e.y-s,n*n+s*s<=this.m_radius*this.m_radius},set:function(t){if(b.collision.shapes.B2Shape.prototype.set.call(this,t),A.Boot.__instanceof(t,b.collision.shapes.B2CircleShape)){var e=A.Boot.__cast(t,b.collision.shapes.B2CircleShape);this.m_p.setV(e.m_p)}},copy:function(){var t=new b.collision.shapes.B2CircleShape;return t.set(this),t},__class__:b.collision.shapes.B2CircleShape}),b.collision.shapes.B2EdgeShape=function(t,e){b.collision.shapes.B2Shape.call(this),this.s_supportVec=new b.common.math.B2Vec2,this.m_v1=new b.common.math.B2Vec2,this.m_v2=new b.common.math.B2Vec2,this.m_coreV1=new b.common.math.B2Vec2,this.m_coreV2=new b.common.math.B2Vec2,this.m_normal=new b.common.math.B2Vec2,this.m_direction=new b.common.math.B2Vec2,this.m_cornerDir1=new b.common.math.B2Vec2,this.m_cornerDir2=new b.common.math.B2Vec2,this.m_type=b.collision.shapes.B2ShapeType.EDGE_SHAPE,this.m_prevEdge=null,this.m_nextEdge=null,this.m_v1=t,this.m_v2=e,this.m_direction.set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y),this.m_length=this.m_direction.normalize(),this.m_normal.set(this.m_direction.y,-this.m_direction.x),this.m_coreV1.set(-b.common.B2Settings.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-b.common.B2Settings.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y),this.m_coreV2.set(-b.common.B2Settings.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-b.common.B2Settings.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y),this.m_cornerDir1=this.m_normal,this.m_cornerDir2.set(-this.m_normal.x,-this.m_normal.y)},i["box2D.collision.shapes.B2EdgeShape"]=b.collision.shapes.B2EdgeShape,b.collision.shapes.B2EdgeShape.__name__=["box2D","collision","shapes","B2EdgeShape"],b.collision.shapes.B2EdgeShape.__super__=b.collision.shapes.B2Shape,b.collision.shapes.B2EdgeShape.prototype=t(b.collision.shapes.B2Shape.prototype,{setNextEdge:function(t,e,i,n){this.m_nextEdge=t,this.m_coreV2=e,this.m_cornerDir2=i,this.m_cornerConvex2=n},setPrevEdge:function(t,e,i,n){this.m_prevEdge=t,this.m_coreV1=e,this.m_cornerDir1=i,this.m_cornerConvex1=n},support:function(t,e,i){var n=t.R,s=t.position.x+(n.col1.x*this.m_coreV1.x+n.col2.x*this.m_coreV1.y),o=t.position.y+(n.col1.y*this.m_coreV1.x+n.col2.y*this.m_coreV1.y),a=t.position.x+(n.col1.x*this.m_coreV2.x+n.col2.x*this.m_coreV2.y),r=t.position.y+(n.col1.y*this.m_coreV2.x+n.col2.y*this.m_coreV2.y);return s*e+o*i>a*e+r*i?(this.s_supportVec.x=s,this.s_supportVec.y=o):(this.s_supportVec.x=a,this.s_supportVec.y=r),this.s_supportVec},getPrevEdge:function(){return this.m_prevEdge},getNextEdge:function(){return this.m_nextEdge},getFirstVertex:function(t){var e=t.R;return new b.common.math.B2Vec2(t.position.x+(e.col1.x*this.m_coreV1.x+e.col2.x*this.m_coreV1.y),t.position.y+(e.col1.y*this.m_coreV1.x+e.col2.y*this.m_coreV1.y))},corner2IsConvex:function(){return this.m_cornerConvex2},corner1IsConvex:function(){return this.m_cornerConvex1},getCorner2Vector:function(){return this.m_cornerDir2},getCorner1Vector:function(){return this.m_cornerDir1},getDirectionVector:function(){return this.m_direction},getNormalVector:function(){return this.m_normal},getCoreVertex2:function(){return this.m_coreV2},getCoreVertex1:function(){return this.m_coreV1},getVertex2:function(){return this.m_v2},getVertex1:function(){return this.m_v1},getLength:function(){return this.m_length},computeSubmergedArea:function(t,e,i,n){var s=new b.common.math.B2Vec2(t.x*e,t.y*e),o=b.common.math.B2Math.mulX(i,this.m_v1),a=b.common.math.B2Math.mulX(i,this.m_v2),r=b.common.math.B2Math.dot(t,o)-e,l=b.common.math.B2Math.dot(t,a)-e;if(r>0){if(l>0)return 0;o.x=-l/(r-l)*o.x+r/(r-l)*a.x,o.y=-l/(r-l)*o.y+r/(r-l)*a.y}else l>0&&(a.x=-l/(r-l)*o.x+r/(r-l)*a.x,a.y=-l/(r-l)*o.y+r/(r-l)*a.y);return n.x=(s.x+o.x+a.x)/3,n.y=(s.y+o.y+a.y)/3,.5*((o.x-s.x)*(a.y-s.y)-(o.y-s.y)*(a.x-s.x))},computeMass:function(t){t.mass=0,t.center.setV(this.m_v1),t.I=0},computeAABB:function(t,e){var i=e.R,n=e.position.x+(i.col1.x*this.m_v1.x+i.col2.x*this.m_v1.y),s=e.position.y+(i.col1.y*this.m_v1.x+i.col2.y*this.m_v1.y),o=e.position.x+(i.col1.x*this.m_v2.x+i.col2.x*this.m_v2.y),a=e.position.y+(i.col1.y*this.m_v2.x+i.col2.y*this.m_v2.y);o>n?(t.lowerBound.x=n,t.upperBound.x=o):(t.lowerBound.x=o,t.upperBound.x=n),a>s?(t.lowerBound.y=s,t.upperBound.y=a):(t.lowerBound.y=a,t.upperBound.y=s)},rayCast:function(t,e,i){var n,s=e.p2.x-e.p1.x,o=e.p2.y-e.p1.y;n=i.R;var a=i.position.x+(n.col1.x*this.m_v1.x+n.col2.x*this.m_v1.y),r=i.position.y+(n.col1.y*this.m_v1.x+n.col2.y*this.m_v1.y),l=i.position.y+(n.col1.y*this.m_v2.x+n.col2.y*this.m_v2.y)-r,m=-(i.position.x+(n.col1.x*this.m_v2.x+n.col2.x*this.m_v2.y)-a),c=100*Number.MIN_VALUE,_=-(s*l+o*m);if(_>c){var h=e.p1.x-a,u=e.p1.y-r,y=h*l+u*m;if(y>=0&&y<=e.maxFraction*_){var d=-s*u+o*h;if(d>=-c*_&&_*(1+c)>=d){y/=_,t.fraction=y;var p=Math.sqrt(l*l+m*m);return t.normal.x=l/p,t.normal.y=m/p,!0}}}return!1},testPoint:function(){return!1},__class__:b.collision.shapes.B2EdgeShape}),b.collision.shapes.B2MassData=function(){this.mass=0,this.center=new b.common.math.B2Vec2(0,0),this.I=0},i["box2D.collision.shapes.B2MassData"]=b.collision.shapes.B2MassData,b.collision.shapes.B2MassData.__name__=["box2D","collision","shapes","B2MassData"],b.collision.shapes.B2MassData.prototype={__class__:b.collision.shapes.B2MassData},b.collision.shapes.B2PolygonShape=function(){b.collision.shapes.B2Shape.call(this),this.m_type=b.collision.shapes.B2ShapeType.POLYGON_SHAPE,this.m_centroid=new b.common.math.B2Vec2,this.m_vertices=new Array,this.m_normals=new Array},i["box2D.collision.shapes.B2PolygonShape"]=b.collision.shapes.B2PolygonShape,b.collision.shapes.B2PolygonShape.__name__=["box2D","collision","shapes","B2PolygonShape"],b.collision.shapes.B2PolygonShape.asArray=function(t,e){var i=new b.collision.shapes.B2PolygonShape;return i.setAsArray(t,e),i},b.collision.shapes.B2PolygonShape.asVector=function(t,e){var i=new b.collision.shapes.B2PolygonShape;return i.setAsVector(t,e),i},b.collision.shapes.B2PolygonShape.asBox=function(t,e){var i=new b.collision.shapes.B2PolygonShape;return i.setAsBox(t,e),i},b.collision.shapes.B2PolygonShape.asOrientedBox=function(t,e,i,n){null==n&&(n=0);var s=new b.collision.shapes.B2PolygonShape;return s.setAsOrientedBox(t,e,i,n),s},b.collision.shapes.B2PolygonShape.asEdge=function(t,e){var i=new b.collision.shapes.B2PolygonShape;return i.setAsEdge(t,e),i},b.collision.shapes.B2PolygonShape.computeCentroid=function(t,e){for(var i=new b.common.math.B2Vec2,n=0,s=0,o=0,a=1/3,r=0;e>r;){var l=r++,m=t[l],c=e>l+1?t[l+1|0]:t[0],_=m.x-s,h=m.y-o,u=c.x-s,y=c.y-o,d=_*y-h*u,p=.5*d;n+=p,i.x+=p*a*(s+m.x+c.x),i.y+=p*a*(o+m.y+c.y)}return i.x*=1/n,i.y*=1/n,i},b.collision.shapes.B2PolygonShape.computeOBB=function(t,e,i){for(var n=new Array,s=0;i>s;){var o=s++;n[o]=e[o]}n[i]=n[0];for(var a=Number.MAX_VALUE,r=1,s=i+1;s>r;){var o=r++,l=n[o-1|0],m=n[o].x-l.x,c=n[o].y-l.y,_=Math.sqrt(m*m+c*c);m/=_,c/=_;for(var h=-c,u=m,y=Number.MAX_VALUE,d=Number.MAX_VALUE,p=-Number.MAX_VALUE,g=-Number.MAX_VALUE,f=0;i>f;){var x=f++,B=n[x].x-l.x,v=n[x].y-l.y,b=m*B+c*v,w=h*B+u*v;y>b&&(y=b),d>w&&(d=w),b>p&&(p=b),w>g&&(g=w)}var A=(p-y)*(g-d);if(.95*a>A){a=A,t.R.col1.x=m,t.R.col1.y=c,t.R.col2.x=h,t.R.col2.y=u;var S=.5*(y+p),L=.5*(d+g),M=t.R;t.center.x=l.x+(M.col1.x*S+M.col2.x*L),t.center.y=l.y+(M.col1.y*S+M.col2.y*L),t.extents.x=.5*(p-y),t.extents.y=.5*(g-d)}}},b.collision.shapes.B2PolygonShape.__super__=b.collision.shapes.B2Shape,b.collision.shapes.B2PolygonShape.prototype=t(b.collision.shapes.B2Shape.prototype,{reserve:function(t){for(var e=this.m_vertices.length;t>e;){var i=e++;this.m_vertices[i]=new b.common.math.B2Vec2,this.m_normals[i]=new b.common.math.B2Vec2}},validate:function(){return!1},getSupportVertex:function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1,s=this.m_vertexCount;s>n;){var o=n++,a=this.m_vertices[o].x*t.x+this.m_vertices[o].y*t.y;a>i&&(e=o,i=a)}return this.m_vertices[e]},getSupport:function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1,s=this.m_vertexCount;s>n;){var o=n++,a=this.m_vertices[o].x*t.x+this.m_vertices[o].y*t.y;a>i&&(e=o,i=a)}return e},getNormals:function(){return this.m_normals},getVertices:function(){return this.m_vertices},getVertexCount:function(){return this.m_vertexCount},computeSubmergedArea:function(t,e,i,n){for(var s,o=b.common.math.B2Math.mulTMV(i.R,t),a=e-b.common.math.B2Math.dot(t,i.position),r=new Array,l=0,m=-1,c=-1,_=!1,h=0,u=this.m_vertexCount;u>h;){var y=h++;r[y]=b.common.math.B2Math.dot(o,this.m_vertices[y])-a;var d=r[y]<-Number.MIN_VALUE;y>0&&(d?_||(m=y-1,l++):_&&(c=y-1,l++)),_=d}switch(l){case 0:if(_){var p=new b.collision.shapes.B2MassData;return this.computeMass(p,1),n.setV(b.common.math.B2Math.mulX(i,p.center)),p.mass}return 0;case 1:-1==m?m=this.m_vertexCount-1:c=this.m_vertexCount-1}var g,f=(m+1)%this.m_vertexCount,x=(c+1)%this.m_vertexCount,B=(0-r[m])/(r[f]-r[m]),v=(0-r[c])/(r[x]-r[c]),w=new b.common.math.B2Vec2(this.m_vertices[m].x*(1-B)+this.m_vertices[f].x*B,this.m_vertices[m].y*(1-B)+this.m_vertices[f].y*B),A=new b.common.math.B2Vec2(this.m_vertices[c].x*(1-v)+this.m_vertices[x].x*v,this.m_vertices[c].y*(1-v)+this.m_vertices[x].y*v),S=0,L=new b.common.math.B2Vec2,M=this.m_vertices[f];for(s=f;s!=x;){s=(s+1)%this.m_vertexCount,g=s==x?A:this.m_vertices[s];var C=.5*((M.x-w.x)*(g.y-w.y)-(M.y-w.y)*(g.x-w.x));S+=C,L.x+=C*(w.x+M.x+g.x)/3,L.y+=C*(w.y+M.y+g.y)/3,M=g}return L.multiply(1/S),n.setV(b.common.math.B2Math.mulX(i,L)),S},computeMass:function(t,e){if(2==this.m_vertexCount)return t.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),t.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),t.mass=0,t.I=0,void 0;for(var i=0,n=0,s=0,o=0,a=0,r=0,l=1/3,m=0,c=this.m_vertexCount;c>m;){var _=m++,h=this.m_vertices[_],u=_+1<this.m_vertexCount?this.m_vertices[_+1|0]:this.m_vertices[0],y=h.x-a,d=h.y-r,p=u.x-a,g=u.y-r,f=y*g-d*p,x=.5*f;s+=x,i+=x*l*(a+h.x+u.x),n+=x*l*(r+h.y+u.y);var B=a,v=r,b=y,w=d,A=p,S=g,L=l*(.25*(b*b+A*b+A*A)+(B*b+B*A))+.5*B*B,M=l*(.25*(w*w+S*w+S*S)+(v*w+v*S))+.5*v*v;o+=f*(L+M)}t.mass=e*s,i*=1/s,n*=1/s,t.center.set(i,n),t.I=e*o},computeAABB:function(t,e){for(var i=e.R,n=this.m_vertices[0],s=e.position.x+(i.col1.x*n.x+i.col2.x*n.y),o=e.position.y+(i.col1.y*n.x+i.col2.y*n.y),a=s,r=o,l=1,m=this.m_vertexCount;m>l;){var c=l++;n=this.m_vertices[c];var _=e.position.x+(i.col1.x*n.x+i.col2.x*n.y),h=e.position.y+(i.col1.y*n.x+i.col2.y*n.y);s=_>s?s:_,o=h>o?o:h,a=a>_?a:_,r=r>h?r:h}t.lowerBound.x=s-this.m_radius,t.lowerBound.y=o-this.m_radius,t.upperBound.x=a+this.m_radius,t.upperBound.y=r+this.m_radius},rayCast:function(t,e,i){var n,s,o,a,r=0,l=e.maxFraction;n=e.p1.x-i.position.x,s=e.p1.y-i.position.y,o=i.R;var m=n*o.col1.x+s*o.col1.y,c=n*o.col2.x+s*o.col2.y;n=e.p2.x-i.position.x,s=e.p2.y-i.position.y,o=i.R;for(var _=n*o.col1.x+s*o.col1.y,h=n*o.col2.x+s*o.col2.y,u=_-m,y=h-c,d=-1,p=0,g=this.m_vertexCount;g>p;){var f=p++;a=this.m_vertices[f],n=a.x-m,s=a.y-c,a=this.m_normals[f];var x=a.x*n+a.y*s,B=a.x*u+a.y*y;if(0==B){if(0>x)return!1}else 0>B&&r*B>x?(r=x/B,d=f):B>0&&l*B>x&&(l=x/B);if(l<r-Number.MIN_VALUE)return!1}return d>=0?(t.fraction=r,o=i.R,a=this.m_normals[d],t.normal.x=o.col1.x*a.x+o.col2.x*a.y,t.normal.y=o.col1.y*a.x+o.col2.y*a.y,!0):!1},testPoint:function(t,e){for(var i,n=t.R,s=e.x-t.position.x,o=e.y-t.position.y,a=s*n.col1.x+o*n.col1.y,r=s*n.col2.x+o*n.col2.y,l=0,m=this.m_vertexCount;m>l;){var c=l++;i=this.m_vertices[c],s=a-i.x,o=r-i.y,i=this.m_normals[c];var _=i.x*s+i.y*o;if(_>0)return!1}return!0},setAsEdge:function(t,e){this.m_vertexCount=2,this.reserve(2),this.m_vertices[0].setV(t),this.m_vertices[1].setV(e),this.m_centroid.x=.5*(t.x+e.x),this.m_centroid.y=.5*(t.y+e.y),this.m_normals[0]=b.common.math.B2Math.crossVF(b.common.math.B2Math.subtractVV(e,t),1),this.m_normals[0].normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},setAsOrientedBox:function(t,e,i,n){null==n&&(n=0),this.m_vertexCount=4,this.reserve(4),this.m_vertices[0].set(-t,-e),this.m_vertices[1].set(t,-e),this.m_vertices[2].set(t,e),this.m_vertices[3].set(-t,e),this.m_normals[0].set(0,-1),this.m_normals[1].set(1,0),this.m_normals[2].set(0,1),this.m_normals[3].set(-1,0),this.m_centroid=i;var s=new b.common.math.B2Transform;s.position=i,s.R.set(n);for(var o=0,a=this.m_vertexCount;a>o;){var r=o++;this.m_vertices[r]=b.common.math.B2Math.mulX(s,this.m_vertices[r]),this.m_normals[r]=b.common.math.B2Math.mulMV(s.R,this.m_normals[r])}},setAsBox:function(t,e){this.m_vertexCount=4,this.reserve(4),this.m_vertices[0].set(-t,-e),this.m_vertices[1].set(t,-e),this.m_vertices[2].set(t,e),this.m_vertices[3].set(-t,e),this.m_normals[0].set(0,-1),this.m_normals[1].set(1,0),this.m_normals[2].set(0,1),this.m_normals[3].set(-1,0),this.m_centroid.setZero()},setAsVector:function(t,e){null==e&&(e=0),0==e&&(e=t.length),b.common.B2Settings.b2Assert(e>=2),this.m_vertexCount=0|e,this.reserve(0|e);for(var i=0,n=this.m_vertexCount;n>i;){var s=i++;this.m_vertices[s].setV(t[s])}for(var i=0,n=this.m_vertexCount;n>i;){var s=i++,o=s,a=s+1<this.m_vertexCount?s+1:0,r=b.common.math.B2Math.subtractVV(this.m_vertices[a],this.m_vertices[o]);b.common.B2Settings.b2Assert(r.lengthSquared()>Number.MIN_VALUE),this.m_normals[s].setV(b.common.math.B2Math.crossVF(r,1)),this.m_normals[s].normalize()}this.m_centroid=b.collision.shapes.B2PolygonShape.computeCentroid(this.m_vertices,this.m_vertexCount)},setAsArray:function(t,e){null==e&&(e=0);for(var i=new Array,n=0;n<t.length;){var s=t[n];++n,i.push(s)}this.setAsVector(i,e)},set:function(t){if(b.collision.shapes.B2Shape.prototype.set.call(this,t),A.Boot.__instanceof(t,b.collision.shapes.B2PolygonShape)){var e=A.Boot.__cast(t,b.collision.shapes.B2PolygonShape);this.m_centroid.setV(e.m_centroid),this.m_vertexCount=e.m_vertexCount,this.reserve(this.m_vertexCount);for(var i=0,n=this.m_vertexCount;n>i;){var s=i++;this.m_vertices[s].setV(e.m_vertices[s]),this.m_normals[s].setV(e.m_normals[s])}}},copy:function(){var t=new b.collision.shapes.B2PolygonShape;return t.set(this),t},__class__:b.collision.shapes.B2PolygonShape}),b.collision.shapes.B2ShapeType=i["box2D.collision.shapes.B2ShapeType"]={__ename__:!0,__constructs__:["UNKNOWN_SHAPE","CIRCLE_SHAPE","POLYGON_SHAPE","EDGE_SHAPE"]},b.collision.shapes.B2ShapeType.UNKNOWN_SHAPE=["UNKNOWN_SHAPE",0],b.collision.shapes.B2ShapeType.UNKNOWN_SHAPE.toString=n,b.collision.shapes.B2ShapeType.UNKNOWN_SHAPE.__enum__=b.collision.shapes.B2ShapeType,b.collision.shapes.B2ShapeType.CIRCLE_SHAPE=["CIRCLE_SHAPE",1],b.collision.shapes.B2ShapeType.CIRCLE_SHAPE.toString=n,b.collision.shapes.B2ShapeType.CIRCLE_SHAPE.__enum__=b.collision.shapes.B2ShapeType,b.collision.shapes.B2ShapeType.POLYGON_SHAPE=["POLYGON_SHAPE",2],b.collision.shapes.B2ShapeType.POLYGON_SHAPE.toString=n,b.collision.shapes.B2ShapeType.POLYGON_SHAPE.__enum__=b.collision.shapes.B2ShapeType,b.collision.shapes.B2ShapeType.EDGE_SHAPE=["EDGE_SHAPE",3],b.collision.shapes.B2ShapeType.EDGE_SHAPE.toString=n,b.collision.shapes.B2ShapeType.EDGE_SHAPE.__enum__=b.collision.shapes.B2ShapeType,b.common.B2Color=function(t,e,i){this._r=255*b.common.math.B2Math.clamp(t,0,1)|0,this._g=255*b.common.math.B2Math.clamp(e,0,1)|0,this._b=255*b.common.math.B2Math.clamp(i,0,1)|0},i["box2D.common.B2Color"]=b.common.B2Color,b.common.B2Color.__name__=["box2D","common","B2Color"],b.common.B2Color.prototype={get_color:function(){return this._r<<16|this._g<<8|this._b},set_b:function(t){return this._b=255*b.common.math.B2Math.clamp(t,0,1)|0},set_g:function(t){return this._g=255*b.common.math.B2Math.clamp(t,0,1)|0},set_r:function(t){return this._r=255*b.common.math.B2Math.clamp(t,0,1)|0},set:function(t,e,i){this._r=255*b.common.math.B2Math.clamp(t,0,1)|0,this._g=255*b.common.math.B2Math.clamp(e,0,1)|0,this._b=255*b.common.math.B2Math.clamp(i,0,1)|0},__class__:b.common.B2Color,__properties__:{set_r:"set_r",set_g:"set_g",set_b:"set_b",get_color:"get_color"}},b.common.B2Settings=function(){},i["box2D.common.B2Settings"]=b.common.B2Settings,b.common.B2Settings.__name__=["box2D","common","B2Settings"],b.common.B2Settings.b2MixFriction=function(t,e){return Math.sqrt(t*e)},b.common.B2Settings.b2MixRestitution=function(t,e){return t>e?t:e},b.common.B2Settings.b2Assert=function(t){if(!t)throw"Assertion Failed"},b.common.math.B2Mat33=function(t,e,i){this.col1=new b.common.math.B2Vec3,this.col2=new b.common.math.B2Vec3,this.col3=new b.common.math.B2Vec3,null==t&&null==e&&null==i?(this.col1.setZero(),this.col2.setZero(),this.col3.setZero()):(this.col1.setV(t),this.col2.setV(e),this.col3.setV(i))},i["box2D.common.math.B2Mat33"]=b.common.math.B2Mat33,b.common.math.B2Mat33.__name__=["box2D","common","math","B2Mat33"],b.common.math.B2Mat33.prototype={solve33:function(t,e,i,n){var s=this.col1.x,o=this.col1.y,a=this.col1.z,r=this.col2.x,l=this.col2.y,m=this.col2.z,c=this.col3.x,_=this.col3.y,h=this.col3.z,u=s*(l*h-m*_)+o*(m*c-r*h)+a*(r*_-l*c);return 0!=u&&(u=1/u),t.x=u*(e*(l*h-m*_)+i*(m*c-r*h)+n*(r*_-l*c)),t.y=u*(s*(i*h-n*_)+o*(n*c-e*h)+a*(e*_-i*c)),t.z=u*(s*(l*n-m*i)+o*(m*e-r*n)+a*(r*i-l*e)),t},solve22:function(t,e,i){var n=this.col1.x,s=this.col2.x,o=this.col1.y,a=this.col2.y,r=n*a-s*o;return 0!=r&&(r=1/r),t.x=r*(a*e-s*i),t.y=r*(n*i-o*e),t},setZero:function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},setIdentity:function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},addM:function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col1.z+=t.col1.z,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y,this.col2.z+=t.col2.z,this.col3.x+=t.col3.x,this.col3.y+=t.col3.y,this.col3.z+=t.col3.z},setM:function(t){this.col1.setV(t.col1),this.col2.setV(t.col2),this.col3.setV(t.col3)},copy:function(){return new b.common.math.B2Mat33(this.col1,this.col2,this.col3)},setVVV:function(t,e,i){this.col1.setV(t),this.col2.setV(e),this.col3.setV(i)},__class__:b.common.math.B2Mat33},b.common.math.B2Math=function(){},i["box2D.common.math.B2Math"]=b.common.math.B2Math,b.common.math.B2Math.__name__=["box2D","common","math","B2Math"],b.common.math.B2Math.__properties__={get_MAX_VALUE:"get_MAX_VALUE",get_MIN_VALUE:"get_MIN_VALUE"},b.common.math.B2Math.isValid=function(t){return Math.isNaN(t)||t==Math.NEGATIVE_INFINITY||t==Math.POSITIVE_INFINITY?!1:!0},b.common.math.B2Math.dot=function(t,e){return t.x*e.x+t.y*e.y},b.common.math.B2Math.crossVV=function(t,e){return t.x*e.y-t.y*e.x},b.common.math.B2Math.crossVF=function(t,e){var i=new b.common.math.B2Vec2(e*t.y,-e*t.x);return i},b.common.math.B2Math.crossFV=function(t,e){var i=new b.common.math.B2Vec2(-t*e.y,t*e.x);return i},b.common.math.B2Math.mulMV=function(t,e){var i=new b.common.math.B2Vec2(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y);return i},b.common.math.B2Math.mulTMV=function(t,e){var i=new b.common.math.B2Vec2(b.common.math.B2Math.dot(e,t.col1),b.common.math.B2Math.dot(e,t.col2));return i},b.common.math.B2Math.mulX=function(t,e){var i=b.common.math.B2Math.mulMV(t.R,e);return i.x+=t.position.x,i.y+=t.position.y,i},b.common.math.B2Math.mulXT=function(t,e){var i=b.common.math.B2Math.subtractVV(e,t.position),n=i.x*t.R.col1.x+i.y*t.R.col1.y;return i.y=i.x*t.R.col2.x+i.y*t.R.col2.y,i.x=n,i},b.common.math.B2Math.addVV=function(t,e){var i=new b.common.math.B2Vec2(t.x+e.x,t.y+e.y);return i},b.common.math.B2Math.subtractVV=function(t,e){var i=new b.common.math.B2Vec2(t.x-e.x,t.y-e.y);return i},b.common.math.B2Math.distance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},b.common.math.B2Math.distanceSquared=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},b.common.math.B2Math.mulFV=function(t,e){var i=new b.common.math.B2Vec2(t*e.x,t*e.y);return i},b.common.math.B2Math.addMM=function(t,e){var i=b.common.math.B2Mat22.fromVV(b.common.math.B2Math.addVV(t.col1,e.col1),b.common.math.B2Math.addVV(t.col2,e.col2));return i},b.common.math.B2Math.mulMM=function(t,e){var i=b.common.math.B2Mat22.fromVV(b.common.math.B2Math.mulMV(t,e.col1),b.common.math.B2Math.mulMV(t,e.col2));return i},b.common.math.B2Math.mulTMM=function(t,e){var i=new b.common.math.B2Vec2(b.common.math.B2Math.dot(t.col1,e.col1),b.common.math.B2Math.dot(t.col2,e.col1)),n=new b.common.math.B2Vec2(b.common.math.B2Math.dot(t.col1,e.col2),b.common.math.B2Math.dot(t.col2,e.col2)),s=b.common.math.B2Mat22.fromVV(i,n);return s},b.common.math.B2Math.abs=function(t){return t>0?t:-t},b.common.math.B2Math.absV=function(t){var e=new b.common.math.B2Vec2(b.common.math.B2Math.abs(t.x),b.common.math.B2Math.abs(t.y));return e},b.common.math.B2Math.absM=function(t){var e=b.common.math.B2Mat22.fromVV(b.common.math.B2Math.absV(t.col1),b.common.math.B2Math.absV(t.col2));return e},b.common.math.B2Math.min=function(t,e){return e>t?t:e},b.common.math.B2Math.minV=function(t,e){var i=new b.common.math.B2Vec2(b.common.math.B2Math.min(t.x,e.x),b.common.math.B2Math.min(t.y,e.y));return i},b.common.math.B2Math.max=function(t,e){return t>e?t:e},b.common.math.B2Math.maxV=function(t,e){var i=new b.common.math.B2Vec2(b.common.math.B2Math.max(t.x,e.x),b.common.math.B2Math.max(t.y,e.y));return i},b.common.math.B2Math.clamp=function(t,e,i){return e>t?e:t>i?i:t},b.common.math.B2Math.clampV=function(t,e,i){return b.common.math.B2Math.maxV(e,b.common.math.B2Math.minV(t,i))},b.common.math.B2Math.swap=function(t,e){var i=t[0];t[0]=e[0],e[0]=i},b.common.math.B2Math.random=function(){return 2*Math.random()-1},b.common.math.B2Math.randomRange=function(t,e){var i=Math.random();return i=(e-t)*i+t},b.common.math.B2Math.nextPowerOfTwo=function(t){return t|=t>>1&2147483647,t|=t>>2&1073741823,t|=t>>4&268435455,t|=t>>8&16777215,t|=t>>16&65535,t+1},b.common.math.B2Math.isPowerOfTwo=function(t){var e=t>0&&0==(t&t-1);return e},b.common.math.B2Math.get_MIN_VALUE=function(){return Number.MIN_VALUE},b.common.math.B2Math.get_MAX_VALUE=function(){return Number.MAX_VALUE},b.common.math.B2Sweep=function(){this.localCenter=new b.common.math.B2Vec2,this.c0=new b.common.math.B2Vec2,this.c=new b.common.math.B2Vec2},i["box2D.common.math.B2Sweep"]=b.common.math.B2Sweep,b.common.math.B2Sweep.__name__=["box2D","common","math","B2Sweep"],b.common.math.B2Sweep.prototype={advance:function(t){if(this.t0<t&&1-this.t0>Number.MIN_VALUE){var e=(t-this.t0)/(1-this.t0);this.c0.x=(1-e)*this.c0.x+e*this.c.x,this.c0.y=(1-e)*this.c0.y+e*this.c.y,this.a0=(1-e)*this.a0+e*this.a,this.t0=t}},getTransform:function(t,e){t.position.x=(1-e)*this.c0.x+e*this.c.x,t.position.y=(1-e)*this.c0.y+e*this.c.y;var i=(1-e)*this.a0+e*this.a;t.R.set(i);var n=t.R;t.position.x-=n.col1.x*this.localCenter.x+n.col2.x*this.localCenter.y,t.position.y-=n.col1.y*this.localCenter.x+n.col2.y*this.localCenter.y},copy:function(){var t=new b.common.math.B2Sweep;
return t.localCenter.setV(this.localCenter),t.c0.setV(this.c0),t.c.setV(this.c),t.a0=this.a0,t.a=this.a,t.t0=this.t0,t},set:function(t){this.localCenter.setV(t.localCenter),this.c0.setV(t.c0),this.c.setV(t.c),this.a0=t.a0,this.a=t.a,this.t0=t.t0},__class__:b.common.math.B2Sweep},b.common.math.B2Vec3=function(t,e,i){null==i&&(i=0),null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e,this.z=i},i["box2D.common.math.B2Vec3"]=b.common.math.B2Vec3,b.common.math.B2Vec3.__name__=["box2D","common","math","B2Vec3"],b.common.math.B2Vec3.prototype={multiply:function(t){this.x*=t,this.y*=t,this.z*=t},subtract:function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},add:function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},copy:function(){return new b.common.math.B2Vec3(this.x,this.y,this.z)},negativeSelf:function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},getNegative:function(){return new b.common.math.B2Vec3(-this.x,-this.y,-this.z)},setV:function(t){this.x=t.x,this.y=t.y,this.z=t.z},set:function(t,e,i){this.x=t,this.y=e,this.z=i},setZero:function(){this.x=this.y=this.z=0},__class__:b.common.math.B2Vec3},b.dynamics={},b.dynamics.B2Body=function(t,e){this.m_xf=new b.common.math.B2Transform,this.m_sweep=new b.common.math.B2Sweep,this.m_linearVelocity=new b.common.math.B2Vec2,this.m_force=new b.common.math.B2Vec2,this.m_flags=0,t.bullet&&(this.m_flags|=b.dynamics.B2Body.e_bulletFlag),t.fixedRotation&&(this.m_flags|=b.dynamics.B2Body.e_fixedRotationFlag),t.allowSleep&&(this.m_flags|=b.dynamics.B2Body.e_allowSleepFlag),t.awake&&(this.m_flags|=b.dynamics.B2Body.e_awakeFlag),t.active&&(this.m_flags|=b.dynamics.B2Body.e_activeFlag),this.m_world=e,this.m_xf.position.setV(t.position),this.m_xf.R.set(t.angle),this.m_sweep.localCenter.setZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=t.angle;var i=this.m_xf.R,n=this.m_sweep.localCenter;this.m_sweep.c.x=i.col1.x*n.x+i.col2.x*n.y,this.m_sweep.c.y=i.col1.y*n.x+i.col2.y*n.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.setV(this.m_sweep.c),this.m_jointList=null,this.m_controllerList=null,this.m_contactList=null,this.m_controllerCount=0,this.m_prev=null,this.m_next=null,this.m_linearVelocity.setV(t.linearVelocity),this.m_angularVelocity=t.angularVelocity,this.m_linearDamping=t.linearDamping,this.m_angularDamping=t.angularDamping,this.m_force.set(0,0),this.m_torque=0,this.m_sleepTime=0,this.m_type=t.type,this.m_type==b.dynamics.B2Body.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_inertiaScale=t.inertiaScale,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0},i["box2D.dynamics.B2Body"]=b.dynamics.B2Body,b.dynamics.B2Body.__name__=["box2D","dynamics","B2Body"],b.dynamics.B2Body.prototype={advance:function(t){this.m_sweep.advance(t),this.m_sweep.c.setV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.synchronizeTransform()},shouldCollide:function(t){if(this.m_type!=b.dynamics.B2Body.b2_dynamicBody&&t.m_type!=b.dynamics.B2Body.b2_dynamicBody)return!1;for(var e=this.m_jointList;null!=e;){if(e.other==t&&0==e.joint.m_collideConnected)return!1;e=e.next}return!0},synchronizeTransform:function(){this.m_xf.R.set(this.m_sweep.a);var t=this.m_xf.R,e=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(t.col1.x*e.x+t.col2.x*e.y),this.m_xf.position.y=this.m_sweep.c.y-(t.col1.y*e.x+t.col2.y*e.y)},synchronizeFixtures:function(){var t=b.dynamics.B2Body.s_xf1;t.R.set(this.m_sweep.a0);var e=t.R,i=this.m_sweep.localCenter;t.position.x=this.m_sweep.c0.x-(e.col1.x*i.x+e.col2.x*i.y),t.position.y=this.m_sweep.c0.y-(e.col1.y*i.x+e.col2.y*i.y);var n,s=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;null!=n;)n.synchronize(s,t,this.m_xf),n=n.m_next},getWorld:function(){return this.m_world},setUserData:function(t){this.m_userData=t},getUserData:function(){return this.m_userData},getNext:function(){return this.m_next},getContactList:function(){return this.m_contactList},getControllerList:function(){return this.m_controllerList},getJointList:function(){return this.m_jointList},getFixtureList:function(){return this.m_fixtureList},isSleepingAllowed:function(){return(this.m_flags&b.dynamics.B2Body.e_allowSleepFlag)==b.dynamics.B2Body.e_allowSleepFlag},isActive:function(){return(this.m_flags&b.dynamics.B2Body.e_activeFlag)==b.dynamics.B2Body.e_activeFlag},setActive:function(t){if(t!=this.isActive()){var e,i;if(t)for(this.m_flags|=b.dynamics.B2Body.e_activeFlag,e=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;null!=i;)i.createProxy(e,this.m_xf),i=i.m_next;else{for(this.m_flags&=~b.dynamics.B2Body.e_activeFlag,e=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;null!=i;)i.destroyProxy(e),i=i.m_next;for(var n=this.m_contactList;null!=n;){var s=n;n=n.next,this.m_world.m_contactManager.destroy(s.contact)}this.m_contactList=null}}},isFixedRotation:function(){return(this.m_flags&b.dynamics.B2Body.e_fixedRotationFlag)==b.dynamics.B2Body.e_fixedRotationFlag},setFixedRotation:function(t){t?this.m_flags|=b.dynamics.B2Body.e_fixedRotationFlag:this.m_flags&=~b.dynamics.B2Body.e_fixedRotationFlag,this.resetMassData()},isAwake:function(){return(this.m_flags&b.dynamics.B2Body.e_awakeFlag)==b.dynamics.B2Body.e_awakeFlag},setAwake:function(t){t?(this.m_flags|=b.dynamics.B2Body.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~b.dynamics.B2Body.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},setSleepingAllowed:function(t){t?this.m_flags|=b.dynamics.B2Body.e_allowSleepFlag:(this.m_flags&=~b.dynamics.B2Body.e_allowSleepFlag,this.setAwake(!0))},isBullet:function(){return(this.m_flags&b.dynamics.B2Body.e_bulletFlag)==b.dynamics.B2Body.e_bulletFlag},setBullet:function(t){t?this.m_flags|=b.dynamics.B2Body.e_bulletFlag:this.m_flags&=~b.dynamics.B2Body.e_bulletFlag},getType:function(){return this.m_type},setType:function(t){if(this.m_type!=t){this.m_type=t,this.resetMassData(),this.m_type==b.dynamics.B2Body.b2_staticBody&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var e=this.m_contactList;null!=e;)e.contact.flagForFiltering(),e=e.next}},setAngularDamping:function(t){this.m_angularDamping=t},getAngularDamping:function(){return this.m_angularDamping},setLinearDamping:function(t){this.m_linearDamping=t},getLinearDamping:function(){return this.m_linearDamping},getLinearVelocityFromLocalPoint:function(t){var e=this.m_xf.R,i=new b.common.math.B2Vec2(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return i.x+=this.m_xf.position.x,i.y+=this.m_xf.position.y,new b.common.math.B2Vec2(this.m_linearVelocity.x-this.m_angularVelocity*(i.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(i.x-this.m_sweep.c.x))},getLinearVelocityFromWorldPoint:function(t){return new b.common.math.B2Vec2(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},getLocalVector:function(t){return b.common.math.B2Math.mulTMV(this.m_xf.R,t)},getLocalPoint:function(t){return b.common.math.B2Math.mulXT(this.m_xf,t)},getWorldVector:function(t){return b.common.math.B2Math.mulMV(this.m_xf.R,t)},getWorldPoint:function(t){var e=this.m_xf.R,i=new b.common.math.B2Vec2(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return i.x+=this.m_xf.position.x,i.y+=this.m_xf.position.y,i},resetMassData:function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.setZero(),this.m_type!=b.dynamics.B2Body.b2_staticBody&&this.m_type!=b.dynamics.B2Body.b2_kinematicBody){for(var t=b.common.math.B2Vec2.make(0,0),e=this.m_fixtureList;null!=e;)if(0!=e.m_density){var i=e.getMassData();this.m_mass+=i.mass,t.x+=i.center.x*i.mass,t.y+=i.center.y*i.mass,this.m_I+=i.I,e=e.m_next}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.x*=this.m_invMass,t.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==(this.m_flags&b.dynamics.B2Body.e_fixedRotationFlag)?(this.m_I-=this.m_mass*(t.x*t.x+t.y*t.y),this.m_I*=this.m_inertiaScale,b.common.B2Settings.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var n=this.m_sweep.c.copy();this.m_sweep.localCenter.setV(t),this.m_sweep.c0.setV(b.common.math.B2Math.mulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.setV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-n.y),this.m_linearVelocity.y+=this.m_angularVelocity*(this.m_sweep.c.x-n.x)}},setMassData:function(t){if(b.common.B2Settings.b2Assert(0==this.m_world.isLocked()),1!=this.m_world.isLocked()&&this.m_type==b.dynamics.B2Body.b2_dynamicBody){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==(this.m_flags&b.dynamics.B2Body.e_fixedRotationFlag)&&(this.m_I=t.I-this.m_mass*(t.center.x*t.center.x+t.center.y*t.center.y),this.m_invI=1/this.m_I);var e=this.m_sweep.c.copy();this.m_sweep.localCenter.setV(t.center),this.m_sweep.c0.setV(b.common.math.B2Math.mulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.setV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-e.y),this.m_linearVelocity.y+=this.m_angularVelocity*(this.m_sweep.c.x-e.x)}},getMassData:function(t){t.mass=this.m_mass,t.I=this.m_I,t.center.setV(this.m_sweep.localCenter)},getInertia:function(){return this.m_I},getMass:function(){return this.m_mass},merge:function(t){var e;e=t.m_fixtureList;for(var i=this,n=t;null!=e;){var s=e.m_next;t.m_fixtureCount--,e.m_next=this.m_fixtureList,this.m_fixtureList=e,this.m_fixtureCount++,e.m_body=n,e=s}i.m_fixtureCount=0;i.getWorldCenter(),n.getWorldCenter(),i.getLinearVelocity().copy(),n.getLinearVelocity().copy(),i.getAngularVelocity(),n.getAngularVelocity();i.resetMassData(),this.synchronizeFixtures()},split:function(t){for(var e=this.getLinearVelocity().copy(),i=this.getAngularVelocity(),n=this.getWorldCenter(),s=this,o=this.m_world.createBody(this.getDefinition()),a=null,r=s.m_fixtureList;null!=r;)if(t(r)){var l=r.m_next;null!=a?a.m_next=l:s.m_fixtureList=l,s.m_fixtureCount--,r.m_next=o.m_fixtureList,o.m_fixtureList=r,o.m_fixtureCount++,r.m_body=o,r=l}else a=r,r=r.m_next;s.resetMassData(),o.resetMassData();var m=s.getWorldCenter(),c=o.getWorldCenter(),_=b.common.math.B2Math.addVV(e,b.common.math.B2Math.crossFV(i,b.common.math.B2Math.subtractVV(m,n))),h=b.common.math.B2Math.addVV(e,b.common.math.B2Math.crossFV(i,b.common.math.B2Math.subtractVV(c,n)));return s.setLinearVelocity(_),o.setLinearVelocity(h),s.setAngularVelocity(i),o.setAngularVelocity(i),s.synchronizeFixtures(),o.synchronizeFixtures(),o},applyImpulse:function(t,e){this.m_type==b.dynamics.B2Body.b2_dynamicBody&&(0==this.isAwake()&&this.setAwake(!0),this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))},applyTorque:function(t){this.m_type==b.dynamics.B2Body.b2_dynamicBody&&(0==this.isAwake()&&this.setAwake(!0),this.m_torque+=t)},applyForce:function(t,e){this.m_type==b.dynamics.B2Body.b2_dynamicBody&&(0==this.isAwake()&&this.setAwake(!0),this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)},getDefinition:function(){var t=new b.dynamics.B2BodyDef;return t.type=this.getType(),t.allowSleep=(this.m_flags&b.dynamics.B2Body.e_allowSleepFlag)==b.dynamics.B2Body.e_allowSleepFlag,t.angle=this.getAngle(),t.angularDamping=this.m_angularDamping,t.angularVelocity=this.m_angularVelocity,t.fixedRotation=(this.m_flags&b.dynamics.B2Body.e_fixedRotationFlag)==b.dynamics.B2Body.e_fixedRotationFlag,t.bullet=(this.m_flags&b.dynamics.B2Body.e_bulletFlag)==b.dynamics.B2Body.e_bulletFlag,t.awake=(this.m_flags&b.dynamics.B2Body.e_awakeFlag)==b.dynamics.B2Body.e_awakeFlag,t.linearDamping=this.m_linearDamping,t.linearVelocity.setV(this.getLinearVelocity()),t.position=this.getPosition(),t.userData=this.getUserData(),t},getAngularVelocity:function(){return this.m_angularVelocity},setAngularVelocity:function(t){this.m_type!=b.dynamics.B2Body.b2_staticBody&&(this.m_angularVelocity=t)},getLinearVelocity:function(){return this.m_linearVelocity},setLinearVelocity:function(t){this.m_type!=b.dynamics.B2Body.b2_staticBody&&this.m_linearVelocity.setV(t)},getLocalCenter:function(){return this.m_sweep.localCenter},getWorldCenter:function(){return this.m_sweep.c},setAngle:function(t){this.setPositionAndAngle(this.getPosition(),t)},getAngle:function(){return this.m_sweep.a},setPosition:function(t){this.setPositionAndAngle(t,this.getAngle())},getPosition:function(){return this.m_xf.position},getTransform:function(){return this.m_xf},setTransform:function(t){this.setPositionAndAngle(t.position,t.getAngle())},setPositionAndAngle:function(t,e){var i;if(1!=this.m_world.isLocked()){this.m_xf.R.set(e),this.m_xf.position.setV(t);var n=this.m_xf.R,s=this.m_sweep.localCenter;this.m_sweep.c.x=n.col1.x*s.x+n.col2.x*s.y,this.m_sweep.c.y=n.col1.y*s.x+n.col2.y*s.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.setV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=e;var o=this.m_world.m_contactManager.m_broadPhase;for(i=this.m_fixtureList;null!=i;)i.synchronize(o,this.m_xf,this.m_xf),i=i.m_next;this.m_world.m_contactManager.findNewContacts()}},DestroyFixture:function(t){if(1!=this.m_world.isLocked()){for(var e=this.m_fixtureList,i=null,n=!1;null!=e;){if(e==t){null!=i?i.m_next=t.m_next:this.m_fixtureList=t.m_next,n=!0;break}i=e,e=e.m_next}for(var s=this.m_contactList;null!=s;){var o=s.contact;s=s.next;var a=o.getFixtureA(),r=o.getFixtureB();(t==a||t==r)&&this.m_world.m_contactManager.destroy(o)}if(0!=(this.m_flags&b.dynamics.B2Body.e_activeFlag)){var l=this.m_world.m_contactManager.m_broadPhase;t.destroyProxy(l)}t.destroy(),t.m_body=null,t.m_next=null,--this.m_fixtureCount,this.resetMassData()}},createFixture2:function(t,e){null==e&&(e=0);var i=new b.dynamics.B2FixtureDef;return i.shape=t,i.density=e,this.createFixture(i)},createFixture:function(t){if(1==this.m_world.isLocked())return null;var e=new b.dynamics.B2Fixture;if(e.create(this,this.m_xf,t),0!=(this.m_flags&b.dynamics.B2Body.e_activeFlag)){var i=this.m_world.m_contactManager.m_broadPhase;e.createProxy(i,this.m_xf)}return e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_body=this,e.m_density>0&&this.resetMassData(),this.m_world.m_flags|=b.dynamics.B2World.e_newFixture,e},connectEdges:function(t,e,i){var n=Math.atan2(e.getDirectionVector().y,e.getDirectionVector().x),s=Math.tan(.5*(n-i)),o=b.common.math.B2Math.mulFV(s,e.getDirectionVector());o=b.common.math.B2Math.subtractVV(o,e.getNormalVector()),o=b.common.math.B2Math.mulFV(b.common.B2Settings.b2_toiSlop,o),o=b.common.math.B2Math.addVV(o,e.getVertex1());var a=b.common.math.B2Math.addVV(t.getDirectionVector(),e.getDirectionVector());a.normalize();var r=b.common.math.B2Math.dot(t.getDirectionVector(),e.getNormalVector())>0;return t.setNextEdge(e,o,a,r),e.setPrevEdge(t,o,a,r),n},__class__:b.dynamics.B2Body},b.dynamics.B2BodyDef=function(){this.position=new b.common.math.B2Vec2,this.linearVelocity=new b.common.math.B2Vec2,this.userData=null,this.angle=0,this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.type=b.dynamics.B2Body.b2_staticBody,this.active=!0,this.inertiaScale=1},i["box2D.dynamics.B2BodyDef"]=b.dynamics.B2BodyDef,b.dynamics.B2BodyDef.__name__=["box2D","dynamics","B2BodyDef"],b.dynamics.B2BodyDef.prototype={__class__:b.dynamics.B2BodyDef},b.dynamics.B2ContactFilter=function(){},i["box2D.dynamics.B2ContactFilter"]=b.dynamics.B2ContactFilter,b.dynamics.B2ContactFilter.__name__=["box2D","dynamics","B2ContactFilter"],b.dynamics.B2ContactFilter.prototype={rayCollide:function(t,e){return null==t?!0:this.shouldCollide(A.Boot.__cast(t,b.dynamics.B2Fixture),e)},shouldCollide:function(t,e){var i=t.getFilterData(),n=e.getFilterData();if(i.groupIndex==n.groupIndex&&0!=i.groupIndex)return i.groupIndex>0;var s=0!=(i.maskBits&n.categoryBits)&&0!=(i.categoryBits&n.maskBits);return s},__class__:b.dynamics.B2ContactFilter},b.dynamics.B2ContactImpulse=function(){this.normalImpulses=new Array,this.tangentImpulses=new Array},i["box2D.dynamics.B2ContactImpulse"]=b.dynamics.B2ContactImpulse,b.dynamics.B2ContactImpulse.__name__=["box2D","dynamics","B2ContactImpulse"],b.dynamics.B2ContactImpulse.prototype={__class__:b.dynamics.B2ContactImpulse},b.dynamics.B2ContactListener=function(){},i["box2D.dynamics.B2ContactListener"]=b.dynamics.B2ContactListener,b.dynamics.B2ContactListener.__name__=["box2D","dynamics","B2ContactListener"],b.dynamics.B2ContactListener.prototype={postSolve:function(){},preSolve:function(){},endContact:function(){},beginContact:function(){},__class__:b.dynamics.B2ContactListener},b.dynamics.B2ContactManager=function(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=b.dynamics.B2ContactFilter.b2_defaultFilter,this.m_contactListener=b.dynamics.B2ContactListener.b2_defaultListener,this.m_contactFactory=new b.dynamics.contacts.B2ContactFactory(this.m_allocator),this.m_broadPhase=new b.collision.B2DynamicTreeBroadPhase},i["box2D.dynamics.B2ContactManager"]=b.dynamics.B2ContactManager,b.dynamics.B2ContactManager.__name__=["box2D","dynamics","B2ContactManager"],b.dynamics.B2ContactManager.prototype={collide:function(){for(var t=this.m_world.m_contactList;null!=t;){var e=t.getFixtureA(),i=t.getFixtureB(),n=e.getBody(),s=i.getBody();if(0!=n.isAwake()||0!=s.isAwake()){if(0!=(t.m_flags&b.dynamics.contacts.B2Contact.e_filterFlag)){if(0==s.shouldCollide(n)){var o=t;t=o.getNext(),this.destroy(o);continue}if(0==this.m_contactFilter.shouldCollide(e,i)){var o=t;t=o.getNext(),this.destroy(o);continue}t.m_flags&=~b.dynamics.contacts.B2Contact.e_filterFlag}var a=e.m_proxy,r=i.m_proxy,l=this.m_broadPhase.testOverlap(a,r);if(0!=l)t.update(this.m_contactListener),t=t.getNext();else{var o=t;t=o.getNext(),this.destroy(o)}}else t=t.getNext()}},destroy:function(t){var e=t.getFixtureA(),i=t.getFixtureB(),n=e.getBody(),s=i.getBody();t.isTouching()&&this.m_contactListener.endContact(t),null!=t.m_prev&&(t.m_prev.m_next=t.m_next),null!=t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_world.m_contactList&&(this.m_world.m_contactList=t.m_next),null!=t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),null!=t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==n.m_contactList&&(n.m_contactList=t.m_nodeA.next),null!=t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),null!=t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==s.m_contactList&&(s.m_contactList=t.m_nodeB.next),this.m_contactFactory.destroy(t),--this.m_contactCount},findNewContacts:function(){this.m_broadPhase.updatePairs(e(this,this.addPair))},addPair:function(t,e){var i=A.Boot.__cast(t,b.dynamics.B2Fixture),n=A.Boot.__cast(e,b.dynamics.B2Fixture),s=i.getBody(),o=n.getBody();if(s!=o){for(var a=o.getContactList();null!=a;){if(a.other==s){var r=a.contact.getFixtureA(),l=a.contact.getFixtureB();if(r==i&&l==n)return;if(r==n&&l==i)return}a=a.next}if(0!=o.shouldCollide(s)&&0!=this.m_contactFilter.shouldCollide(i,n)){var m=this.m_contactFactory.create(i,n);i=m.getFixtureA(),n=m.getFixtureB(),s=i.m_body,o=n.m_body,m.m_prev=null,m.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=m),this.m_world.m_contactList=m,m.m_nodeA.contact=m,m.m_nodeA.other=o,m.m_nodeA.prev=null,m.m_nodeA.next=s.m_contactList,null!=s.m_contactList&&(s.m_contactList.prev=m.m_nodeA),s.m_contactList=m.m_nodeA,m.m_nodeB.contact=m,m.m_nodeB.other=s,m.m_nodeB.prev=null,m.m_nodeB.next=o.m_contactList,null!=o.m_contactList&&(o.m_contactList.prev=m.m_nodeB),o.m_contactList=m.m_nodeB,++this.m_world.m_contactCount}}},__class__:b.dynamics.B2ContactManager},b.dynamics.B2DebugDraw=function(){this.m_drawScale=1,this.m_lineThickness=1,this.m_alpha=1,this.m_fillAlpha=1,this.m_xformScale=1,this.m_drawFlags=0},i["box2D.dynamics.B2DebugDraw"]=b.dynamics.B2DebugDraw,b.dynamics.B2DebugDraw.__name__=["box2D","dynamics","B2DebugDraw"],b.dynamics.B2DebugDraw.prototype={drawTransform:function(t){this.m_sprite.get_graphics().lineStyle(this.m_lineThickness,16711680,this.m_alpha),this.m_sprite.get_graphics().moveTo(t.position.x*this.m_drawScale,t.position.y*this.m_drawScale),this.m_sprite.get_graphics().lineTo((t.position.x+this.m_xformScale*t.R.col1.x)*this.m_drawScale,(t.position.y+this.m_xformScale*t.R.col1.y)*this.m_drawScale),this.m_sprite.get_graphics().lineStyle(this.m_lineThickness,65280,this.m_alpha),this.m_sprite.get_graphics().moveTo(t.position.x*this.m_drawScale,t.position.y*this.m_drawScale),this.m_sprite.get_graphics().lineTo((t.position.x+this.m_xformScale*t.R.col2.x)*this.m_drawScale,(t.position.y+this.m_xformScale*t.R.col2.y)*this.m_drawScale)},drawSegment:function(t,e,i){this.m_sprite.get_graphics().lineStyle(this.m_lineThickness,i.get_color(),this.m_alpha),this.m_sprite.get_graphics().moveTo(t.x*this.m_drawScale,t.y*this.m_drawScale),this.m_sprite.get_graphics().lineTo(e.x*this.m_drawScale,e.y*this.m_drawScale)},drawSolidCircle:function(t,e,i,n){this.m_sprite.get_graphics().lineStyle(this.m_lineThickness,n.get_color(),this.m_alpha),this.m_sprite.get_graphics().moveTo(0,0),this.m_sprite.get_graphics().beginFill(n.get_color(),this.m_fillAlpha),this.m_sprite.get_graphics().drawCircle(t.x*this.m_drawScale,t.y*this.m_drawScale,e*this.m_drawScale),this.m_sprite.get_graphics().endFill(),this.m_sprite.get_graphics().moveTo(t.x*this.m_drawScale,t.y*this.m_drawScale),this.m_sprite.get_graphics().lineTo((t.x+i.x*e)*this.m_drawScale,(t.y+i.y*e)*this.m_drawScale)},drawCircle:function(t,e,i){this.m_sprite.get_graphics().lineStyle(this.m_lineThickness,i.get_color(),this.m_alpha),this.m_sprite.get_graphics().drawCircle(t.x*this.m_drawScale,t.y*this.m_drawScale,e*this.m_drawScale)},drawSolidPolygon:function(t,e,i){this.m_sprite.get_graphics().lineStyle(this.m_lineThickness,i.get_color(),this.m_alpha),this.m_sprite.get_graphics().moveTo(t[0].x*this.m_drawScale,t[0].y*this.m_drawScale),this.m_sprite.get_graphics().beginFill(i.get_color(),this.m_fillAlpha);for(var n=1;e>n;){var s=n++;this.m_sprite.get_graphics().lineTo(t[s].x*this.m_drawScale,t[s].y*this.m_drawScale)}this.m_sprite.get_graphics().lineTo(t[0].x*this.m_drawScale,t[0].y*this.m_drawScale),this.m_sprite.get_graphics().endFill()},drawPolygon:function(t,e,i){this.m_sprite.get_graphics().lineStyle(this.m_lineThickness,i.get_color(),this.m_alpha),this.m_sprite.get_graphics().moveTo(t[0].x*this.m_drawScale,t[0].y*this.m_drawScale);for(var n=1;e>n;){var s=n++;this.m_sprite.get_graphics().lineTo(t[s].x*this.m_drawScale,t[s].y*this.m_drawScale)}this.m_sprite.get_graphics().lineTo(t[0].x*this.m_drawScale,t[0].y*this.m_drawScale)},getXFormScale:function(){return this.m_xformScale},setXFormScale:function(t){this.m_xformScale=t},getFillAlpha:function(){return this.m_fillAlpha},setFillAlpha:function(t){this.m_fillAlpha=t},getAlpha:function(){return this.m_alpha},setAlpha:function(t){this.m_alpha=t},getLineThickness:function(){return this.m_lineThickness},setLineThickness:function(t){this.m_lineThickness=t},getDrawScale:function(){return this.m_drawScale},setDrawScale:function(t){this.m_drawScale=t},getSprite:function(){return this.m_sprite},setSprite:function(t){this.m_sprite=t},clearFlags:function(t){this.m_drawFlags&=~t},appendFlags:function(t){this.m_drawFlags|=t},getFlags:function(){return this.m_drawFlags},setFlags:function(t){this.m_drawFlags=t},__class__:b.dynamics.B2DebugDraw},b.dynamics.B2DestructionListener=function(){},i["box2D.dynamics.B2DestructionListener"]=b.dynamics.B2DestructionListener,b.dynamics.B2DestructionListener.__name__=["box2D","dynamics","B2DestructionListener"],b.dynamics.B2DestructionListener.prototype={sayGoodbyeFixture:function(){},sayGoodbyeJoint:function(){},__class__:b.dynamics.B2DestructionListener},b.dynamics.B2FilterData=function(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0},i["box2D.dynamics.B2FilterData"]=b.dynamics.B2FilterData,b.dynamics.B2FilterData.__name__=["box2D","dynamics","B2FilterData"],b.dynamics.B2FilterData.prototype={copy:function(){var t=new b.dynamics.B2FilterData;return t.categoryBits=this.categoryBits,t.maskBits=this.maskBits,t.groupIndex=this.groupIndex,t},__class__:b.dynamics.B2FilterData},b.dynamics.B2Fixture=function(){this.m_filter=new b.dynamics.B2FilterData,this.m_aabb=new b.collision.B2AABB,this.m_userData=null,this.m_body=null,this.m_next=null,this.m_shape=null,this.m_density=0,this.m_friction=0,this.m_restitution=0},i["box2D.dynamics.B2Fixture"]=b.dynamics.B2Fixture,b.dynamics.B2Fixture.__name__=["box2D","dynamics","B2Fixture"],b.dynamics.B2Fixture.prototype={synchronize:function(t,e,i){if(null!=this.m_proxy){var n=new b.collision.B2AABB,s=new b.collision.B2AABB;this.m_shape.computeAABB(n,e),this.m_shape.computeAABB(s,i),this.m_aabb.combine(n,s);var o=b.common.math.B2Math.subtractVV(i.position,e.position);t.moveProxy(this.m_proxy,this.m_aabb,o)}},destroyProxy:function(t){null!=this.m_proxy&&(t.destroyProxy(this.m_proxy),this.m_proxy=null)},createProxy:function(t,e){this.m_shape.computeAABB(this.m_aabb,e),this.m_proxy=t.createProxy(this.m_aabb,this)},destroy:function(){this.m_shape=null},create:function(t,e,i){this.m_userData=i.userData,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_body=t,this.m_next=null,this.m_filter=i.filter.copy(),this.m_isSensor=i.isSensor,this.m_shape=i.shape.copy(),this.m_density=i.density},getAABB:function(){return this.m_aabb},setRestitution:function(t){this.m_restitution=t},getRestitution:function(){return this.m_restitution},setFriction:function(t){this.m_friction=t},getFriction:function(){return this.m_friction},getDensity:function(){return this.m_density},setDensity:function(t){this.m_density=t},getMassData:function(t){return null==t&&(t=new b.collision.shapes.B2MassData),this.m_shape.computeMass(t,this.m_density),t},rayCast:function(t,e){return this.m_shape.rayCast(t,e,this.m_body.getTransform())},testPoint:function(t){return this.m_shape.testPoint(this.m_body.getTransform(),t)},SetUserData:function(t){this.m_userData=t},getUserData:function(){return this.m_userData},getNext:function(){return this.m_next},getBody:function(){return this.m_body},getFilterData:function(){return this.m_filter.copy()},setFilterData:function(t){if(this.m_filter=t.copy(),null==this.m_body)for(var e=this.m_body.getContactList();null!=e;){var i=e.contact,n=i.getFixtureA(),s=i.getFixtureB();(n==this||s==this)&&i.flagForFiltering(),e=e.next}},isSensor:function(){return this.m_isSensor},setSensor:function(t){if(this.m_isSensor!=t&&(this.m_isSensor=t,null!=this.m_body))for(var e=this.m_body.getContactList();null!=e;){var i=e.contact,n=i.getFixtureA(),s=i.getFixtureB();(n==this||s==this)&&i.setSensor(n.isSensor()||s.isSensor()),e=e.next}},getShape:function(){return this.m_shape},getType:function(){return this.m_shape.getType()},__class__:b.dynamics.B2Fixture},b.dynamics.B2FixtureDef=function(){this.filter=new b.dynamics.B2FilterData,this.shape=null,this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0,this.isSensor=!1},i["box2D.dynamics.B2FixtureDef"]=b.dynamics.B2FixtureDef,b.dynamics.B2FixtureDef.__name__=["box2D","dynamics","B2FixtureDef"],b.dynamics.B2FixtureDef.prototype={__class__:b.dynamics.B2FixtureDef},b.dynamics.B2Island=function(){this.m_bodies=new Array,this.m_contacts=new Array,this.m_joints=new Array},i["box2D.dynamics.B2Island"]=b.dynamics.B2Island,b.dynamics.B2Island.__name__=["box2D","dynamics","B2Island"],b.dynamics.B2Island.prototype={addJoint:function(t){this.m_joints[this.m_jointCount++]=t},addContact:function(t){this.m_contacts[this.m_contactCount++]=t},addBody:function(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t},report:function(t){if(null!=this.m_listener)for(var e=0,i=this.m_contactCount;i>e;){for(var n=e++,s=this.m_contacts[n],o=t[n],a=0,r=o.pointCount;r>a;){var l=a++;b.dynamics.B2Island.s_impulse.normalImpulses[l]=o.points[l].normalImpulse,b.dynamics.B2Island.s_impulse.tangentImpulses[l]=o.points[l].tangentImpulse}this.m_listener.postSolve(s,b.dynamics.B2Island.s_impulse)}},solveTOI:function(t){this.m_contactSolver.initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);for(var e=this.m_contactSolver,i=0,n=this.m_jointCount;n>i;){var s=i++;this.m_joints[s].initVelocityConstraints(t)}for(var i=0,n=t.velocityIterations;n>i;){var s=i++;e.solveVelocityConstraints();for(var o=0,a=this.m_jointCount;a>o;){var r=o++;this.m_joints[r].solveVelocityConstraints(t)}}for(var i=0,n=this.m_bodyCount;n>i;){var s=i++,l=this.m_bodies[s];if(l.getType()!=b.dynamics.B2Body.b2_staticBody){var m=t.dt*l.m_linearVelocity.x,c=t.dt*l.m_linearVelocity.y;m*m+c*c>b.common.B2Settings.b2_maxTranslationSquared&&(l.m_linearVelocity.normalize(),l.m_linearVelocity.x*=b.common.B2Settings.b2_maxTranslation*t.inv_dt,l.m_linearVelocity.y*=b.common.B2Settings.b2_maxTranslation*t.inv_dt);var _=t.dt*l.m_angularVelocity;_*_>b.common.B2Settings.b2_maxRotationSquared&&(l.m_angularVelocity=l.m_angularVelocity<0?-b.common.B2Settings.b2_maxRotation*t.inv_dt:b.common.B2Settings.b2_maxRotation*t.inv_dt),l.m_sweep.c0.setV(l.m_sweep.c),l.m_sweep.a0=l.m_sweep.a,l.m_sweep.c.x+=t.dt*l.m_linearVelocity.x,l.m_sweep.c.y+=t.dt*l.m_linearVelocity.y,l.m_sweep.a+=t.dt*l.m_angularVelocity,l.synchronizeTransform()}}for(var h=.75,i=0,n=t.positionIterations;n>i;){for(var s=i++,u=e.solvePositionConstraints(h),y=!0,o=0,a=this.m_jointCount;a>o;){var r=o++,d=this.m_joints[r].solvePositionConstraints(b.common.B2Settings.b2_contactBaumgarte);y=y&&d}if(u&&y)break}this.report(e.m_constraints)},solve:function(t,e,i){for(var n,s,o=0,a=this.m_bodyCount;a>o;){var r=o++;n=this.m_bodies[r],n.getType()==b.dynamics.B2Body.b2_dynamicBody&&(n.m_linearVelocity.x+=t.dt*(e.x+n.m_invMass*n.m_force.x),n.m_linearVelocity.y+=t.dt*(e.y+n.m_invMass*n.m_force.y),n.m_angularVelocity+=t.dt*n.m_invI*n.m_torque,n.m_linearVelocity.multiply(b.common.math.B2Math.clamp(1-t.dt*n.m_linearDamping,0,1)),n.m_angularVelocity*=b.common.math.B2Math.clamp(1-t.dt*n.m_angularDamping,0,1))}this.m_contactSolver.initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var l=this.m_contactSolver;l.initVelocityConstraints(t);for(var o=0,a=this.m_jointCount;a>o;){var r=o++;s=this.m_joints[r],s.initVelocityConstraints(t)}for(var o=0,a=t.velocityIterations;a>o;){for(var r=o++,m=0,c=this.m_jointCount;c>m;){var _=m++;s=this.m_joints[_],s.solveVelocityConstraints(t)}l.solveVelocityConstraints()}for(var o=0,a=this.m_jointCount;a>o;){var r=o++;s=this.m_joints[r],s.finalizeVelocityConstraints()}l.finalizeVelocityConstraints();for(var o=0,a=this.m_bodyCount;a>o;){var r=o++;if(n=this.m_bodies[r],n.getType()!=b.dynamics.B2Body.b2_staticBody){var h=t.dt*n.m_linearVelocity.x,u=t.dt*n.m_linearVelocity.y;h*h+u*u>b.common.B2Settings.b2_maxTranslationSquared&&(n.m_linearVelocity.normalize(),n.m_linearVelocity.x*=b.common.B2Settings.b2_maxTranslation*t.inv_dt,n.m_linearVelocity.y*=b.common.B2Settings.b2_maxTranslation*t.inv_dt);var y=t.dt*n.m_angularVelocity;y*y>b.common.B2Settings.b2_maxRotationSquared&&(n.m_angularVelocity=n.m_angularVelocity<0?-b.common.B2Settings.b2_maxRotation*t.inv_dt:b.common.B2Settings.b2_maxRotation*t.inv_dt),n.m_sweep.c0.setV(n.m_sweep.c),n.m_sweep.a0=n.m_sweep.a,n.m_sweep.c.x+=t.dt*n.m_linearVelocity.x,n.m_sweep.c.y+=t.dt*n.m_linearVelocity.y,n.m_sweep.a+=t.dt*n.m_angularVelocity,n.synchronizeTransform()}}for(var o=0,a=t.positionIterations;a>o;){for(var r=o++,d=l.solvePositionConstraints(b.common.B2Settings.b2_contactBaumgarte),p=!0,m=0,c=this.m_jointCount;c>m;){var _=m++;s=this.m_joints[_];var g=s.solvePositionConstraints(b.common.B2Settings.b2_contactBaumgarte);
p=p&&g}if(d&&p)break}if(this.report(l.m_constraints),i){for(var f=Number.MAX_VALUE,x=b.common.B2Settings.b2_linearSleepTolerance*b.common.B2Settings.b2_linearSleepTolerance,B=b.common.B2Settings.b2_angularSleepTolerance*b.common.B2Settings.b2_angularSleepTolerance,o=0,a=this.m_bodyCount;a>o;){var r=o++;n=this.m_bodies[r],n.getType()!=b.dynamics.B2Body.b2_staticBody&&(0==(n.m_flags&b.dynamics.B2Body.e_allowSleepFlag)&&(n.m_sleepTime=0,f=0),0==(n.m_flags&b.dynamics.B2Body.e_allowSleepFlag)||n.m_angularVelocity*n.m_angularVelocity>B||b.common.math.B2Math.dot(n.m_linearVelocity,n.m_linearVelocity)>x?(n.m_sleepTime=0,f=0):(n.m_sleepTime+=t.dt,f=b.common.math.B2Math.min(f,n.m_sleepTime)))}if(f>=b.common.B2Settings.b2_timeToSleep)for(var o=0,a=this.m_bodyCount;a>o;){var r=o++;n=this.m_bodies[r],n.setAwake(!1)}}},clear:function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},initialize:function(t,e,i,n,s,o){this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=i,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=n,this.m_listener=s,this.m_contactSolver=o;for(var a=this.m_bodies.length;t>a;){var r=a++;this.m_bodies[r]=null}for(var a=this.m_contacts.length;e>a;){var r=a++;this.m_contacts[r]=null}for(var a=this.m_joints.length;i>a;){var r=a++;this.m_joints[r]=null}},__class__:b.dynamics.B2Island},b.dynamics.B2TimeStep=function(){},i["box2D.dynamics.B2TimeStep"]=b.dynamics.B2TimeStep,b.dynamics.B2TimeStep.__name__=["box2D","dynamics","B2TimeStep"],b.dynamics.B2TimeStep.prototype={set:function(t){this.dt=t.dt,this.inv_dt=t.inv_dt,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.warmStarting=t.warmStarting},__class__:b.dynamics.B2TimeStep},b.dynamics.B2World=function(t,e){this.s_stack=new Array,this.m_contactManager=new b.dynamics.B2ContactManager,this.m_contactSolver=new b.dynamics.contacts.B2ContactSolver,this.m_island=new b.dynamics.B2Island,this.m_destructionListener=null,this.m_debugDraw=null,this.m_bodyList=null,this.m_contactList=null,this.m_jointList=null,this.m_controllerList=null,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_controllerCount=0,b.dynamics.B2World.m_warmStarting=!0,b.dynamics.B2World.m_continuousPhysics=!0,this.m_allowSleep=e,this.m_gravity=t,this.m_inv_dt0=0,this.m_contactManager.m_world=this;var i=new b.dynamics.B2BodyDef;this.m_groundBody=this.createBody(i)},i["box2D.dynamics.B2World"]=b.dynamics.B2World,b.dynamics.B2World.__name__=["box2D","dynamics","B2World"],b.dynamics.B2World.prototype={drawShape:function(t,e,i){switch(t.m_type[1]){case 1:var n=A.Boot.__cast(t,b.collision.shapes.B2CircleShape),s=b.common.math.B2Math.mulX(e,n.m_p),o=n.m_radius,a=e.R.col1;this.m_debugDraw.drawSolidCircle(s,o,a,i);break;case 2:for(var r=A.Boot.__cast(t,b.collision.shapes.B2PolygonShape),l=r.getVertexCount(),m=r.getVertices(),c=new Array,_=0;l>_;){var h=_++;c[h]=b.common.math.B2Math.mulX(e,m[h])}this.m_debugDraw.drawSolidPolygon(c,l,i);break;case 3:var u=A.Boot.__cast(t,b.collision.shapes.B2EdgeShape);this.m_debugDraw.drawSegment(b.common.math.B2Math.mulX(e,u.getVertex1()),b.common.math.B2Math.mulX(e,u.getVertex2()),i)}},drawJoint:function(t){var e=t.getBodyA(),i=t.getBodyB(),n=e.m_xf,s=i.m_xf,o=n.position,a=s.position,r=t.getAnchorA(),l=t.getAnchorB(),m=b.dynamics.B2World.s_jointColor;switch(t.m_type[1]){case 3:this.m_debugDraw.drawSegment(r,l,m);break;case 4:var c=A.Boot.__cast(t,b.dynamics.joints.B2PulleyJoint),_=c.getGroundAnchorA(),h=c.getGroundAnchorB();this.m_debugDraw.drawSegment(_,r,m),this.m_debugDraw.drawSegment(h,l,m),this.m_debugDraw.drawSegment(_,h,m);break;case 5:this.m_debugDraw.drawSegment(r,l,m);break;default:e!=this.m_groundBody&&this.m_debugDraw.drawSegment(o,r,m),this.m_debugDraw.drawSegment(r,l,m),i!=this.m_groundBody&&this.m_debugDraw.drawSegment(a,l,m)}},solveTOI:function(t){var e,i,n,s,o,a,r,l=this.m_island;l.initialize(this.m_bodyCount,b.common.B2Settings.b2_maxTOIContactsPerIsland,b.common.B2Settings.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var m=b.dynamics.B2World.s_queue;for(e=this.m_bodyList;null!=e;)e.m_flags&=~b.dynamics.B2Body.e_islandFlag,e.m_sweep.t0=0,e=e.m_next;for(var c=this.m_contactList;null!=c;)c.m_flags&=~(b.dynamics.contacts.B2Contact.e_toiFlag|b.dynamics.contacts.B2Contact.e_islandFlag),c=c.m_next;for(r=this.m_jointList;null!=r;)r.m_islandFlag=!1,r=r.m_next;for(;;){var _=null,h=1;for(c=this.m_contactList;null!=c;)if(1!=c.isSensor()&&0!=c.isEnabled()&&0!=c.isContinuous()){var u=1;if(0!=(c.m_flags&b.dynamics.contacts.B2Contact.e_toiFlag))u=c.m_toi;else{if(i=c.m_fixtureA,n=c.m_fixtureB,s=i.m_body,o=n.m_body,!(s.getType()==b.dynamics.B2Body.b2_dynamicBody&&0!=s.isAwake()||o.getType()==b.dynamics.B2Body.b2_dynamicBody&&0!=o.isAwake())){c=c.m_next;continue}var y=s.m_sweep.t0;s.m_sweep.t0<o.m_sweep.t0?(y=o.m_sweep.t0,s.m_sweep.advance(y)):o.m_sweep.t0<s.m_sweep.t0&&(y=s.m_sweep.t0,o.m_sweep.advance(y)),u=c.computeTOI(s.m_sweep,o.m_sweep),b.common.B2Settings.b2Assert(u>=0&&1>=u),u>0&&1>u&&(u=(1-u)*y+u,u>1&&(u=1)),c.m_toi=u,c.m_flags|=b.dynamics.contacts.B2Contact.e_toiFlag}Number.MIN_VALUE<u&&h>u&&(_=c,h=u),c=c.m_next}else c=c.m_next;if(null==_||1-100*Number.MIN_VALUE<h)break;if(i=_.m_fixtureA,n=_.m_fixtureB,s=i.m_body,o=n.m_body,b.dynamics.B2World.s_backupA.set(s.m_sweep),b.dynamics.B2World.s_backupB.set(o.m_sweep),s.advance(h),o.advance(h),_.update(this.m_contactManager.m_contactListener),_.m_flags&=~b.dynamics.contacts.B2Contact.e_toiFlag,1!=_.isSensor()&&0!=_.isEnabled()){if(0!=_.isTouching()){var d=s;d.getType()!=b.dynamics.B2Body.b2_dynamicBody&&(d=o),l.clear();var p=0,g=0;for(m[p+g++]=d,d.m_flags|=b.dynamics.B2Body.e_islandFlag;g>0;)if(e=m[p++],--g,l.addBody(e),0==e.isAwake()&&e.setAwake(!0),e.getType()==b.dynamics.B2Body.b2_dynamicBody){a=e.m_contactList;for(var f;null!=a;){if(l.m_contactCount==l.m_contactCapacity){a=a.next;break}0==(a.contact.m_flags&b.dynamics.contacts.B2Contact.e_islandFlag)?1!=a.contact.isSensor()&&0!=a.contact.isEnabled()&&0!=a.contact.isTouching()?(l.addContact(a.contact),a.contact.m_flags|=b.dynamics.contacts.B2Contact.e_islandFlag,f=a.other,0==(f.m_flags&b.dynamics.B2Body.e_islandFlag)?(f.getType()!=b.dynamics.B2Body.b2_staticBody&&(f.advance(h),f.setAwake(!0)),m[p+g]=f,++g,f.m_flags|=b.dynamics.B2Body.e_islandFlag,a=a.next):a=a.next):a=a.next:a=a.next}for(var x=e.m_jointList;null!=x;)l.m_jointCount!=l.m_jointCapacity?1!=x.joint.m_islandFlag?(f=x.other,0!=f.isActive()?(l.addJoint(x.joint),x.joint.m_islandFlag=!0,0==(f.m_flags&b.dynamics.B2Body.e_islandFlag)?(f.getType()!=b.dynamics.B2Body.b2_staticBody&&(f.advance(h),f.setAwake(!0)),m[p+g]=f,++g,f.m_flags|=b.dynamics.B2Body.e_islandFlag,x=x.next):x=x.next):x=x.next):x=x.next:x=x.next}var B=b.dynamics.B2World.s_timestep;B.warmStarting=!1,B.dt=(1-h)*t.dt,B.inv_dt=1/B.dt,B.dtRatio=0,B.velocityIterations=t.velocityIterations,B.positionIterations=t.positionIterations,l.solveTOI(B);for(var v=0,w=l.m_bodyCount;w>v;){var A=v++;if(e=l.m_bodies[A],e.m_flags&=~b.dynamics.B2Body.e_islandFlag,0!=e.isAwake()&&e.getType()==b.dynamics.B2Body.b2_dynamicBody)for(e.synchronizeFixtures(),a=e.m_contactList;null!=a;)a.contact.m_flags&=~b.dynamics.contacts.B2Contact.e_toiFlag,a=a.next}for(var v=0,w=l.m_contactCount;w>v;){var A=v++;c=l.m_contacts[A],c.m_flags&=~(b.dynamics.contacts.B2Contact.e_toiFlag|b.dynamics.contacts.B2Contact.e_islandFlag)}for(var v=0,w=l.m_jointCount;w>v;){var A=v++;r=l.m_joints[A],r.m_islandFlag=!1}this.m_contactManager.findNewContacts()}}else s.m_sweep.set(b.dynamics.B2World.s_backupA),o.m_sweep.set(b.dynamics.B2World.s_backupB),s.synchronizeTransform(),o.synchronizeTransform()}},solve:function(t){for(var e,i=this.m_controllerList;null!=i;)i.step(t),i=i.m_next;var n=this.m_island;for(n.initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver),e=this.m_bodyList;null!=e;)e.m_flags&=~b.dynamics.B2Body.e_islandFlag,e=e.m_next;for(var s=this.m_contactList;null!=s;)s.m_flags&=~b.dynamics.contacts.B2Contact.e_islandFlag,s=s.m_next;for(var o=this.m_jointList;null!=o;)o.m_islandFlag=!1,o=o.m_next;for(var a=(this.m_bodyCount,this.s_stack),r=this.m_bodyList;null!=r;)if(0==(r.m_flags&b.dynamics.B2Body.e_islandFlag))if(0!=r.isAwake()&&0!=r.isActive())if(r.getType()!=b.dynamics.B2Body.b2_staticBody){n.clear();var l=0;for(a[l++]=r,r.m_flags|=b.dynamics.B2Body.e_islandFlag;l>0;)if(e=a[--l],n.addBody(e),0==e.isAwake()&&e.setAwake(!0),e.getType()!=b.dynamics.B2Body.b2_staticBody){for(var m,c=e.m_contactList;null!=c;)0==(c.contact.m_flags&b.dynamics.contacts.B2Contact.e_islandFlag)?1!=c.contact.isSensor()&&0!=c.contact.isEnabled()&&0!=c.contact.isTouching()?(n.addContact(c.contact),c.contact.m_flags|=b.dynamics.contacts.B2Contact.e_islandFlag,m=c.other,0==(m.m_flags&b.dynamics.B2Body.e_islandFlag)?(a[l++]=m,m.m_flags|=b.dynamics.B2Body.e_islandFlag,c=c.next):c=c.next):c=c.next:c=c.next;for(var _=e.m_jointList;null!=_;)1!=_.joint.m_islandFlag?(m=_.other,0!=m.isActive()?(n.addJoint(_.joint),_.joint.m_islandFlag=!0,0==(m.m_flags&b.dynamics.B2Body.e_islandFlag)?(a[l++]=m,m.m_flags|=b.dynamics.B2Body.e_islandFlag,_=_.next):_=_.next):_=_.next):_=_.next}n.solve(t,this.m_gravity,this.m_allowSleep);for(var h=0,u=n.m_bodyCount;u>h;){var y=h++;e=n.m_bodies[y],e.getType()==b.dynamics.B2Body.b2_staticBody&&(e.m_flags&=~b.dynamics.B2Body.e_islandFlag)}r=r.m_next}else r=r.m_next;else r=r.m_next;else r=r.m_next;for(var h=0,u=a.length;u>h;){var y=h++;if(null==a[y])break;a[y]=null}for(e=this.m_bodyList;null!=e;)0!=e.isAwake()&&0!=e.isActive()?e.getType()!=b.dynamics.B2Body.b2_staticBody?(e.synchronizeFixtures(),e=e.m_next):e=e.m_next:e=e.m_next;this.m_contactManager.findNewContacts()},isLocked:function(){return(this.m_flags&b.dynamics.B2World.e_locked)>0},getContactList:function(){return this.m_contactList},getJointList:function(){return this.m_jointList},getBodyList:function(){return this.m_bodyList},rayCastAll:function(t,e){var i=new Array,n=function(t){return i[i.length]=t,1};return this.rayCast(n,t,e),i},rayCastOne:function(t,e){var i,n=function(t,e,n,s){return i=t,s};return this.rayCast(n,t,e),i},rayCast:function(t,e,i){var n=this.m_contactManager.m_broadPhase,s=new b.collision.B2RayCastOutput,o=function(o,a){var r=n.getUserData(a),l=A.Boot.__cast(r,b.dynamics.B2Fixture),m=l.rayCast(s,o);if(m){var c=s.fraction,_=new b.common.math.B2Vec2((1-c)*e.x+c*i.x,(1-c)*e.y+c*i.y);return t(l,_,s.normal,c)}return o.maxFraction},a=new b.collision.B2RayCastInput(e,i);n.rayCast(o,a)},queryPoint:function(t,e){var i=this.m_contactManager.m_broadPhase,n=function(n){var s=A.Boot.__cast(i.getUserData(n),b.dynamics.B2Fixture);return s.testPoint(e)?t(s):!0},s=new b.collision.B2AABB;s.lowerBound.set(e.x-b.common.B2Settings.b2_linearSlop,e.y-b.common.B2Settings.b2_linearSlop),s.upperBound.set(e.x+b.common.B2Settings.b2_linearSlop,e.y+b.common.B2Settings.b2_linearSlop),i.query(n,s)},queryShape:function(t,e,i){null==i&&(i=new b.common.math.B2Transform,i.setIdentity());var n=this.m_contactManager.m_broadPhase,s=function(s){var o=A.Boot.__cast(n.getUserData(s),b.dynamics.B2Fixture);return b.collision.shapes.B2Shape.testOverlap(e,i,o.getShape(),o.getBody().getTransform())?t(o):!0},o=new b.collision.B2AABB;e.computeAABB(o,i),n.query(s,o)},queryAABB:function(t,e){var i=this.m_contactManager.m_broadPhase,n=function(e){return t(i.getUserData(e))};i.query(n,e)},drawDebugData:function(){if(null!=this.m_debugDraw){this.m_debugDraw.m_sprite.get_graphics().clear();var t,e,i,n,s,o,a=this.m_debugDraw.getFlags(),r=(new b.common.math.B2Vec2,new b.common.math.B2Vec2,new b.common.math.B2Vec2,new b.collision.B2AABB,new b.collision.B2AABB,[new b.common.math.B2Vec2,new b.common.math.B2Vec2,new b.common.math.B2Vec2,new b.common.math.B2Vec2]),l=new b.common.B2Color(0,0,0);if(0!=(a&b.dynamics.B2DebugDraw.e_shapeBit))for(t=this.m_bodyList;null!=t;){for(o=t.m_xf,e=t.getFixtureList();null!=e;)i=e.getShape(),0==t.isActive()?(l.set(.5,.5,.3),this.drawShape(i,o,l)):t.getType()==b.dynamics.B2Body.b2_staticBody?(l.set(.5,.9,.5),this.drawShape(i,o,l)):t.getType()==b.dynamics.B2Body.b2_kinematicBody?(l.set(.5,.5,.9),this.drawShape(i,o,l)):0==t.isAwake()?(l.set(.6,.6,.6),this.drawShape(i,o,l)):(l.set(.9,.7,.7),this.drawShape(i,o,l)),e=e.m_next;t=t.m_next}if(0!=(a&b.dynamics.B2DebugDraw.e_jointBit))for(n=this.m_jointList;null!=n;)this.drawJoint(n),n=n.m_next;if(0!=(a&b.dynamics.B2DebugDraw.e_controllerBit))for(var m=this.m_controllerList;null!=m;)m.draw(this.m_debugDraw),m=m.m_next;if(0!=(a&b.dynamics.B2DebugDraw.e_pairBit)){l.set(.3,.9,.9);for(var c=this.m_contactManager.m_contactList;null!=c;){var _=c.getFixtureA(),h=c.getFixtureB(),u=_.getAABB().getCenter(),y=h.getAABB().getCenter();this.m_debugDraw.drawSegment(u,y,l),c=c.getNext()}}if(0!=(a&b.dynamics.B2DebugDraw.e_aabbBit))for(s=this.m_contactManager.m_broadPhase,r=[new b.common.math.B2Vec2,new b.common.math.B2Vec2,new b.common.math.B2Vec2,new b.common.math.B2Vec2],t=this.m_bodyList;null!=t;)if(0!=t.isActive()){for(e=t.getFixtureList();null!=e;){var d=s.getFatAABB(e.m_proxy);r[0].set(d.lowerBound.x,d.lowerBound.y),r[1].set(d.upperBound.x,d.lowerBound.y),r[2].set(d.upperBound.x,d.upperBound.y),r[3].set(d.lowerBound.x,d.upperBound.y),this.m_debugDraw.drawPolygon(r,4,l),e=e.getNext()}t=t.getNext()}else t=t.getNext();if(0!=(a&b.dynamics.B2DebugDraw.e_centerOfMassBit))for(t=this.m_bodyList;null!=t;)o=b.dynamics.B2World.s_xf,o.R=t.m_xf.R,o.position=t.getWorldCenter(),this.m_debugDraw.drawTransform(o),t=t.m_next}},clearForces:function(){for(var t=this.m_bodyList;null!=t;)t.m_force.setZero(),t.m_torque=0,t=t.m_next},step:function(t,e,i){0!=(this.m_flags&b.dynamics.B2World.e_newFixture)&&(this.m_contactManager.findNewContacts(),this.m_flags&=~b.dynamics.B2World.e_newFixture),this.m_flags|=b.dynamics.B2World.e_locked;var n=b.dynamics.B2World.s_timestep2;n.dt=t,n.velocityIterations=e,n.positionIterations=i,n.inv_dt=t>0?1/t:0,n.dtRatio=this.m_inv_dt0*t,n.warmStarting=b.dynamics.B2World.m_warmStarting,this.m_contactManager.collide(),n.dt>0&&this.solve(n),b.dynamics.B2World.m_continuousPhysics&&n.dt>0&&this.solveTOI(n),n.dt>0&&(this.m_inv_dt0=n.inv_dt),this.m_flags&=~b.dynamics.B2World.e_locked},getGroundBody:function(){return this.m_groundBody},getGravity:function(){return this.m_gravity},setGravity:function(t){this.m_gravity=t},getContactCount:function(){return this.m_contactCount},getJointCount:function(){return this.m_jointCount},getBodyCount:function(){return this.m_bodyCount},setContinuousPhysics:function(t){b.dynamics.B2World.m_continuousPhysics=t},setWarmStarting:function(t){b.dynamics.B2World.m_warmStarting=t},destroyController:function(t){t.clear(),null!=t.m_next&&(t.m_next.m_prev=t.m_prev),null!=t.m_prev&&(t.m_prev.m_next=t.m_next),t==this.m_controllerList&&(this.m_controllerList=t.m_next),--this.m_controllerCount},createController:function(t){if(t.m_world!=this)throw"Controller can only be a member of one world";return t.m_next=this.m_controllerList,t.m_prev=null,null!=this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t.m_world=this,t},removeController:function(t){null!=t.m_prev&&(t.m_prev.m_next=t.m_next),null!=t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList==t&&(this.m_controllerList=t.m_next),this.m_controllerCount--},addController:function(t){return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList=t,t.m_world=this,this.m_controllerCount++,t},destroyJoint:function(t){var e=t.m_collideConnected;null!=t.m_prev&&(t.m_prev.m_next=t.m_next),null!=t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var i=t.m_bodyA,n=t.m_bodyB;if(i.setAwake(!0),n.setAwake(!0),null!=t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),null!=t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==i.m_jointList&&(i.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,null!=t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),null!=t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==n.m_jointList&&(n.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,b.dynamics.joints.B2Joint.destroy(t,null),--this.m_jointCount,0==e)for(var s=n.getContactList();null!=s;)s.other==i&&s.contact.flagForFiltering(),s=s.next},createJoint:function(t){var e=b.dynamics.joints.B2Joint.create(t,null);e.m_prev=null,e.m_next=this.m_jointList,null!=this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.joint=e,e.m_edgeA.other=e.m_bodyB,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,null!=e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.joint=e,e.m_edgeB.other=e.m_bodyA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,null!=e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB;var i=t.bodyA,n=t.bodyB;if(0==t.collideConnected)for(var s=n.getContactList();null!=s;)s.other==i&&s.contact.flagForFiltering(),s=s.next;return e},destroyBody:function(t){if(1!=this.isLocked()){for(var e=t.m_jointList;null!=e;){var i=e;e=e.next,null!=this.m_destructionListener&&this.m_destructionListener.sayGoodbyeJoint(i.joint),this.destroyJoint(i.joint)}for(var n=t.m_controllerList;null!=n;){var s=n;n=n.nextController,s.controller.removeBody(t)}for(var o=t.m_contactList;null!=o;){var a=o;o=o.next,this.m_contactManager.destroy(a.contact)}t.m_contactList=null;for(var r=t.m_fixtureList;null!=r;){var l=r;r=r.m_next,null!=this.m_destructionListener&&this.m_destructionListener.sayGoodbyeFixture(l),l.destroyProxy(this.m_contactManager.m_broadPhase),l.destroy()}t.m_fixtureList=null,t.m_fixtureCount=0,null!=t.m_prev&&(t.m_prev.m_next=t.m_next),null!=t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}},createBody:function(t){if(1==this.isLocked())return null;var e=new b.dynamics.B2Body(t,this);return e.m_prev=null,e.m_next=this.m_bodyList,null!=this.m_bodyList&&(this.m_bodyList.m_prev=e),this.m_bodyList=e,++this.m_bodyCount,e},getProxyCount:function(){return this.m_contactManager.m_broadPhase.getProxyCount()},validate:function(){this.m_contactManager.m_broadPhase.validate()},setBroadPhase:function(t){var e=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=t;for(var i=this.m_bodyList;null!=i;){for(var n=i.m_fixtureList;null!=n;)n.m_proxy=t.createProxy(e.getFatAABB(n.m_proxy),n),n=n.m_next;i=i.m_next}},setDebugDraw:function(t){this.m_debugDraw=t},setContactListener:function(t){this.m_contactManager.m_contactListener=t},setContactFilter:function(t){this.m_contactManager.m_contactFilter=t},setDestructionListener:function(t){this.m_destructionListener=t},__class__:b.dynamics.B2World},b.dynamics.contacts={},b.dynamics.contacts.B2Contact=function(){this.m_nodeA=new b.dynamics.contacts.B2ContactEdge,this.m_nodeB=new b.dynamics.contacts.B2ContactEdge,this.m_manifold=new b.collision.B2Manifold,this.m_oldManifold=new b.collision.B2Manifold},i["box2D.dynamics.contacts.B2Contact"]=b.dynamics.contacts.B2Contact,b.dynamics.contacts.B2Contact.__name__=["box2D","dynamics","contacts","B2Contact"],b.dynamics.contacts.B2Contact.prototype={computeTOI:function(t,e){return b.dynamics.contacts.B2Contact.s_input.proxyA.set(this.m_fixtureA.getShape()),b.dynamics.contacts.B2Contact.s_input.proxyB.set(this.m_fixtureB.getShape()),b.dynamics.contacts.B2Contact.s_input.sweepA=t,b.dynamics.contacts.B2Contact.s_input.sweepB=e,b.dynamics.contacts.B2Contact.s_input.tolerance=b.common.B2Settings.b2_linearSlop,b.collision.B2TimeOfImpact.timeOfImpact(b.dynamics.contacts.B2Contact.s_input)},evaluate:function(){},update:function(t){var e=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_flags|=b.dynamics.contacts.B2Contact.e_enabledFlag;var i=!1,n=(this.m_flags&b.dynamics.contacts.B2Contact.e_touchingFlag)==b.dynamics.contacts.B2Contact.e_touchingFlag,s=this.m_fixtureA.m_body,o=this.m_fixtureB.m_body,a=this.m_fixtureA.m_aabb.testOverlap(this.m_fixtureB.m_aabb);if(0!=(this.m_flags&b.dynamics.contacts.B2Contact.e_sensorFlag)){if(a){var r=this.m_fixtureA.getShape(),l=this.m_fixtureB.getShape(),m=s.getTransform(),c=o.getTransform();i=b.collision.shapes.B2Shape.testOverlap(r,m,l,c)}this.m_manifold.m_pointCount=0}else{if(s.getType()!=b.dynamics.B2Body.b2_dynamicBody||s.isBullet()||o.getType()!=b.dynamics.B2Body.b2_dynamicBody||o.isBullet()?this.m_flags|=b.dynamics.contacts.B2Contact.e_continuousFlag:this.m_flags&=~b.dynamics.contacts.B2Contact.e_continuousFlag,a){this.evaluate(),i=this.m_manifold.m_pointCount>0;for(var _=0,h=this.m_manifold.m_pointCount;h>_;){var u=_++,y=this.m_manifold.m_points[u];y.m_normalImpulse=0,y.m_tangentImpulse=0;for(var d=y.m_id,p=0,g=this.m_oldManifold.m_pointCount;g>p;){var f=p++,x=this.m_oldManifold.m_points[f];if(x.m_id.get_key()==d.get_key()){y.m_normalImpulse=x.m_normalImpulse,y.m_tangentImpulse=x.m_tangentImpulse;break}}}}else this.m_manifold.m_pointCount=0;i!=n&&(s.setAwake(!0),o.setAwake(!0))}i?this.m_flags|=b.dynamics.contacts.B2Contact.e_touchingFlag:this.m_flags&=~b.dynamics.contacts.B2Contact.e_touchingFlag,0==n&&1==i&&t.beginContact(this),1==n&&0==i&&t.endContact(this),0==(this.m_flags&b.dynamics.contacts.B2Contact.e_sensorFlag)&&t.preSolve(this,this.m_oldManifold)},reset:function(t,e){if(this.m_flags=b.dynamics.contacts.B2Contact.e_enabledFlag,null==t||null==e)return this.m_fixtureA=null,this.m_fixtureB=null,void 0;(t.isSensor()||e.isSensor())&&(this.m_flags|=b.dynamics.contacts.B2Contact.e_sensorFlag);var i=t.getBody(),n=e.getBody();(i.getType()!=b.dynamics.B2Body.b2_dynamicBody||i.isBullet()||n.getType()!=b.dynamics.B2Body.b2_dynamicBody||n.isBullet())&&(this.m_flags|=b.dynamics.contacts.B2Contact.e_continuousFlag),this.m_fixtureA=t,this.m_fixtureB=e,this.m_manifold.m_pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null},flagForFiltering:function(){this.m_flags|=b.dynamics.contacts.B2Contact.e_filterFlag},getFixtureB:function(){return this.m_fixtureB},getFixtureA:function(){return this.m_fixtureA},getNext:function(){return this.m_next},isEnabled:function(){return(this.m_flags&b.dynamics.contacts.B2Contact.e_enabledFlag)==b.dynamics.contacts.B2Contact.e_enabledFlag},setEnabled:function(t){t?this.m_flags|=b.dynamics.contacts.B2Contact.e_enabledFlag:this.m_flags&=~b.dynamics.contacts.B2Contact.e_enabledFlag},isSensor:function(){return(this.m_flags&b.dynamics.contacts.B2Contact.e_sensorFlag)==b.dynamics.contacts.B2Contact.e_sensorFlag},setSensor:function(t){t?this.m_flags|=b.dynamics.contacts.B2Contact.e_sensorFlag:this.m_flags&=~b.dynamics.contacts.B2Contact.e_sensorFlag},isContinuous:function(){return(this.m_flags&b.dynamics.contacts.B2Contact.e_continuousFlag)==b.dynamics.contacts.B2Contact.e_continuousFlag},isTouching:function(){return(this.m_flags&b.dynamics.contacts.B2Contact.e_touchingFlag)==b.dynamics.contacts.B2Contact.e_touchingFlag},getWorldManifold:function(t){var e=this.m_fixtureA.getBody(),i=this.m_fixtureB.getBody(),n=this.m_fixtureA.getShape(),s=this.m_fixtureB.getShape();t.initialize(this.m_manifold,e.getTransform(),n.m_radius,i.getTransform(),s.m_radius)},getManifold:function(){return this.m_manifold},__class__:b.dynamics.contacts.B2Contact},b.dynamics.contacts.B2CircleContact=function(){b.dynamics.contacts.B2Contact.call(this)},i["box2D.dynamics.contacts.B2CircleContact"]=b.dynamics.contacts.B2CircleContact,b.dynamics.contacts.B2CircleContact.__name__=["box2D","dynamics","contacts","B2CircleContact"],b.dynamics.contacts.B2CircleContact.create=function(){return new b.dynamics.contacts.B2CircleContact},b.dynamics.contacts.B2CircleContact.destroy=function(){},b.dynamics.contacts.B2CircleContact.__super__=b.dynamics.contacts.B2Contact,b.dynamics.contacts.B2CircleContact.prototype=t(b.dynamics.contacts.B2Contact.prototype,{evaluate:function(){var t=this.m_fixtureA.getBody(),e=this.m_fixtureB.getBody();b.collision.B2Collision.collideCircles(this.m_manifold,A.Boot.__cast(this.m_fixtureA.getShape(),b.collision.shapes.B2CircleShape),t.m_xf,A.Boot.__cast(this.m_fixtureB.getShape(),b.collision.shapes.B2CircleShape),e.m_xf)},reset:function(t,e){b.dynamics.contacts.B2Contact.prototype.reset.call(this,t,e)},__class__:b.dynamics.contacts.B2CircleContact}),b.dynamics.contacts.B2ContactConstraint=function(){this.localPlaneNormal=new b.common.math.B2Vec2,this.localPoint=new b.common.math.B2Vec2,this.normal=new b.common.math.B2Vec2,this.normalMass=new b.common.math.B2Mat22,this.K=new b.common.math.B2Mat22,this.points=new Array;for(var t=0,e=b.common.B2Settings.b2_maxManifoldPoints;e>t;){var i=t++;this.points[i]=new b.dynamics.contacts.B2ContactConstraintPoint}},i["box2D.dynamics.contacts.B2ContactConstraint"]=b.dynamics.contacts.B2ContactConstraint,b.dynamics.contacts.B2ContactConstraint.__name__=["box2D","dynamics","contacts","B2ContactConstraint"],b.dynamics.contacts.B2ContactConstraint.prototype={__class__:b.dynamics.contacts.B2ContactConstraint},b.dynamics.contacts.B2ContactConstraintPoint=function(){this.localPoint=new b.common.math.B2Vec2,this.rA=new b.common.math.B2Vec2,this.rB=new b.common.math.B2Vec2},i["box2D.dynamics.contacts.B2ContactConstraintPoint"]=b.dynamics.contacts.B2ContactConstraintPoint,b.dynamics.contacts.B2ContactConstraintPoint.__name__=["box2D","dynamics","contacts","B2ContactConstraintPoint"],b.dynamics.contacts.B2ContactConstraintPoint.prototype={__class__:b.dynamics.contacts.B2ContactConstraintPoint},b.dynamics.contacts.B2ContactEdge=function(){},i["box2D.dynamics.contacts.B2ContactEdge"]=b.dynamics.contacts.B2ContactEdge,b.dynamics.contacts.B2ContactEdge.__name__=["box2D","dynamics","contacts","B2ContactEdge"],b.dynamics.contacts.B2ContactEdge.prototype={__class__:b.dynamics.contacts.B2ContactEdge},b.dynamics.contacts.B2ContactFactory=function(t){this.m_allocator=t,this.initializeRegisters()},i["box2D.dynamics.contacts.B2ContactFactory"]=b.dynamics.contacts.B2ContactFactory,b.dynamics.contacts.B2ContactFactory.__name__=["box2D","dynamics","contacts","B2ContactFactory"],b.dynamics.contacts.B2ContactFactory.prototype={destroy:function(t){t.m_manifold.m_pointCount>0&&(t.m_fixtureA.m_body.setAwake(!0),t.m_fixtureB.m_body.setAwake(!0));var e=t.m_fixtureA.getType(),i=t.m_fixtureB.getType(),n=this.m_registers[e[1]][i[1]];n.poolCount++,t.m_next=n.pool,n.pool=t;var s=n.destroyFcn;s(t,this.m_allocator)},create:function(t,e){var i,n=t.getType(),s=e.getType(),o=this.m_registers[n[1]][s[1]];if(null!=o.pool)return i=o.pool,o.pool=i.m_next,o.poolCount--,i.reset(t,e),i;var a=o.createFcn;return null!=a?o.primary?(i=a(this.m_allocator),i.reset(t,e),i):(i=a(this.m_allocator),i.reset(e,t),i):null},initializeRegisters:function(){this.m_registers=new Array;for(var t=0,e=v.allEnums(b.collision.shapes.B2ShapeType).length;e>t;){var i=t++;this.m_registers[i]=new Array;for(var n=0,s=v.allEnums(b.collision.shapes.B2ShapeType).length;s>n;){var o=n++;this.m_registers[i][o]=new b.dynamics.contacts.B2ContactRegister}}this.addType(b.dynamics.contacts.B2CircleContact.create,b.dynamics.contacts.B2CircleContact.destroy,b.collision.shapes.B2ShapeType.CIRCLE_SHAPE,b.collision.shapes.B2ShapeType.CIRCLE_SHAPE),this.addType(b.dynamics.contacts.B2PolyAndCircleContact.create,b.dynamics.contacts.B2PolyAndCircleContact.destroy,b.collision.shapes.B2ShapeType.POLYGON_SHAPE,b.collision.shapes.B2ShapeType.CIRCLE_SHAPE),this.addType(b.dynamics.contacts.B2PolygonContact.create,b.dynamics.contacts.B2PolygonContact.destroy,b.collision.shapes.B2ShapeType.POLYGON_SHAPE,b.collision.shapes.B2ShapeType.POLYGON_SHAPE),this.addType(b.dynamics.contacts.B2EdgeAndCircleContact.create,b.dynamics.contacts.B2EdgeAndCircleContact.destroy,b.collision.shapes.B2ShapeType.EDGE_SHAPE,b.collision.shapes.B2ShapeType.CIRCLE_SHAPE),this.addType(b.dynamics.contacts.B2PolyAndEdgeContact.create,b.dynamics.contacts.B2PolyAndEdgeContact.destroy,b.collision.shapes.B2ShapeType.POLYGON_SHAPE,b.collision.shapes.B2ShapeType.EDGE_SHAPE)},addType:function(t,e,i,n){var s=i[1],o=n[1];this.m_registers[s][o].createFcn=t,this.m_registers[s][o].destroyFcn=e,this.m_registers[s][o].primary=!0,i!=n&&(this.m_registers[o][s].createFcn=t,this.m_registers[o][s].destroyFcn=e,this.m_registers[o][s].primary=!1)},__class__:b.dynamics.contacts.B2ContactFactory},b.dynamics.contacts.B2ContactRegister=function(){},i["box2D.dynamics.contacts.B2ContactRegister"]=b.dynamics.contacts.B2ContactRegister,b.dynamics.contacts.B2ContactRegister.__name__=["box2D","dynamics","contacts","B2ContactRegister"],b.dynamics.contacts.B2ContactRegister.prototype={__class__:b.dynamics.contacts.B2ContactRegister},b.dynamics.contacts.B2PositionSolverManifold=function(){this.m_normal=new b.common.math.B2Vec2,this.m_separations=new Array,this.m_points=new Array;for(var t=0,e=b.common.B2Settings.b2_maxManifoldPoints;e>t;){var i=t++;this.m_points[i]=new b.common.math.B2Vec2}},i["box2D.dynamics.contacts.B2PositionSolverManifold"]=b.dynamics.contacts.B2PositionSolverManifold,b.dynamics.contacts.B2PositionSolverManifold.__name__=["box2D","dynamics","contacts","B2PositionSolverManifold"],b.dynamics.contacts.B2PositionSolverManifold.prototype={initialize:function(t){b.common.B2Settings.b2Assert(t.pointCount>0);var e,i,n,s,o,a;switch(t.type[1]){case 0:n=t.bodyA.m_xf.R,s=t.localPoint;var r=t.bodyA.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y),l=t.bodyA.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y);n=t.bodyB.m_xf.R,s=t.points[0].localPoint;var m=t.bodyB.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y),c=t.bodyB.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y),_=m-r,h=c-l,u=_*_+h*h;if(u>Number.MIN_VALUE*Number.MIN_VALUE){var y=Math.sqrt(u);this.m_normal.x=_/y,this.m_normal.y=h/y}else this.m_normal.x=1,this.m_normal.y=0;this.m_points[0].x=.5*(r+m),this.m_points[0].y=.5*(l+c),this.m_separations[0]=_*this.m_normal.x+h*this.m_normal.y-t.radius;break;case 1:n=t.bodyA.m_xf.R,s=t.localPlaneNormal,this.m_normal.x=n.col1.x*s.x+n.col2.x*s.y,this.m_normal.y=n.col1.y*s.x+n.col2.y*s.y,n=t.bodyA.m_xf.R,s=t.localPoint,o=t.bodyA.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y),a=t.bodyA.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y),n=t.bodyB.m_xf.R;for(var d=0,p=t.pointCount;p>d;){var g=d++;s=t.points[g].localPoint,e=t.bodyB.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y),i=t.bodyB.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y),this.m_separations[g]=(e-o)*this.m_normal.x+(i-a)*this.m_normal.y-t.radius,this.m_points[g].x=e,this.m_points[g].y=i}break;case 2:n=t.bodyB.m_xf.R,s=t.localPlaneNormal,this.m_normal.x=n.col1.x*s.x+n.col2.x*s.y,this.m_normal.y=n.col1.y*s.x+n.col2.y*s.y,n=t.bodyB.m_xf.R,s=t.localPoint,o=t.bodyB.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y),a=t.bodyB.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y),n=t.bodyA.m_xf.R;for(var d=0,p=t.pointCount;p>d;){var g=d++;s=t.points[g].localPoint,e=t.bodyA.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y),i=t.bodyA.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y),this.m_separations[g]=(e-o)*this.m_normal.x+(i-a)*this.m_normal.y-t.radius,this.m_points[g].set(e,i)}this.m_normal.x*=-1,this.m_normal.y*=-1}},__class__:b.dynamics.contacts.B2PositionSolverManifold},b.dynamics.contacts.B2ContactSolver=function(){this.m_step=new b.dynamics.B2TimeStep,this.m_constraints=new Array},i["box2D.dynamics.contacts.B2ContactSolver"]=b.dynamics.contacts.B2ContactSolver,b.dynamics.contacts.B2ContactSolver.__name__=["box2D","dynamics","contacts","B2ContactSolver"],b.dynamics.contacts.B2ContactSolver.prototype={solvePositionConstraints:function(t){for(var e=0,i=0,n=this.m_constraintCount;n>i;){var s=i++,o=this.m_constraints[s],a=o.bodyA,r=o.bodyB,l=a.m_mass*a.m_invMass,m=a.m_mass*a.m_invI,c=r.m_mass*r.m_invMass,_=r.m_mass*r.m_invI;b.dynamics.contacts.B2ContactSolver.s_psm.initialize(o);for(var h=b.dynamics.contacts.B2ContactSolver.s_psm.m_normal,u=0,y=o.pointCount;y>u;){var d=u++,p=o.points[d],g=b.dynamics.contacts.B2ContactSolver.s_psm.m_points[d],f=b.dynamics.contacts.B2ContactSolver.s_psm.m_separations[d],x=g.x-a.m_sweep.c.x,B=g.y-a.m_sweep.c.y,v=g.x-r.m_sweep.c.x,w=g.y-r.m_sweep.c.y;
e=f>e?e:f;var A=b.common.math.B2Math.clamp(t*(f+b.common.B2Settings.b2_linearSlop),-b.common.B2Settings.b2_maxLinearCorrection,0),S=-p.equalizedMass*A,L=S*h.x,M=S*h.y;a.m_sweep.c.x-=l*L,a.m_sweep.c.y-=l*M,a.m_sweep.a-=m*(x*M-B*L),a.synchronizeTransform(),r.m_sweep.c.x+=c*L,r.m_sweep.c.y+=c*M,r.m_sweep.a+=_*(v*M-w*L),r.synchronizeTransform()}}return e>-1.5*b.common.B2Settings.b2_linearSlop},finalizeVelocityConstraints:function(){for(var t=0,e=this.m_constraintCount;e>t;)for(var i=t++,n=this.m_constraints[i],s=n.manifold,o=0,a=n.pointCount;a>o;){var r=o++,l=s.m_points[r],m=n.points[r];l.m_normalImpulse=m.normalImpulse,l.m_tangentImpulse=m.tangentImpulse}},solveVelocityConstraints:function(){for(var t,e,i,n,s,o,a,r,l,m,c,_,h,u,y,d,p,g=0,f=this.m_constraintCount;f>g;){for(var x=g++,B=this.m_constraints[x],v=B.bodyA,w=B.bodyB,A=v.m_angularVelocity,S=w.m_angularVelocity,L=v.m_linearVelocity,M=w.m_linearVelocity,C=v.m_invMass,T=v.m_invI,I=w.m_invMass,D=w.m_invI,V=B.normal.x,E=B.normal.y,F=E,P=-V,R=B.friction,j=0,O=B.pointCount;O>j;){var J=j++;t=B.points[J],e=M.x-S*t.rB.y-L.x+A*t.rA.y,i=M.y+S*t.rB.x-L.y-A*t.rA.x,s=e*F+i*P,o=t.tangentMass*-s,a=R*t.normalImpulse,r=b.common.math.B2Math.clamp(t.tangentImpulse+o,-a,a),o=r-t.tangentImpulse,l=o*F,m=o*P,L.x-=C*l,L.y-=C*m,A-=T*(t.rA.x*m-t.rA.y*l),M.x+=I*l,M.y+=I*m,S+=D*(t.rB.x*m-t.rB.y*l),t.tangentImpulse=r}{B.pointCount}if(1==B.pointCount)t=B.points[0],e=M.x+-S*t.rB.y-L.x- -A*t.rA.y,i=M.y+S*t.rB.x-L.y-A*t.rA.x,n=e*V+i*E,o=-t.normalMass*(n-t.velocityBias),r=t.normalImpulse+o,r=r>0?r:0,o=r-t.normalImpulse,l=o*V,m=o*E,L.x-=C*l,L.y-=C*m,A-=T*(t.rA.x*m-t.rA.y*l),M.x+=I*l,M.y+=I*m,S+=D*(t.rB.x*m-t.rB.y*l),t.normalImpulse=r;else{var N=B.points[0],k=B.points[1],q=N.normalImpulse,U=k.normalImpulse,z=M.x-S*N.rB.y-L.x+A*N.rA.y,K=M.y+S*N.rB.x-L.y-A*N.rA.x,W=M.x-S*k.rB.y-L.x+A*k.rA.y,H=M.y+S*k.rB.x-L.y-A*k.rA.x,G=z*V+K*E,Y=W*V+H*E,X=G-N.velocityBias,Z=Y-k.velocityBias;p=B.K,X-=p.col1.x*q+p.col2.x*U,Z-=p.col1.y*q+p.col2.y*U;for(var O=0;1>O;){{O++}p=B.normalMass;var Q=-(p.col1.x*X+p.col2.x*Z),$=-(p.col1.y*X+p.col2.y*Z);if(Q>=0&&$>=0){c=Q-q,_=$-U,h=c*V,u=c*E,y=_*V,d=_*E,L.x-=C*(h+y),L.y-=C*(u+d),A-=T*(N.rA.x*u-N.rA.y*h+k.rA.x*d-k.rA.y*y),M.x+=I*(h+y),M.y+=I*(u+d),S+=D*(N.rB.x*u-N.rB.y*h+k.rB.x*d-k.rB.y*y),N.normalImpulse=Q,k.normalImpulse=$;break}if(Q=-N.normalMass*X,$=0,G=0,Y=B.K.col1.y*Q+Z,Q>=0&&Y>=0){c=Q-q,_=$-U,h=c*V,u=c*E,y=_*V,d=_*E,L.x-=C*(h+y),L.y-=C*(u+d),A-=T*(N.rA.x*u-N.rA.y*h+k.rA.x*d-k.rA.y*y),M.x+=I*(h+y),M.y+=I*(u+d),S+=D*(N.rB.x*u-N.rB.y*h+k.rB.x*d-k.rB.y*y),N.normalImpulse=Q,k.normalImpulse=$;break}if(Q=0,$=-k.normalMass*Z,G=B.K.col2.x*$+X,Y=0,$>=0&&G>=0){c=Q-q,_=$-U,h=c*V,u=c*E,y=_*V,d=_*E,L.x-=C*(h+y),L.y-=C*(u+d),A-=T*(N.rA.x*u-N.rA.y*h+k.rA.x*d-k.rA.y*y),M.x+=I*(h+y),M.y+=I*(u+d),S+=D*(N.rB.x*u-N.rB.y*h+k.rB.x*d-k.rB.y*y),N.normalImpulse=Q,k.normalImpulse=$;break}if(Q=0,$=0,G=X,Y=Z,G>=0&&Y>=0){c=Q-q,_=$-U,h=c*V,u=c*E,y=_*V,d=_*E,L.x-=C*(h+y),L.y-=C*(u+d),A-=T*(N.rA.x*u-N.rA.y*h+k.rA.x*d-k.rA.y*y),M.x+=I*(h+y),M.y+=I*(u+d),S+=D*(N.rB.x*u-N.rB.y*h+k.rB.x*d-k.rB.y*y),N.normalImpulse=Q,k.normalImpulse=$;break}break}}v.m_angularVelocity=A,w.m_angularVelocity=S}},initVelocityConstraints:function(t){for(var e=0,i=this.m_constraintCount;i>e;){var n,s=e++,o=this.m_constraints[s],a=o.bodyA,r=o.bodyB,l=a.m_invMass,m=a.m_invI,c=r.m_invMass,_=r.m_invI,h=o.normal.x,u=o.normal.y,y=u,d=-h;if(t.warmStarting){n=o.pointCount;for(var p=0;n>p;){var g=p++,f=o.points[g];f.normalImpulse*=t.dtRatio,f.tangentImpulse*=t.dtRatio;var x=f.normalImpulse*h+f.tangentImpulse*y,B=f.normalImpulse*u+f.tangentImpulse*d;a.m_angularVelocity-=m*(f.rA.x*B-f.rA.y*x),a.m_linearVelocity.x-=l*x,a.m_linearVelocity.y-=l*B,r.m_angularVelocity+=_*(f.rB.x*B-f.rB.y*x),r.m_linearVelocity.x+=c*x,r.m_linearVelocity.y+=c*B}}else{n=o.pointCount;for(var p=0;n>p;){var g=p++,v=o.points[g];v.normalImpulse=0,v.tangentImpulse=0}}}},initialize:function(t,e,i,n){var s;this.m_step.set(t),this.m_allocator=n;for(this.m_constraintCount=i;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new b.dynamics.contacts.B2ContactConstraint;for(var o=0;i>o;){var a=o++;s=e[a];var r=s.m_fixtureA,l=s.m_fixtureB,m=r.m_shape,c=l.m_shape,_=m.m_radius,h=c.m_radius,u=r.m_body,y=l.m_body,d=s.getManifold(),p=b.common.B2Settings.b2MixFriction(r.getFriction(),l.getFriction()),g=b.common.B2Settings.b2MixRestitution(r.getRestitution(),l.getRestitution()),f=u.m_linearVelocity.x,x=u.m_linearVelocity.y,B=y.m_linearVelocity.x,v=y.m_linearVelocity.y,w=u.m_angularVelocity,A=y.m_angularVelocity;b.common.B2Settings.b2Assert(d.m_pointCount>0),b.dynamics.contacts.B2ContactSolver.s_worldManifold.initialize(d,u.m_xf,_,y.m_xf,h);var S=b.dynamics.contacts.B2ContactSolver.s_worldManifold.m_normal.x,L=b.dynamics.contacts.B2ContactSolver.s_worldManifold.m_normal.y,M=this.m_constraints[a];M.bodyA=u,M.bodyB=y,M.manifold=d,M.normal.x=S,M.normal.y=L,M.pointCount=d.m_pointCount,M.friction=p,M.restitution=g,M.localPlaneNormal.x=d.m_localPlaneNormal.x,M.localPlaneNormal.y=d.m_localPlaneNormal.y,M.localPoint.x=d.m_localPoint.x,M.localPoint.y=d.m_localPoint.y,M.radius=_+h,M.type=d.m_type;for(var C=0,T=M.pointCount;T>C;){var I=C++,D=d.m_points[I],V=M.points[I];V.normalImpulse=D.m_normalImpulse,V.tangentImpulse=D.m_tangentImpulse,V.localPoint.setV(D.m_localPoint);var E=V.rA.x=b.dynamics.contacts.B2ContactSolver.s_worldManifold.m_points[I].x-u.m_sweep.c.x,F=V.rA.y=b.dynamics.contacts.B2ContactSolver.s_worldManifold.m_points[I].y-u.m_sweep.c.y,P=V.rB.x=b.dynamics.contacts.B2ContactSolver.s_worldManifold.m_points[I].x-y.m_sweep.c.x,R=V.rB.y=b.dynamics.contacts.B2ContactSolver.s_worldManifold.m_points[I].y-y.m_sweep.c.y,j=E*L-F*S,O=P*L-R*S;j*=j,O*=O;var J=u.m_invMass+y.m_invMass+u.m_invI*j+y.m_invI*O;V.normalMass=1/J;var N=u.m_mass*u.m_invMass+y.m_mass*y.m_invMass;N+=u.m_mass*u.m_invI*j+y.m_mass*y.m_invI*O,V.equalizedMass=1/N;var k=L,q=-S,U=E*q-F*k,z=P*q-R*k;U*=U,z*=z;var K=u.m_invMass+y.m_invMass+u.m_invI*U+y.m_invI*z;V.tangentMass=1/K,V.velocityBias=0;var W=B+-A*R-f- -w*F,H=v+A*P-x-w*E,G=M.normal.x*W+M.normal.y*H;G<-b.common.B2Settings.b2_velocityThreshold&&(V.velocityBias+=-M.restitution*G)}if(2==M.pointCount){var Y=M.points[0],X=M.points[1],Z=u.m_invMass,Q=u.m_invI,$=y.m_invMass,te=y.m_invI,ee=Y.rA.x*L-Y.rA.y*S,ie=Y.rB.x*L-Y.rB.y*S,ne=X.rA.x*L-X.rA.y*S,se=X.rB.x*L-X.rB.y*S,oe=Z+$+Q*ee*ee+te*ie*ie,ae=Z+$+Q*ne*ne+te*se*se,re=Z+$+Q*ee*ne+te*ie*se,le=100;le*(oe*ae-re*re)>oe*oe?(M.K.col1.set(oe,re),M.K.col2.set(re,ae),M.K.getInverse(M.normalMass)):M.pointCount=1}}},__class__:b.dynamics.contacts.B2ContactSolver},b.dynamics.contacts.B2EdgeAndCircleContact=function(){b.dynamics.contacts.B2Contact.call(this)},i["box2D.dynamics.contacts.B2EdgeAndCircleContact"]=b.dynamics.contacts.B2EdgeAndCircleContact,b.dynamics.contacts.B2EdgeAndCircleContact.__name__=["box2D","dynamics","contacts","B2EdgeAndCircleContact"],b.dynamics.contacts.B2EdgeAndCircleContact.create=function(){return new b.dynamics.contacts.B2EdgeAndCircleContact},b.dynamics.contacts.B2EdgeAndCircleContact.destroy=function(){},b.dynamics.contacts.B2EdgeAndCircleContact.__super__=b.dynamics.contacts.B2Contact,b.dynamics.contacts.B2EdgeAndCircleContact.prototype=t(b.dynamics.contacts.B2Contact.prototype,{b2CollideEdgeAndCircle:function(){},evaluate:function(){var t=this.m_fixtureA.getBody(),e=this.m_fixtureB.getBody();this.b2CollideEdgeAndCircle(this.m_manifold,A.Boot.__cast(this.m_fixtureA.getShape(),b.collision.shapes.B2EdgeShape),t.m_xf,A.Boot.__cast(this.m_fixtureB.getShape(),b.collision.shapes.B2CircleShape),e.m_xf)},reset:function(t,e){b.dynamics.contacts.B2Contact.prototype.reset.call(this,t,e)},__class__:b.dynamics.contacts.B2EdgeAndCircleContact}),b.dynamics.contacts.B2PolyAndCircleContact=function(){b.dynamics.contacts.B2Contact.call(this)},i["box2D.dynamics.contacts.B2PolyAndCircleContact"]=b.dynamics.contacts.B2PolyAndCircleContact,b.dynamics.contacts.B2PolyAndCircleContact.__name__=["box2D","dynamics","contacts","B2PolyAndCircleContact"],b.dynamics.contacts.B2PolyAndCircleContact.create=function(){return new b.dynamics.contacts.B2PolyAndCircleContact},b.dynamics.contacts.B2PolyAndCircleContact.destroy=function(){},b.dynamics.contacts.B2PolyAndCircleContact.__super__=b.dynamics.contacts.B2Contact,b.dynamics.contacts.B2PolyAndCircleContact.prototype=t(b.dynamics.contacts.B2Contact.prototype,{evaluate:function(){var t=this.m_fixtureA.m_body,e=this.m_fixtureB.m_body;b.collision.B2Collision.collidePolygonAndCircle(this.m_manifold,A.Boot.__cast(this.m_fixtureA.getShape(),b.collision.shapes.B2PolygonShape),t.m_xf,A.Boot.__cast(this.m_fixtureB.getShape(),b.collision.shapes.B2CircleShape),e.m_xf)},reset:function(t,e){b.dynamics.contacts.B2Contact.prototype.reset.call(this,t,e),b.common.B2Settings.b2Assert(t.getType()==b.collision.shapes.B2ShapeType.POLYGON_SHAPE),b.common.B2Settings.b2Assert(e.getType()==b.collision.shapes.B2ShapeType.CIRCLE_SHAPE)},__class__:b.dynamics.contacts.B2PolyAndCircleContact}),b.dynamics.contacts.B2PolyAndEdgeContact=function(){b.dynamics.contacts.B2Contact.call(this)},i["box2D.dynamics.contacts.B2PolyAndEdgeContact"]=b.dynamics.contacts.B2PolyAndEdgeContact,b.dynamics.contacts.B2PolyAndEdgeContact.__name__=["box2D","dynamics","contacts","B2PolyAndEdgeContact"],b.dynamics.contacts.B2PolyAndEdgeContact.create=function(){return new b.dynamics.contacts.B2PolyAndEdgeContact},b.dynamics.contacts.B2PolyAndEdgeContact.destroy=function(){},b.dynamics.contacts.B2PolyAndEdgeContact.__super__=b.dynamics.contacts.B2Contact,b.dynamics.contacts.B2PolyAndEdgeContact.prototype=t(b.dynamics.contacts.B2Contact.prototype,{b2CollidePolyAndEdge:function(){},evaluate:function(){var t=this.m_fixtureA.getBody(),e=this.m_fixtureB.getBody();this.b2CollidePolyAndEdge(this.m_manifold,A.Boot.__cast(this.m_fixtureA.getShape(),b.collision.shapes.B2PolygonShape),t.m_xf,A.Boot.__cast(this.m_fixtureB.getShape(),b.collision.shapes.B2EdgeShape),e.m_xf)},reset:function(t,e){b.dynamics.contacts.B2Contact.prototype.reset.call(this,t,e),b.common.B2Settings.b2Assert(t.getType()==b.collision.shapes.B2ShapeType.POLYGON_SHAPE),b.common.B2Settings.b2Assert(e.getType()==b.collision.shapes.B2ShapeType.EDGE_SHAPE)},__class__:b.dynamics.contacts.B2PolyAndEdgeContact}),b.dynamics.contacts.B2PolygonContact=function(){b.dynamics.contacts.B2Contact.call(this)},i["box2D.dynamics.contacts.B2PolygonContact"]=b.dynamics.contacts.B2PolygonContact,b.dynamics.contacts.B2PolygonContact.__name__=["box2D","dynamics","contacts","B2PolygonContact"],b.dynamics.contacts.B2PolygonContact.create=function(){return new b.dynamics.contacts.B2PolygonContact},b.dynamics.contacts.B2PolygonContact.destroy=function(){},b.dynamics.contacts.B2PolygonContact.__super__=b.dynamics.contacts.B2Contact,b.dynamics.contacts.B2PolygonContact.prototype=t(b.dynamics.contacts.B2Contact.prototype,{evaluate:function(){var t=this.m_fixtureA.getBody(),e=this.m_fixtureB.getBody();b.collision.B2Collision.collidePolygons(this.m_manifold,A.Boot.__cast(this.m_fixtureA.getShape(),b.collision.shapes.B2PolygonShape),t.m_xf,A.Boot.__cast(this.m_fixtureB.getShape(),b.collision.shapes.B2PolygonShape),e.m_xf)},reset:function(t,e){b.dynamics.contacts.B2Contact.prototype.reset.call(this,t,e)},__class__:b.dynamics.contacts.B2PolygonContact}),b.dynamics.controllers={},b.dynamics.controllers.B2Controller=function(){},i["box2D.dynamics.controllers.B2Controller"]=b.dynamics.controllers.B2Controller,b.dynamics.controllers.B2Controller.__name__=["box2D","dynamics","controllers","B2Controller"],b.dynamics.controllers.B2Controller.prototype={getBodyList:function(){return this.m_bodyList},getWorld:function(){return this.m_world},getNext:function(){return this.m_next},clear:function(){for(;null!=this.m_bodyList;)this.removeBody(this.m_bodyList.body)},removeBody:function(t){for(var e=t.m_controllerList;null!=e&&e.controller!=this;)e=e.nextController;null!=e.prevBody&&(e.prevBody.nextBody=e.nextBody),null!=e.nextBody&&(e.nextBody.prevBody=e.prevBody),null!=e.nextController&&(e.nextController.prevController=e.prevController),null!=e.prevController&&(e.prevController.nextController=e.nextController),this.m_bodyList==e&&(this.m_bodyList=e.nextBody),t.m_controllerList==e&&(t.m_controllerList=e.nextController),t.m_controllerCount--,this.m_bodyCount--},addBody:function(t){var e=new b.dynamics.controllers.B2ControllerEdge;e.controller=this,e.body=t,e.nextBody=this.m_bodyList,e.prevBody=null,this.m_bodyList=e,null!=e.nextBody&&(e.nextBody.prevBody=e),this.m_bodyCount++,e.nextController=t.m_controllerList,e.prevController=null,t.m_controllerList=e,null!=e.nextController&&(e.nextController.prevController=e),t.m_controllerCount++},draw:function(){},step:function(){},__class__:b.dynamics.controllers.B2Controller},b.dynamics.controllers.B2ControllerEdge=function(){},i["box2D.dynamics.controllers.B2ControllerEdge"]=b.dynamics.controllers.B2ControllerEdge,b.dynamics.controllers.B2ControllerEdge.__name__=["box2D","dynamics","controllers","B2ControllerEdge"],b.dynamics.controllers.B2ControllerEdge.prototype={__class__:b.dynamics.controllers.B2ControllerEdge},b.dynamics.joints={},b.dynamics.joints.B2Joint=function(t){this.m_edgeA=new b.dynamics.joints.B2JointEdge,this.m_edgeB=new b.dynamics.joints.B2JointEdge,this.m_localCenterA=new b.common.math.B2Vec2,this.m_localCenterB=new b.common.math.B2Vec2,b.common.B2Settings.b2Assert(t.bodyA!=t.bodyB),this.m_type=t.type,this.m_prev=null,this.m_next=null,this.m_bodyA=t.bodyA,this.m_bodyB=t.bodyB,this.m_collideConnected=t.collideConnected,this.m_islandFlag=!1,this.m_userData=t.userData},i["box2D.dynamics.joints.B2Joint"]=b.dynamics.joints.B2Joint,b.dynamics.joints.B2Joint.__name__=["box2D","dynamics","joints","B2Joint"],b.dynamics.joints.B2Joint.create=function(t){var e=null;switch(t.type[1]){case 3:e=new b.dynamics.joints.B2DistanceJoint(A.Boot.__cast(t,b.dynamics.joints.B2DistanceJointDef));break;case 5:e=new b.dynamics.joints.B2MouseJoint(A.Boot.__cast(t,b.dynamics.joints.B2MouseJointDef));break;case 2:e=new b.dynamics.joints.B2PrismaticJoint(A.Boot.__cast(t,b.dynamics.joints.B2PrismaticJointDef));break;case 1:e=new b.dynamics.joints.B2RevoluteJoint(A.Boot.__cast(t,b.dynamics.joints.B2RevoluteJointDef));break;case 4:e=new b.dynamics.joints.B2PulleyJoint(A.Boot.__cast(t,b.dynamics.joints.B2PulleyJointDef));break;case 6:e=new b.dynamics.joints.B2GearJoint(A.Boot.__cast(t,b.dynamics.joints.B2GearJointDef));break;case 7:e=new b.dynamics.joints.B2LineJoint(A.Boot.__cast(t,b.dynamics.joints.B2LineJointDef));break;case 8:e=new b.dynamics.joints.B2WeldJoint(A.Boot.__cast(t,b.dynamics.joints.B2WeldJointDef));break;case 9:e=new b.dynamics.joints.B2FrictionJoint(A.Boot.__cast(t,b.dynamics.joints.B2FrictionJointDef))}return e},b.dynamics.joints.B2Joint.destroy=function(){},b.dynamics.joints.B2Joint.prototype={solvePositionConstraints:function(){return!1},finalizeVelocityConstraints:function(){},solveVelocityConstraints:function(){},initVelocityConstraints:function(){},isActive:function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},setUserData:function(t){this.m_userData=t},getUserData:function(){return this.m_userData},getNext:function(){return this.m_next},getBodyB:function(){return this.m_bodyB},getBodyA:function(){return this.m_bodyA},getReactionTorque:function(){return 0},getReactionForce:function(){return null},getAnchorB:function(){return null},getAnchorA:function(){return null},getType:function(){return this.m_type},__class__:b.dynamics.joints.B2Joint},b.dynamics.joints.B2DistanceJoint=function(t){b.dynamics.joints.B2Joint.call(this,t),this.m_localAnchor1=new b.common.math.B2Vec2,this.m_localAnchor2=new b.common.math.B2Vec2,this.m_u=new b.common.math.B2Vec2;this.m_localAnchor1.setV(t.localAnchorA),this.m_localAnchor2.setV(t.localAnchorB),this.m_length=t.length,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0},i["box2D.dynamics.joints.B2DistanceJoint"]=b.dynamics.joints.B2DistanceJoint,b.dynamics.joints.B2DistanceJoint.__name__=["box2D","dynamics","joints","B2DistanceJoint"],b.dynamics.joints.B2DistanceJoint.__super__=b.dynamics.joints.B2Joint,b.dynamics.joints.B2DistanceJoint.prototype=t(b.dynamics.joints.B2Joint.prototype,{solvePositionConstraints:function(){var t;if(this.m_frequencyHz>0)return!0;var e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,s=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*n+t.col2.x*s;s=t.col1.y*n+t.col2.y*s,n=o,t=i.m_xf.R;var a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,r=this.m_localAnchor2.y-i.m_sweep.localCenter.y;o=t.col1.x*a+t.col2.x*r,r=t.col1.y*a+t.col2.y*r,a=o;var l=i.m_sweep.c.x+a-e.m_sweep.c.x-n,m=i.m_sweep.c.y+r-e.m_sweep.c.y-s,c=Math.sqrt(l*l+m*m);l/=c,m/=c;var _=c-this.m_length;_=b.common.math.B2Math.clamp(_,-b.common.B2Settings.b2_maxLinearCorrection,b.common.B2Settings.b2_maxLinearCorrection);var h=-this.m_mass*_;this.m_u.set(l,m);var u=h*this.m_u.x,y=h*this.m_u.y;return e.m_sweep.c.x-=e.m_invMass*u,e.m_sweep.c.y-=e.m_invMass*y,e.m_sweep.a-=e.m_invI*(n*y-s*u),i.m_sweep.c.x+=i.m_invMass*u,i.m_sweep.c.y+=i.m_invMass*y,i.m_sweep.a+=i.m_invI*(a*y-r*u),e.synchronizeTransform(),i.synchronizeTransform(),b.common.math.B2Math.abs(_)<b.common.B2Settings.b2_linearSlop},solveVelocityConstraints:function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,s=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*n+t.col2.x*s;s=t.col1.y*n+t.col2.y*s,n=o,t=i.m_xf.R;var a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,r=this.m_localAnchor2.y-i.m_sweep.localCenter.y;o=t.col1.x*a+t.col2.x*r,r=t.col1.y*a+t.col2.y*r,a=o;var l=e.m_linearVelocity.x+-e.m_angularVelocity*s,m=e.m_linearVelocity.y+e.m_angularVelocity*n,c=i.m_linearVelocity.x+-i.m_angularVelocity*r,_=i.m_linearVelocity.y+i.m_angularVelocity*a,h=this.m_u.x*(c-l)+this.m_u.y*(_-m),u=-this.m_mass*(h+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=u;var y=u*this.m_u.x,d=u*this.m_u.y;e.m_linearVelocity.x-=e.m_invMass*y,e.m_linearVelocity.y-=e.m_invMass*d,e.m_angularVelocity-=e.m_invI*(n*d-s*y),i.m_linearVelocity.x+=i.m_invMass*y,i.m_linearVelocity.y+=i.m_invMass*d,i.m_angularVelocity+=i.m_invI*(a*d-r*y)},initVelocityConstraints:function(t){var e,i,n=this.m_bodyA,s=this.m_bodyB;e=n.m_xf.R;var o=this.m_localAnchor1.x-n.m_sweep.localCenter.x,a=this.m_localAnchor1.y-n.m_sweep.localCenter.y;i=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=i,e=s.m_xf.R;var r=this.m_localAnchor2.x-s.m_sweep.localCenter.x,l=this.m_localAnchor2.y-s.m_sweep.localCenter.y;i=e.col1.x*r+e.col2.x*l,l=e.col1.y*r+e.col2.y*l,r=i,this.m_u.x=s.m_sweep.c.x+r-n.m_sweep.c.x-o,this.m_u.y=s.m_sweep.c.y+l-n.m_sweep.c.y-a;var m=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);m>b.common.B2Settings.b2_linearSlop?this.m_u.multiply(1/m):this.m_u.setZero();var c=o*this.m_u.y-a*this.m_u.x,_=r*this.m_u.y-l*this.m_u.x,h=n.m_invMass+n.m_invI*c*c+s.m_invMass+s.m_invI*_*_;if(this.m_mass=0!=h?1/h:0,this.m_frequencyHz>0){var u=m-this.m_length,y=2*Math.PI*this.m_frequencyHz,d=2*this.m_mass*this.m_dampingRatio*y,p=this.m_mass*y*y;this.m_gamma=t.dt*(d+t.dt*p),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=u*t.dt*p*this.m_gamma,this.m_mass=h+this.m_gamma,this.m_mass=0!=this.m_mass?1/this.m_mass:0}if(t.warmStarting){this.m_impulse*=t.dtRatio;var g=this.m_impulse*this.m_u.x,f=this.m_impulse*this.m_u.y;n.m_linearVelocity.x-=n.m_invMass*g,n.m_linearVelocity.y-=n.m_invMass*f,n.m_angularVelocity-=n.m_invI*(o*f-a*g),s.m_linearVelocity.x+=s.m_invMass*g,s.m_linearVelocity.y+=s.m_invMass*f,s.m_angularVelocity+=s.m_invI*(r*f-l*g)}else this.m_impulse=0},setDampingRatio:function(t){this.m_dampingRatio=t},getDampingRatio:function(){return this.m_dampingRatio},setFrequency:function(t){this.m_frequencyHz=t},getFrequency:function(){return this.m_frequencyHz},setLength:function(t){this.m_length=t},getLength:function(){return this.m_length},getReactionTorque:function(){return 0},getReactionForce:function(t){return new b.common.math.B2Vec2(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)},getAnchorB:function(){return this.m_bodyB.getWorldPoint(this.m_localAnchor2)},getAnchorA:function(){return this.m_bodyA.getWorldPoint(this.m_localAnchor1)},__class__:b.dynamics.joints.B2DistanceJoint}),b.dynamics.joints.B2JointDef=function(){this.type=b.dynamics.joints.B2JointType.UNKNOWN_JOINT,this.userData=null,this.bodyA=null,this.bodyB=null,this.collideConnected=!1},i["box2D.dynamics.joints.B2JointDef"]=b.dynamics.joints.B2JointDef,b.dynamics.joints.B2JointDef.__name__=["box2D","dynamics","joints","B2JointDef"],b.dynamics.joints.B2JointDef.prototype={__class__:b.dynamics.joints.B2JointDef},b.dynamics.joints.B2DistanceJointDef=function(){b.dynamics.joints.B2JointDef.call(this),this.localAnchorA=new b.common.math.B2Vec2,this.localAnchorB=new b.common.math.B2Vec2,this.type=b.dynamics.joints.B2JointType.DISTANCE_JOINT,this.length=1,this.frequencyHz=0,this.dampingRatio=0},i["box2D.dynamics.joints.B2DistanceJointDef"]=b.dynamics.joints.B2DistanceJointDef,b.dynamics.joints.B2DistanceJointDef.__name__=["box2D","dynamics","joints","B2DistanceJointDef"],b.dynamics.joints.B2DistanceJointDef.__super__=b.dynamics.joints.B2JointDef,b.dynamics.joints.B2DistanceJointDef.prototype=t(b.dynamics.joints.B2JointDef.prototype,{initialize:function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA.setV(this.bodyA.getLocalPoint(i)),this.localAnchorB.setV(this.bodyB.getLocalPoint(n));var s=n.x-i.x,o=n.y-i.y;this.length=Math.sqrt(s*s+o*o),this.frequencyHz=0,this.dampingRatio=0},__class__:b.dynamics.joints.B2DistanceJointDef}),b.dynamics.joints.B2FrictionJoint=function(t){b.dynamics.joints.B2Joint.call(this,t),this.m_localAnchorA=new b.common.math.B2Vec2,this.m_localAnchorB=new b.common.math.B2Vec2,this.m_linearMass=new b.common.math.B2Mat22,this.m_linearImpulse=new b.common.math.B2Vec2,this.m_localAnchorA.setV(t.localAnchorA),this.m_localAnchorB.setV(t.localAnchorB),this.m_linearMass.setZero(),this.m_angularMass=0,this.m_linearImpulse.setZero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque},i["box2D.dynamics.joints.B2FrictionJoint"]=b.dynamics.joints.B2FrictionJoint,b.dynamics.joints.B2FrictionJoint.__name__=["box2D","dynamics","joints","B2FrictionJoint"],b.dynamics.joints.B2FrictionJoint.__super__=b.dynamics.joints.B2Joint,b.dynamics.joints.B2FrictionJoint.prototype=t(b.dynamics.joints.B2Joint.prototype,{solvePositionConstraints:function(){return!0},solveVelocityConstraints:function(t){var e,i,n=this.m_bodyA,s=this.m_bodyB,o=n.m_linearVelocity,a=n.m_angularVelocity,r=s.m_linearVelocity,l=s.m_angularVelocity,m=n.m_invMass,c=s.m_invMass,_=n.m_invI,h=s.m_invI;e=n.m_xf.R;var u=this.m_localAnchorA.x-n.m_sweep.localCenter.x,y=this.m_localAnchorA.y-n.m_sweep.localCenter.y;i=e.col1.x*u+e.col2.x*y,y=e.col1.y*u+e.col2.y*y,u=i,e=s.m_xf.R;var d=this.m_localAnchorB.x-s.m_sweep.localCenter.x,p=this.m_localAnchorB.y-s.m_sweep.localCenter.y;i=e.col1.x*d+e.col2.x*p,p=e.col1.y*d+e.col2.y*p,d=i;var g,f=l-a,x=-this.m_angularMass*f,B=this.m_angularImpulse;g=t.dt*this.m_maxTorque,this.m_angularImpulse=b.common.math.B2Math.clamp(this.m_angularImpulse+x,-g,g),x=this.m_angularImpulse-B,a-=_*x,l+=h*x;var v=r.x-l*p-o.x+a*y,w=r.y+l*d-o.y-a*u,A=b.common.math.B2Math.mulMV(this.m_linearMass,new b.common.math.B2Vec2(-v,-w)),S=this.m_linearImpulse.copy();this.m_linearImpulse.add(A),g=t.dt*this.m_maxForce,this.m_linearImpulse.lengthSquared()>g*g&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.multiply(g)),A=b.common.math.B2Math.subtractVV(this.m_linearImpulse,S),o.x-=m*A.x,o.y-=m*A.y,a-=_*(u*A.y-y*A.x),r.x+=c*A.x,r.y+=c*A.y,l+=h*(d*A.y-p*A.x),n.m_angularVelocity=a,s.m_angularVelocity=l},initVelocityConstraints:function(t){var e,i,n=this.m_bodyA,s=this.m_bodyB;e=n.m_xf.R;var o=this.m_localAnchorA.x-n.m_sweep.localCenter.x,a=this.m_localAnchorA.y-n.m_sweep.localCenter.y;i=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=i,e=s.m_xf.R;var r=this.m_localAnchorB.x-s.m_sweep.localCenter.x,l=this.m_localAnchorB.y-s.m_sweep.localCenter.y;i=e.col1.x*r+e.col2.x*l,l=e.col1.y*r+e.col2.y*l,r=i;var m=n.m_invMass,c=s.m_invMass,_=n.m_invI,h=s.m_invI,u=new b.common.math.B2Mat22;if(u.col1.x=m+c,u.col2.x=0,u.col1.y=0,u.col2.y=m+c,u.col1.x+=_*a*a,u.col2.x+=-_*o*a,u.col1.y+=-_*o*a,u.col2.y+=_*o*o,u.col1.x+=h*l*l,u.col2.x+=-h*r*l,u.col1.y+=-h*r*l,u.col2.y+=h*r*r,u.getInverse(this.m_linearMass),this.m_angularMass=_+h,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.x*=t.dtRatio,this.m_linearImpulse.y*=t.dtRatio,this.m_angularImpulse*=t.dtRatio;var y=this.m_linearImpulse;n.m_linearVelocity.x-=m*y.x,n.m_linearVelocity.y-=m*y.y,n.m_angularVelocity-=_*(o*y.y-a*y.x+this.m_angularImpulse),s.m_linearVelocity.x+=c*y.x,s.m_linearVelocity.y+=c*y.y,s.m_angularVelocity+=h*(r*y.y-l*y.x+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0},getMaxTorque:function(){return this.m_maxTorque},setMaxTorque:function(t){this.m_maxTorque=t},getMaxForce:function(){return this.m_maxForce},setMaxForce:function(t){this.m_maxForce=t},getReactionTorque:function(t){return t*this.m_angularImpulse},getReactionForce:function(t){return new b.common.math.B2Vec2(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)},getAnchorB:function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},getAnchorA:function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},__class__:b.dynamics.joints.B2FrictionJoint}),b.dynamics.joints.B2FrictionJointDef=function(){b.dynamics.joints.B2JointDef.call(this),this.localAnchorA=new b.common.math.B2Vec2,this.localAnchorB=new b.common.math.B2Vec2,this.type=b.dynamics.joints.B2JointType.FRICTION_JOINT,this.maxForce=0,this.maxTorque=0},i["box2D.dynamics.joints.B2FrictionJointDef"]=b.dynamics.joints.B2FrictionJointDef,b.dynamics.joints.B2FrictionJointDef.__name__=["box2D","dynamics","joints","B2FrictionJointDef"],b.dynamics.joints.B2FrictionJointDef.__super__=b.dynamics.joints.B2JointDef,b.dynamics.joints.B2FrictionJointDef.prototype=t(b.dynamics.joints.B2JointDef.prototype,{initialize:function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.setV(this.bodyA.getLocalPoint(i)),this.localAnchorB.setV(this.bodyB.getLocalPoint(i))},__class__:b.dynamics.joints.B2FrictionJointDef}),b.dynamics.joints.B2GearJoint=function(t){b.dynamics.joints.B2Joint.call(this,t),this.m_groundAnchor1=new b.common.math.B2Vec2,this.m_groundAnchor2=new b.common.math.B2Vec2,this.m_localAnchor1=new b.common.math.B2Vec2,this.m_localAnchor2=new b.common.math.B2Vec2,this.m_J=new b.dynamics.joints.B2Jacobian;var e=t.joint1.m_type,i=t.joint2.m_type;this.m_revolute1=null,this.m_prismatic1=null,this.m_revolute2=null,this.m_prismatic2=null;var n,s;this.m_ground1=t.joint1.getBodyA(),this.m_bodyA=t.joint1.getBodyB(),e==b.dynamics.joints.B2JointType.REVOLUTE_JOINT?(this.m_revolute1=A.Boot.__cast(t.joint1,b.dynamics.joints.B2RevoluteJoint),this.m_groundAnchor1.setV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.setV(this.m_revolute1.m_localAnchor2),n=this.m_revolute1.getJointAngle()):(this.m_prismatic1=A.Boot.__cast(t.joint1,b.dynamics.joints.B2PrismaticJoint),this.m_groundAnchor1.setV(this.m_prismatic1.m_localAnchor1),this.m_localAnchor1.setV(this.m_prismatic1.m_localAnchor2),n=this.m_prismatic1.getJointTranslation()),this.m_ground2=t.joint2.getBodyA(),this.m_bodyB=t.joint2.getBodyB(),i==b.dynamics.joints.B2JointType.REVOLUTE_JOINT?(this.m_revolute2=A.Boot.__cast(t.joint2,b.dynamics.joints.B2RevoluteJoint),this.m_groundAnchor2.setV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.setV(this.m_revolute2.m_localAnchor2),s=this.m_revolute2.getJointAngle()):(this.m_prismatic2=A.Boot.__cast(t.joint2,b.dynamics.joints.B2PrismaticJoint),this.m_groundAnchor2.setV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.setV(this.m_prismatic2.m_localAnchor2),s=this.m_prismatic2.getJointTranslation()),this.m_ratio=t.ratio,this.m_constant=n+this.m_ratio*s,this.m_impulse=0},i["box2D.dynamics.joints.B2GearJoint"]=b.dynamics.joints.B2GearJoint,b.dynamics.joints.B2GearJoint.__name__=["box2D","dynamics","joints","B2GearJoint"],b.dynamics.joints.B2GearJoint.__super__=b.dynamics.joints.B2Joint,b.dynamics.joints.B2GearJoint.prototype=t(b.dynamics.joints.B2Joint.prototype,{solvePositionConstraints:function(){var t,e,i=0,n=this.m_bodyA,s=this.m_bodyB;t=null!=this.m_revolute1?this.m_revolute1.getJointAngle():this.m_prismatic1.getJointTranslation(),e=null!=this.m_revolute2?this.m_revolute2.getJointAngle():this.m_prismatic2.getJointTranslation();var o=this.m_constant-(t+this.m_ratio*e),a=-this.m_mass*o;return n.m_sweep.c.x+=n.m_invMass*a*this.m_J.linearA.x,n.m_sweep.c.y+=n.m_invMass*a*this.m_J.linearA.y,n.m_sweep.a+=n.m_invI*a*this.m_J.angularA,s.m_sweep.c.x+=s.m_invMass*a*this.m_J.linearB.x,s.m_sweep.c.y+=s.m_invMass*a*this.m_J.linearB.y,s.m_sweep.a+=s.m_invI*a*this.m_J.angularB,n.synchronizeTransform(),s.synchronizeTransform(),i<b.common.B2Settings.b2_linearSlop},solveVelocityConstraints:function(){var t=this.m_bodyA,e=this.m_bodyB,i=this.m_J.compute(t.m_linearVelocity,t.m_angularVelocity,e.m_linearVelocity,e.m_angularVelocity),n=-this.m_mass*i;this.m_impulse+=n,t.m_linearVelocity.x+=t.m_invMass*n*this.m_J.linearA.x,t.m_linearVelocity.y+=t.m_invMass*n*this.m_J.linearA.y,t.m_angularVelocity+=t.m_invI*n*this.m_J.angularA,e.m_linearVelocity.x+=e.m_invMass*n*this.m_J.linearB.x,e.m_linearVelocity.y+=e.m_invMass*n*this.m_J.linearB.y,e.m_angularVelocity+=e.m_invI*n*this.m_J.angularB},initVelocityConstraints:function(t){var e,i,n,s,o,a,r,l,m=this.m_ground1,c=this.m_ground2,_=this.m_bodyA,h=this.m_bodyB,u=0;this.m_J.setZero(),null!=this.m_revolute1?(this.m_J.angularA=-1,u+=_.m_invI):(o=m.m_xf.R,a=this.m_prismatic1.m_localXAxis1,e=o.col1.x*a.x+o.col2.x*a.y,i=o.col1.y*a.x+o.col2.y*a.y,o=_.m_xf.R,n=this.m_localAnchor1.x-_.m_sweep.localCenter.x,s=this.m_localAnchor1.y-_.m_sweep.localCenter.y,l=o.col1.x*n+o.col2.x*s,s=o.col1.y*n+o.col2.y*s,n=l,r=n*i-s*e,this.m_J.linearA.set(-e,-i),this.m_J.angularA=-r,u+=_.m_invMass+_.m_invI*r*r),null!=this.m_revolute2?(this.m_J.angularB=-this.m_ratio,u+=this.m_ratio*this.m_ratio*h.m_invI):(o=c.m_xf.R,a=this.m_prismatic2.m_localXAxis1,e=o.col1.x*a.x+o.col2.x*a.y,i=o.col1.y*a.x+o.col2.y*a.y,o=h.m_xf.R,n=this.m_localAnchor2.x-h.m_sweep.localCenter.x,s=this.m_localAnchor2.y-h.m_sweep.localCenter.y,l=o.col1.x*n+o.col2.x*s,s=o.col1.y*n+o.col2.y*s,n=l,r=n*i-s*e,this.m_J.linearB.set(-this.m_ratio*e,-this.m_ratio*i),this.m_J.angularB=-this.m_ratio*r,u+=this.m_ratio*this.m_ratio*(h.m_invMass+h.m_invI*r*r)),this.m_mass=u>0?1/u:0,t.warmStarting?(_.m_linearVelocity.x+=_.m_invMass*this.m_impulse*this.m_J.linearA.x,_.m_linearVelocity.y+=_.m_invMass*this.m_impulse*this.m_J.linearA.y,_.m_angularVelocity+=_.m_invI*this.m_impulse*this.m_J.angularA,h.m_linearVelocity.x+=h.m_invMass*this.m_impulse*this.m_J.linearB.x,h.m_linearVelocity.y+=h.m_invMass*this.m_impulse*this.m_J.linearB.y,h.m_angularVelocity+=h.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},setRatio:function(t){this.m_ratio=t},getRatio:function(){return this.m_ratio},getReactionTorque:function(t){var e=this.m_bodyB.m_xf.R,i=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,n=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,s=e.col1.x*i+e.col2.x*n;n=e.col1.y*i+e.col2.y*n,i=s;var o=this.m_impulse*this.m_J.linearB.x,a=this.m_impulse*this.m_J.linearB.y;return t*(this.m_impulse*this.m_J.angularB-i*a+n*o)},getReactionForce:function(t){return new b.common.math.B2Vec2(t*this.m_impulse*this.m_J.linearB.x,t*this.m_impulse*this.m_J.linearB.y)},getAnchorB:function(){return this.m_bodyB.getWorldPoint(this.m_localAnchor2)},getAnchorA:function(){return this.m_bodyA.getWorldPoint(this.m_localAnchor1)},__class__:b.dynamics.joints.B2GearJoint}),b.dynamics.joints.B2GearJointDef=function(){b.dynamics.joints.B2JointDef.call(this),this.type=b.dynamics.joints.B2JointType.GEAR_JOINT,this.joint1=null,this.joint2=null,this.ratio=1
},i["box2D.dynamics.joints.B2GearJointDef"]=b.dynamics.joints.B2GearJointDef,b.dynamics.joints.B2GearJointDef.__name__=["box2D","dynamics","joints","B2GearJointDef"],b.dynamics.joints.B2GearJointDef.__super__=b.dynamics.joints.B2JointDef,b.dynamics.joints.B2GearJointDef.prototype=t(b.dynamics.joints.B2JointDef.prototype,{__class__:b.dynamics.joints.B2GearJointDef}),b.dynamics.joints.B2Jacobian=function(){this.linearA=new b.common.math.B2Vec2,this.linearB=new b.common.math.B2Vec2},i["box2D.dynamics.joints.B2Jacobian"]=b.dynamics.joints.B2Jacobian,b.dynamics.joints.B2Jacobian.__name__=["box2D","dynamics","joints","B2Jacobian"],b.dynamics.joints.B2Jacobian.prototype={compute:function(t,e,i,n){return this.linearA.x*t.x+this.linearA.y*t.y+this.angularA*e+(this.linearB.x*i.x+this.linearB.y*i.y)+this.angularB*n},set:function(t,e,i,n){this.linearA.setV(t),this.angularA=e,this.linearB.setV(i),this.angularB=n},setZero:function(){this.linearA.setZero(),this.angularA=0,this.linearB.setZero(),this.angularB=0},__class__:b.dynamics.joints.B2Jacobian},b.dynamics.joints.B2JointEdge=function(){},i["box2D.dynamics.joints.B2JointEdge"]=b.dynamics.joints.B2JointEdge,b.dynamics.joints.B2JointEdge.__name__=["box2D","dynamics","joints","B2JointEdge"],b.dynamics.joints.B2JointEdge.prototype={__class__:b.dynamics.joints.B2JointEdge},b.dynamics.joints.B2JointType=i["box2D.dynamics.joints.B2JointType"]={__ename__:!0,__constructs__:["UNKNOWN_JOINT","REVOLUTE_JOINT","PRISMATIC_JOINT","DISTANCE_JOINT","PULLEY_JOINT","MOUSE_JOINT","GEAR_JOINT","LINE_JOINT","WELD_JOINT","FRICTION_JOINT"]},b.dynamics.joints.B2JointType.UNKNOWN_JOINT=["UNKNOWN_JOINT",0],b.dynamics.joints.B2JointType.UNKNOWN_JOINT.toString=n,b.dynamics.joints.B2JointType.UNKNOWN_JOINT.__enum__=b.dynamics.joints.B2JointType,b.dynamics.joints.B2JointType.REVOLUTE_JOINT=["REVOLUTE_JOINT",1],b.dynamics.joints.B2JointType.REVOLUTE_JOINT.toString=n,b.dynamics.joints.B2JointType.REVOLUTE_JOINT.__enum__=b.dynamics.joints.B2JointType,b.dynamics.joints.B2JointType.PRISMATIC_JOINT=["PRISMATIC_JOINT",2],b.dynamics.joints.B2JointType.PRISMATIC_JOINT.toString=n,b.dynamics.joints.B2JointType.PRISMATIC_JOINT.__enum__=b.dynamics.joints.B2JointType,b.dynamics.joints.B2JointType.DISTANCE_JOINT=["DISTANCE_JOINT",3],b.dynamics.joints.B2JointType.DISTANCE_JOINT.toString=n,b.dynamics.joints.B2JointType.DISTANCE_JOINT.__enum__=b.dynamics.joints.B2JointType,b.dynamics.joints.B2JointType.PULLEY_JOINT=["PULLEY_JOINT",4],b.dynamics.joints.B2JointType.PULLEY_JOINT.toString=n,b.dynamics.joints.B2JointType.PULLEY_JOINT.__enum__=b.dynamics.joints.B2JointType,b.dynamics.joints.B2JointType.MOUSE_JOINT=["MOUSE_JOINT",5],b.dynamics.joints.B2JointType.MOUSE_JOINT.toString=n,b.dynamics.joints.B2JointType.MOUSE_JOINT.__enum__=b.dynamics.joints.B2JointType,b.dynamics.joints.B2JointType.GEAR_JOINT=["GEAR_JOINT",6],b.dynamics.joints.B2JointType.GEAR_JOINT.toString=n,b.dynamics.joints.B2JointType.GEAR_JOINT.__enum__=b.dynamics.joints.B2JointType,b.dynamics.joints.B2JointType.LINE_JOINT=["LINE_JOINT",7],b.dynamics.joints.B2JointType.LINE_JOINT.toString=n,b.dynamics.joints.B2JointType.LINE_JOINT.__enum__=b.dynamics.joints.B2JointType,b.dynamics.joints.B2JointType.WELD_JOINT=["WELD_JOINT",8],b.dynamics.joints.B2JointType.WELD_JOINT.toString=n,b.dynamics.joints.B2JointType.WELD_JOINT.__enum__=b.dynamics.joints.B2JointType,b.dynamics.joints.B2JointType.FRICTION_JOINT=["FRICTION_JOINT",9],b.dynamics.joints.B2JointType.FRICTION_JOINT.toString=n,b.dynamics.joints.B2JointType.FRICTION_JOINT.__enum__=b.dynamics.joints.B2JointType,b.dynamics.joints.B2LimitState=i["box2D.dynamics.joints.B2LimitState"]={__ename__:!0,__constructs__:["INACTIVE_LIMIT","AT_LOWER_LIMIT","AT_UPPER_LIMIT","EQUAL_LIMITS"]},b.dynamics.joints.B2LimitState.INACTIVE_LIMIT=["INACTIVE_LIMIT",0],b.dynamics.joints.B2LimitState.INACTIVE_LIMIT.toString=n,b.dynamics.joints.B2LimitState.INACTIVE_LIMIT.__enum__=b.dynamics.joints.B2LimitState,b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT=["AT_LOWER_LIMIT",1],b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT.toString=n,b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT.__enum__=b.dynamics.joints.B2LimitState,b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT=["AT_UPPER_LIMIT",2],b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT.toString=n,b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT.__enum__=b.dynamics.joints.B2LimitState,b.dynamics.joints.B2LimitState.EQUAL_LIMITS=["EQUAL_LIMITS",3],b.dynamics.joints.B2LimitState.EQUAL_LIMITS.toString=n,b.dynamics.joints.B2LimitState.EQUAL_LIMITS.__enum__=b.dynamics.joints.B2LimitState,b.dynamics.joints.B2LineJoint=function(t){b.dynamics.joints.B2Joint.call(this,t),this.m_localAnchor1=new b.common.math.B2Vec2,this.m_localAnchor2=new b.common.math.B2Vec2,this.m_localXAxis1=new b.common.math.B2Vec2,this.m_localYAxis1=new b.common.math.B2Vec2,this.m_axis=new b.common.math.B2Vec2,this.m_perp=new b.common.math.B2Vec2,this.m_K=new b.common.math.B2Mat22,this.m_impulse=new b.common.math.B2Vec2;this.m_localAnchor1.setV(t.localAnchorA),this.m_localAnchor2.setV(t.localAnchorB),this.m_localXAxis1.setV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_impulse.setZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT,this.m_axis.setZero(),this.m_perp.setZero()},i["box2D.dynamics.joints.B2LineJoint"]=b.dynamics.joints.B2LineJoint,b.dynamics.joints.B2LineJoint.__name__=["box2D","dynamics","joints","B2LineJoint"],b.dynamics.joints.B2LineJoint.__super__=b.dynamics.joints.B2Joint,b.dynamics.joints.B2LineJoint.prototype=t(b.dynamics.joints.B2Joint.prototype,{solvePositionConstraints:function(){var t,e,i,n,s,o,a=this.m_bodyA,r=this.m_bodyB,l=a.m_sweep.c,m=a.m_sweep.a,c=r.m_sweep.c,_=r.m_sweep.a,h=0,u=0,y=!1,d=0,p=b.common.math.B2Mat22.fromAngle(m),g=b.common.math.B2Mat22.fromAngle(_);t=p;var f=this.m_localAnchor1.x-this.m_localCenterA.x,x=this.m_localAnchor1.y-this.m_localCenterA.y;e=t.col1.x*f+t.col2.x*x,x=t.col1.y*f+t.col2.y*x,f=e,t=g;var B=this.m_localAnchor2.x-this.m_localCenterB.x,v=this.m_localAnchor2.y-this.m_localCenterB.y;e=t.col1.x*B+t.col2.x*v,v=t.col1.y*B+t.col2.y*v,B=e;var w=c.x+B-l.x-f,A=c.y+v-l.y-x;if(this.m_enableLimit){this.m_axis=b.common.math.B2Math.mulMV(p,this.m_localXAxis1),this.m_a1=(w+f)*this.m_axis.y-(A+x)*this.m_axis.x,this.m_a2=B*this.m_axis.y-v*this.m_axis.x;var S=this.m_axis.x*w+this.m_axis.y*A;b.common.math.B2Math.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*b.common.B2Settings.b2_linearSlop?(d=b.common.math.B2Math.clamp(S,-b.common.B2Settings.b2_maxLinearCorrection,b.common.B2Settings.b2_maxLinearCorrection),h=b.common.math.B2Math.abs(S),y=!0):S<=this.m_lowerTranslation?(d=b.common.math.B2Math.clamp(S-this.m_lowerTranslation+b.common.B2Settings.b2_linearSlop,-b.common.B2Settings.b2_maxLinearCorrection,0),h=this.m_lowerTranslation-S,y=!0):S>=this.m_upperTranslation&&(d=b.common.math.B2Math.clamp(S-this.m_upperTranslation+b.common.B2Settings.b2_linearSlop,0,b.common.B2Settings.b2_maxLinearCorrection),h=S-this.m_upperTranslation,y=!0)}this.m_perp=b.common.math.B2Math.mulMV(p,this.m_localYAxis1),this.m_s1=(w+f)*this.m_perp.y-(A+x)*this.m_perp.x,this.m_s2=B*this.m_perp.y-v*this.m_perp.x;var L=new b.common.math.B2Vec2,M=this.m_perp.x*w+this.m_perp.y*A;if(h=b.common.math.B2Math.max(h,b.common.math.B2Math.abs(M)),u=0,y)i=this.m_invMassA,n=this.m_invMassB,s=this.m_invIA,o=this.m_invIB,this.m_K.col1.x=i+n+s*this.m_s1*this.m_s1+o*this.m_s2*this.m_s2,this.m_K.col1.y=s*this.m_s1*this.m_a1+o*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=i+n+s*this.m_a1*this.m_a1+o*this.m_a2*this.m_a2,this.m_K.solve(L,-M,-d);else{i=this.m_invMassA,n=this.m_invMassB,s=this.m_invIA,o=this.m_invIB;var C,T=i+n+s*this.m_s1*this.m_s1+o*this.m_s2*this.m_s2;C=0!=T?-M/T:0,L.x=C,L.y=0}var I=L.x*this.m_perp.x+L.y*this.m_axis.x,D=L.x*this.m_perp.y+L.y*this.m_axis.y,V=L.x*this.m_s1+L.y*this.m_a1,E=L.x*this.m_s2+L.y*this.m_a2;return l.x-=this.m_invMassA*I,l.y-=this.m_invMassA*D,m-=this.m_invIA*V,c.x+=this.m_invMassB*I,c.y+=this.m_invMassB*D,_+=this.m_invIB*E,a.m_sweep.a=m,r.m_sweep.a=_,a.synchronizeTransform(),r.synchronizeTransform(),h<=b.common.B2Settings.b2_linearSlop&&u<=b.common.B2Settings.b2_angularSlop},solveVelocityConstraints:function(t){var e,i,n,s,o=this.m_bodyA,a=this.m_bodyB,r=o.m_linearVelocity,l=o.m_angularVelocity,m=a.m_linearVelocity,c=a.m_angularVelocity;if(this.m_enableMotor&&this.m_limitState!=b.dynamics.joints.B2LimitState.EQUAL_LIMITS){var _=this.m_axis.x*(m.x-r.x)+this.m_axis.y*(m.y-r.y)+this.m_a2*c-this.m_a1*l,h=this.m_motorMass*(this.m_motorSpeed-_),u=this.m_motorImpulse,y=t.dt*this.m_maxMotorForce;this.m_motorImpulse=b.common.math.B2Math.clamp(this.m_motorImpulse+h,-y,y),h=this.m_motorImpulse-u,e=h*this.m_axis.x,i=h*this.m_axis.y,n=h*this.m_a1,s=h*this.m_a2,r.x-=this.m_invMassA*e,r.y-=this.m_invMassA*i,l-=this.m_invIA*n,m.x+=this.m_invMassB*e,m.y+=this.m_invMassB*i,c+=this.m_invIB*s}var d=this.m_perp.x*(m.x-r.x)+this.m_perp.y*(m.y-r.y)+this.m_s2*c-this.m_s1*l;if(this.m_enableLimit&&this.m_limitState!=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT){var p=this.m_axis.x*(m.x-r.x)+this.m_axis.y*(m.y-r.y)+this.m_a2*c-this.m_a1*l,g=this.m_impulse.copy(),f=this.m_K.solve(new b.common.math.B2Vec2,-d,-p);this.m_impulse.add(f),this.m_limitState==b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT?this.m_impulse.y=b.common.math.B2Math.max(this.m_impulse.y,0):this.m_limitState==b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(this.m_impulse.y=b.common.math.B2Math.min(this.m_impulse.y,0));var x,B=-d-(this.m_impulse.y-g.y)*this.m_K.col2.x;x=0!=this.m_K.col1.x?B/this.m_K.col1.x+g.x:g.x,this.m_impulse.x=x,f.x=this.m_impulse.x-g.x,f.y=this.m_impulse.y-g.y,e=f.x*this.m_perp.x+f.y*this.m_axis.x,i=f.x*this.m_perp.y+f.y*this.m_axis.y,n=f.x*this.m_s1+f.y*this.m_a1,s=f.x*this.m_s2+f.y*this.m_a2,r.x-=this.m_invMassA*e,r.y-=this.m_invMassA*i,l-=this.m_invIA*n,m.x+=this.m_invMassB*e,m.y+=this.m_invMassB*i,c+=this.m_invIB*s}else{var v;v=0!=this.m_K.col1.x?-d/this.m_K.col1.x:0,this.m_impulse.x+=v,e=v*this.m_perp.x,i=v*this.m_perp.y,n=v*this.m_s1,s=v*this.m_s2,r.x-=this.m_invMassA*e,r.y-=this.m_invMassA*i,l-=this.m_invIA*n,m.x+=this.m_invMassB*e,m.y+=this.m_invMassB*i,c+=this.m_invIB*s}o.m_linearVelocity.setV(r),o.m_angularVelocity=l,a.m_linearVelocity.setV(m),a.m_angularVelocity=c},initVelocityConstraints:function(t){var e,i,n=this.m_bodyA,s=this.m_bodyB;this.m_localCenterA.setV(n.getLocalCenter()),this.m_localCenterB.setV(s.getLocalCenter());{var o=n.getTransform();s.getTransform()}e=n.m_xf.R;var a=this.m_localAnchor1.x-this.m_localCenterA.x,r=this.m_localAnchor1.y-this.m_localCenterA.y;i=e.col1.x*a+e.col2.x*r,r=e.col1.y*a+e.col2.y*r,a=i,e=s.m_xf.R;var l=this.m_localAnchor2.x-this.m_localCenterB.x,m=this.m_localAnchor2.y-this.m_localCenterB.y;i=e.col1.x*l+e.col2.x*m,m=e.col1.y*l+e.col2.y*m,l=i;var c=s.m_sweep.c.x+l-n.m_sweep.c.x-a,_=s.m_sweep.c.y+m-n.m_sweep.c.y-r;this.m_invMassA=n.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=n.m_invI,this.m_invIB=s.m_invI,this.m_axis.setV(b.common.math.B2Math.mulMV(o.R,this.m_localXAxis1)),this.m_a1=(c+a)*this.m_axis.y-(_+r)*this.m_axis.x,this.m_a2=l*this.m_axis.y-m*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0,this.m_perp.setV(b.common.math.B2Math.mulMV(o.R,this.m_localYAxis1)),this.m_s1=(c+a)*this.m_perp.y-(_+r)*this.m_perp.x,this.m_s2=l*this.m_perp.y-m*this.m_perp.x;var h=this.m_invMassA,u=this.m_invMassB,y=this.m_invIA,d=this.m_invIB;if(this.m_K.col1.x=h+u+y*this.m_s1*this.m_s1+d*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1*this.m_a1+d*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=h+u+y*this.m_a1*this.m_a1+d*this.m_a2*this.m_a2,this.m_enableLimit){var p=this.m_axis.x*c+this.m_axis.y*_;b.common.math.B2Math.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*b.common.B2Settings.b2_linearSlop?this.m_limitState=b.dynamics.joints.B2LimitState.EQUAL_LIMITS:p<=this.m_lowerTranslation?this.m_limitState!=b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT&&(this.m_limitState=b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT,this.m_impulse.y=0):p>=this.m_upperTranslation?this.m_limitState!=b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(this.m_limitState=b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT,this.m_impulse.y=0):(this.m_limitState=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT,this.m_impulse.y=0)}else this.m_limitState=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var g=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,f=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,x=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,B=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2;n.m_linearVelocity.x-=this.m_invMassA*g,n.m_linearVelocity.y-=this.m_invMassA*f,n.m_angularVelocity-=this.m_invIA*x,s.m_linearVelocity.x+=this.m_invMassB*g,s.m_linearVelocity.y+=this.m_invMassB*f,s.m_angularVelocity+=this.m_invIB*B}else this.m_impulse.setZero(),this.m_motorImpulse=0},getMotorForce:function(){return this.m_motorImpulse},getMaxMotorForce:function(){return this.m_maxMotorForce},setMaxMotorForce:function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t},getMotorSpeed:function(){return this.m_motorSpeed},setMotorSpeed:function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},enableMotor:function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},isMotorEnabled:function(){return this.m_enableMotor},setLimits:function(t,e){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},getUpperLimit:function(){return this.m_upperTranslation},getLowerLimit:function(){return this.m_lowerTranslation},enableLimit:function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t},isLimitEnabled:function(){return this.m_enableLimit},getJointSpeed:function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,s=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*n+t.col2.x*s;s=t.col1.y*n+t.col2.y*s,n=o,t=i.m_xf.R;var a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,r=this.m_localAnchor2.y-i.m_sweep.localCenter.y;o=t.col1.x*a+t.col2.x*r,r=t.col1.y*a+t.col2.y*r,a=o;var l=e.m_sweep.c.x+n,m=e.m_sweep.c.y+s,c=i.m_sweep.c.x+a,_=i.m_sweep.c.y+r,h=c-l,u=_-m,y=e.getWorldVector(this.m_localXAxis1),d=e.m_linearVelocity,p=i.m_linearVelocity,g=e.m_angularVelocity,f=i.m_angularVelocity,x=h*-g*y.y+u*g*y.x+(y.x*(p.x+-f*r-d.x- -g*s)+y.y*(p.y+f*a-d.y-g*n));return x},getJointTranslation:function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.getWorldPoint(this.m_localAnchor1),n=e.getWorldPoint(this.m_localAnchor2),s=n.x-i.x,o=n.y-i.y,a=t.getWorldVector(this.m_localXAxis1),r=a.x*s+a.y*o;return r},getReactionTorque:function(t){return t*this.m_impulse.y},getReactionForce:function(t){return new b.common.math.B2Vec2(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},getAnchorB:function(){return this.m_bodyB.getWorldPoint(this.m_localAnchor2)},getAnchorA:function(){return this.m_bodyA.getWorldPoint(this.m_localAnchor1)},__class__:b.dynamics.joints.B2LineJoint}),b.dynamics.joints.B2LineJointDef=function(){b.dynamics.joints.B2JointDef.call(this)},i["box2D.dynamics.joints.B2LineJointDef"]=b.dynamics.joints.B2LineJointDef,b.dynamics.joints.B2LineJointDef.__name__=["box2D","dynamics","joints","B2LineJointDef"],b.dynamics.joints.B2LineJointDef.__super__=b.dynamics.joints.B2JointDef,b.dynamics.joints.B2LineJointDef.prototype=t(b.dynamics.joints.B2JointDef.prototype,{initialize:function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.getLocalPoint(i),this.localAnchorB=this.bodyB.getLocalPoint(i),this.localAxisA=this.bodyA.getLocalVector(n)},b2LineJointDef:function(){this.localAnchorA=new b.common.math.B2Vec2,this.localAnchorB=new b.common.math.B2Vec2,this.localAxisA=new b.common.math.B2Vec2,this.type=b.dynamics.joints.B2JointType.LINE_JOINT,this.localAxisA.set(1,0),this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},__class__:b.dynamics.joints.B2LineJointDef}),b.dynamics.joints.B2MouseJoint=function(t){b.dynamics.joints.B2Joint.call(this,t),this.K=new b.common.math.B2Mat22,this.K1=new b.common.math.B2Mat22,this.K2=new b.common.math.B2Mat22,this.m_localAnchor=new b.common.math.B2Vec2,this.m_target=new b.common.math.B2Vec2,this.m_impulse=new b.common.math.B2Vec2,this.m_mass=new b.common.math.B2Mat22,this.m_C=new b.common.math.B2Vec2,this.m_target.setV(t.target);var e=this.m_target.x-this.m_bodyB.m_xf.position.x,i=this.m_target.y-this.m_bodyB.m_xf.position.y,n=this.m_bodyB.m_xf.R;this.m_localAnchor.x=e*n.col1.x+i*n.col1.y,this.m_localAnchor.y=e*n.col2.x+i*n.col2.y,this.m_maxForce=t.maxForce,this.m_impulse.setZero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0},i["box2D.dynamics.joints.B2MouseJoint"]=b.dynamics.joints.B2MouseJoint,b.dynamics.joints.B2MouseJoint.__name__=["box2D","dynamics","joints","B2MouseJoint"],b.dynamics.joints.B2MouseJoint.__super__=b.dynamics.joints.B2Joint,b.dynamics.joints.B2MouseJoint.prototype=t(b.dynamics.joints.B2Joint.prototype,{solvePositionConstraints:function(){return!0},solveVelocityConstraints:function(t){var e,i,n,s=this.m_bodyB;e=s.m_xf.R;var o=this.m_localAnchor.x-s.m_sweep.localCenter.x,a=this.m_localAnchor.y-s.m_sweep.localCenter.y;i=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=i;var r=s.m_linearVelocity.x+-s.m_angularVelocity*a,l=s.m_linearVelocity.y+s.m_angularVelocity*o;e=this.m_mass,i=r+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,n=l+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y;var m=-(e.col1.x*i+e.col2.x*n),c=-(e.col1.y*i+e.col2.y*n),_=this.m_impulse.x,h=this.m_impulse.y;this.m_impulse.x+=m,this.m_impulse.y+=c;var u=t.dt*this.m_maxForce;this.m_impulse.lengthSquared()>u*u&&this.m_impulse.multiply(u/this.m_impulse.length()),m=this.m_impulse.x-_,c=this.m_impulse.y-h,s.m_linearVelocity.x+=s.m_invMass*m,s.m_linearVelocity.y+=s.m_invMass*c,s.m_angularVelocity+=s.m_invI*(o*c-a*m)},initVelocityConstraints:function(t){var e=this.m_bodyB,i=e.getMass(),n=2*Math.PI*this.m_frequencyHz,s=2*i*this.m_dampingRatio*n,o=i*n*n;this.m_gamma=t.dt*(s+t.dt*o),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_beta=t.dt*o*this.m_gamma;var a;a=e.m_xf.R;var r=this.m_localAnchor.x-e.m_sweep.localCenter.x,l=this.m_localAnchor.y-e.m_sweep.localCenter.y,m=a.col1.x*r+a.col2.x*l;l=a.col1.y*r+a.col2.y*l,r=m;var c=e.m_invMass,_=e.m_invI;this.K1.col1.x=c,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=c,this.K2.col1.x=_*l*l,this.K2.col2.x=-_*r*l,this.K2.col1.y=-_*r*l,this.K2.col2.y=_*r*r,this.K.setM(this.K1),this.K.addM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.getInverse(this.m_mass),this.m_C.x=e.m_sweep.c.x+r-this.m_target.x,this.m_C.y=e.m_sweep.c.y+l-this.m_target.y,e.m_angularVelocity*=.98,this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,e.m_linearVelocity.x+=c*this.m_impulse.x,e.m_linearVelocity.y+=c*this.m_impulse.y,e.m_angularVelocity+=_*(r*this.m_impulse.y-l*this.m_impulse.x)},setDampingRatio:function(t){this.m_dampingRatio=t},getDampingRatio:function(){return this.m_dampingRatio},setFrequency:function(t){this.m_frequencyHz=t},getFrequency:function(){return this.m_frequencyHz},setMaxForce:function(t){this.m_maxForce=t},getMaxForce:function(){return this.m_maxForce},setTarget:function(t){0==this.m_bodyB.isAwake()&&this.m_bodyB.setAwake(!0),this.m_target=t},getTarget:function(){return this.m_target},getReactionTorque:function(){return 0},getReactionForce:function(t){return new b.common.math.B2Vec2(t*this.m_impulse.x,t*this.m_impulse.y)},getAnchorB:function(){return this.m_bodyB.getWorldPoint(this.m_localAnchor)},getAnchorA:function(){return this.m_target},__class__:b.dynamics.joints.B2MouseJoint}),b.dynamics.joints.B2MouseJointDef=function(){b.dynamics.joints.B2JointDef.call(this),this.target=new b.common.math.B2Vec2,this.type=b.dynamics.joints.B2JointType.MOUSE_JOINT,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7},i["box2D.dynamics.joints.B2MouseJointDef"]=b.dynamics.joints.B2MouseJointDef,b.dynamics.joints.B2MouseJointDef.__name__=["box2D","dynamics","joints","B2MouseJointDef"],b.dynamics.joints.B2MouseJointDef.__super__=b.dynamics.joints.B2JointDef,b.dynamics.joints.B2MouseJointDef.prototype=t(b.dynamics.joints.B2JointDef.prototype,{__class__:b.dynamics.joints.B2MouseJointDef}),b.dynamics.joints.B2PrismaticJoint=function(t){b.dynamics.joints.B2Joint.call(this,t),this.m_localAnchor1=new b.common.math.B2Vec2,this.m_localAnchor2=new b.common.math.B2Vec2,this.m_localXAxis1=new b.common.math.B2Vec2,this.m_localYAxis1=new b.common.math.B2Vec2,this.m_axis=new b.common.math.B2Vec2,this.m_perp=new b.common.math.B2Vec2,this.m_K=new b.common.math.B2Mat33,this.m_impulse=new b.common.math.B2Vec3;this.m_localAnchor1.setV(t.localAnchorA),this.m_localAnchor2.setV(t.localAnchorB),this.m_localXAxis1.setV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_refAngle=t.referenceAngle,this.m_impulse.setZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT,this.m_axis.setZero(),this.m_perp.setZero()},i["box2D.dynamics.joints.B2PrismaticJoint"]=b.dynamics.joints.B2PrismaticJoint,b.dynamics.joints.B2PrismaticJoint.__name__=["box2D","dynamics","joints","B2PrismaticJoint"],b.dynamics.joints.B2PrismaticJoint.__super__=b.dynamics.joints.B2Joint,b.dynamics.joints.B2PrismaticJoint.prototype=t(b.dynamics.joints.B2Joint.prototype,{solvePositionConstraints:function(){var t,e,i,n,s,o,a=this.m_bodyA,r=this.m_bodyB,l=a.m_sweep.c,m=a.m_sweep.a,c=r.m_sweep.c,_=r.m_sweep.a,h=0,u=0,y=!1,d=0,p=b.common.math.B2Mat22.fromAngle(m),g=b.common.math.B2Mat22.fromAngle(_);t=p;var f=this.m_localAnchor1.x-this.m_localCenterA.x,x=this.m_localAnchor1.y-this.m_localCenterA.y;e=t.col1.x*f+t.col2.x*x,x=t.col1.y*f+t.col2.y*x,f=e,t=g;var B=this.m_localAnchor2.x-this.m_localCenterB.x,v=this.m_localAnchor2.y-this.m_localCenterB.y;e=t.col1.x*B+t.col2.x*v,v=t.col1.y*B+t.col2.y*v,B=e;var w=c.x+B-l.x-f,A=c.y+v-l.y-x;if(this.m_enableLimit){this.m_axis=b.common.math.B2Math.mulMV(p,this.m_localXAxis1),this.m_a1=(w+f)*this.m_axis.y-(A+x)*this.m_axis.x,this.m_a2=B*this.m_axis.y-v*this.m_axis.x;var S=this.m_axis.x*w+this.m_axis.y*A;b.common.math.B2Math.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*b.common.B2Settings.b2_linearSlop?(d=b.common.math.B2Math.clamp(S,-b.common.B2Settings.b2_maxLinearCorrection,b.common.B2Settings.b2_maxLinearCorrection),h=b.common.math.B2Math.abs(S),y=!0):S<=this.m_lowerTranslation?(d=b.common.math.B2Math.clamp(S-this.m_lowerTranslation+b.common.B2Settings.b2_linearSlop,-b.common.B2Settings.b2_maxLinearCorrection,0),h=this.m_lowerTranslation-S,y=!0):S>=this.m_upperTranslation&&(d=b.common.math.B2Math.clamp(S-this.m_upperTranslation+b.common.B2Settings.b2_linearSlop,0,b.common.B2Settings.b2_maxLinearCorrection),h=S-this.m_upperTranslation,y=!0)}this.m_perp=b.common.math.B2Math.mulMV(p,this.m_localYAxis1),this.m_s1=(w+f)*this.m_perp.y-(A+x)*this.m_perp.x,this.m_s2=B*this.m_perp.y-v*this.m_perp.x;var L=new b.common.math.B2Vec3,M=this.m_perp.x*w+this.m_perp.y*A,C=_-m-this.m_refAngle;if(h=b.common.math.B2Math.max(h,b.common.math.B2Math.abs(M)),u=b.common.math.B2Math.abs(C),y)i=this.m_invMassA,n=this.m_invMassB,s=this.m_invIA,o=this.m_invIB,this.m_K.col1.x=i+n+s*this.m_s1*this.m_s1+o*this.m_s2*this.m_s2,this.m_K.col1.y=s*this.m_s1+o*this.m_s2,this.m_K.col1.z=s*this.m_s1*this.m_a1+o*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=s+o,this.m_K.col2.z=s*this.m_a1+o*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=i+n+s*this.m_a1*this.m_a1+o*this.m_a2*this.m_a2,this.m_K.solve33(L,-M,-C,-d);else{i=this.m_invMassA,n=this.m_invMassB,s=this.m_invIA,o=this.m_invIB;var T=i+n+s*this.m_s1*this.m_s1+o*this.m_s2*this.m_s2,I=s*this.m_s1+o*this.m_s2,D=s+o;this.m_K.col1.set(T,I,0),this.m_K.col2.set(I,D,0);var V=this.m_K.solve22(new b.common.math.B2Vec2,-M,-C);L.x=V.x,L.y=V.y,L.z=0}var E=L.x*this.m_perp.x+L.z*this.m_axis.x,F=L.x*this.m_perp.y+L.z*this.m_axis.y,P=L.x*this.m_s1+L.y+L.z*this.m_a1,R=L.x*this.m_s2+L.y+L.z*this.m_a2;return l.x-=this.m_invMassA*E,l.y-=this.m_invMassA*F,m-=this.m_invIA*P,c.x+=this.m_invMassB*E,c.y+=this.m_invMassB*F,_+=this.m_invIB*R,a.m_sweep.a=m,r.m_sweep.a=_,a.synchronizeTransform(),r.synchronizeTransform(),h<=b.common.B2Settings.b2_linearSlop&&u<=b.common.B2Settings.b2_angularSlop},solveVelocityConstraints:function(t){var e,i,n,s,o=this.m_bodyA,a=this.m_bodyB,r=o.m_linearVelocity,l=o.m_angularVelocity,m=a.m_linearVelocity,c=a.m_angularVelocity;if(this.m_enableMotor&&this.m_limitState!=b.dynamics.joints.B2LimitState.EQUAL_LIMITS){var _=this.m_axis.x*(m.x-r.x)+this.m_axis.y*(m.y-r.y)+this.m_a2*c-this.m_a1*l,h=this.m_motorMass*(this.m_motorSpeed-_),u=this.m_motorImpulse,y=t.dt*this.m_maxMotorForce;this.m_motorImpulse=b.common.math.B2Math.clamp(this.m_motorImpulse+h,-y,y),h=this.m_motorImpulse-u,e=h*this.m_axis.x,i=h*this.m_axis.y,n=h*this.m_a1,s=h*this.m_a2,r.x-=this.m_invMassA*e,r.y-=this.m_invMassA*i,l-=this.m_invIA*n,m.x+=this.m_invMassB*e,m.y+=this.m_invMassB*i,c+=this.m_invIB*s}var d=this.m_perp.x*(m.x-r.x)+this.m_perp.y*(m.y-r.y)+this.m_s2*c-this.m_s1*l,p=c-l;if(this.m_enableLimit&&this.m_limitState!=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT){var g=this.m_axis.x*(m.x-r.x)+this.m_axis.y*(m.y-r.y)+this.m_a2*c-this.m_a1*l,f=this.m_impulse.copy(),x=this.m_K.solve33(new b.common.math.B2Vec3,-d,-p,-g);this.m_impulse.add(x),this.m_limitState==b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT?this.m_impulse.z=b.common.math.B2Math.max(this.m_impulse.z,0):this.m_limitState==b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(this.m_impulse.z=b.common.math.B2Math.min(this.m_impulse.z,0));var B=-d-(this.m_impulse.z-f.z)*this.m_K.col3.x,v=-p-(this.m_impulse.z-f.z)*this.m_K.col3.y,w=this.m_K.solve22(new b.common.math.B2Vec2,B,v);w.x+=f.x,w.y+=f.y,this.m_impulse.x=w.x,this.m_impulse.y=w.y,x.x=this.m_impulse.x-f.x,x.y=this.m_impulse.y-f.y,x.z=this.m_impulse.z-f.z,e=x.x*this.m_perp.x+x.z*this.m_axis.x,i=x.x*this.m_perp.y+x.z*this.m_axis.y,n=x.x*this.m_s1+x.y+x.z*this.m_a1,s=x.x*this.m_s2+x.y+x.z*this.m_a2,r.x-=this.m_invMassA*e,r.y-=this.m_invMassA*i,l-=this.m_invIA*n,m.x+=this.m_invMassB*e,m.y+=this.m_invMassB*i,c+=this.m_invIB*s}else{var A=this.m_K.solve22(new b.common.math.B2Vec2,-d,-p);this.m_impulse.x+=A.x,this.m_impulse.y+=A.y,e=A.x*this.m_perp.x,i=A.x*this.m_perp.y,n=A.x*this.m_s1+A.y,s=A.x*this.m_s2+A.y,r.x-=this.m_invMassA*e,r.y-=this.m_invMassA*i,l-=this.m_invIA*n,m.x+=this.m_invMassB*e,m.y+=this.m_invMassB*i,c+=this.m_invIB*s}o.m_linearVelocity.setV(r),o.m_angularVelocity=l,a.m_linearVelocity.setV(m),a.m_angularVelocity=c},initVelocityConstraints:function(t){var e,i,n=this.m_bodyA,s=this.m_bodyB;this.m_localCenterA.setV(n.getLocalCenter()),this.m_localCenterB.setV(s.getLocalCenter());{var o=n.getTransform();s.getTransform()}e=n.m_xf.R;var a=this.m_localAnchor1.x-this.m_localCenterA.x,r=this.m_localAnchor1.y-this.m_localCenterA.y;i=e.col1.x*a+e.col2.x*r,r=e.col1.y*a+e.col2.y*r,a=i,e=s.m_xf.R;var l=this.m_localAnchor2.x-this.m_localCenterB.x,m=this.m_localAnchor2.y-this.m_localCenterB.y;i=e.col1.x*l+e.col2.x*m,m=e.col1.y*l+e.col2.y*m,l=i;var c=s.m_sweep.c.x+l-n.m_sweep.c.x-a,_=s.m_sweep.c.y+m-n.m_sweep.c.y-r;this.m_invMassA=n.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=n.m_invI,this.m_invIB=s.m_invI,this.m_axis.setV(b.common.math.B2Math.mulMV(o.R,this.m_localXAxis1)),this.m_a1=(c+a)*this.m_axis.y-(_+r)*this.m_axis.x,this.m_a2=l*this.m_axis.y-m*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>Number.MIN_VALUE&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.setV(b.common.math.B2Math.mulMV(o.R,this.m_localYAxis1)),this.m_s1=(c+a)*this.m_perp.y-(_+r)*this.m_perp.x,this.m_s2=l*this.m_perp.y-m*this.m_perp.x;var h=this.m_invMassA,u=this.m_invMassB,y=this.m_invIA,d=this.m_invIB;if(this.m_K.col1.x=h+u+y*this.m_s1*this.m_s1+d*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1+d*this.m_s2,this.m_K.col1.z=y*this.m_s1*this.m_a1+d*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=y+d,this.m_K.col2.z=y*this.m_a1+d*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=h+u+y*this.m_a1*this.m_a1+d*this.m_a2*this.m_a2,this.m_enableLimit){var p=this.m_axis.x*c+this.m_axis.y*_;b.common.math.B2Math.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*b.common.B2Settings.b2_linearSlop?this.m_limitState=b.dynamics.joints.B2LimitState.EQUAL_LIMITS:p<=this.m_lowerTranslation?this.m_limitState!=b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT&&(this.m_limitState=b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT,this.m_impulse.z=0):p>=this.m_upperTranslation?this.m_limitState!=b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(this.m_limitState=b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT,this.m_impulse.z=0):(this.m_limitState=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT,this.m_impulse.z=0)}else this.m_limitState=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var g=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,f=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,x=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,B=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;n.m_linearVelocity.x-=this.m_invMassA*g,n.m_linearVelocity.y-=this.m_invMassA*f,n.m_angularVelocity-=this.m_invIA*x,s.m_linearVelocity.x+=this.m_invMassB*g,s.m_linearVelocity.y+=this.m_invMassB*f,s.m_angularVelocity+=this.m_invIB*B}else this.m_impulse.setZero(),this.m_motorImpulse=0},getMotorForce:function(){return this.m_motorImpulse},setMaxMotorForce:function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t},getMotorSpeed:function(){return this.m_motorSpeed},setMotorSpeed:function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},enableMotor:function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},isMotorEnabled:function(){return this.m_enableMotor},setLimits:function(t,e){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},getUpperLimit:function(){return this.m_upperTranslation},getLowerLimit:function(){return this.m_lowerTranslation},enableLimit:function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t},isLimitEnabled:function(){return this.m_enableLimit},getJointSpeed:function(){var t,e=this.m_bodyA,i=this.m_bodyB;
t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,s=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*n+t.col2.x*s;s=t.col1.y*n+t.col2.y*s,n=o,t=i.m_xf.R;var a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,r=this.m_localAnchor2.y-i.m_sweep.localCenter.y;o=t.col1.x*a+t.col2.x*r,r=t.col1.y*a+t.col2.y*r,a=o;var l=e.m_sweep.c.x+n,m=e.m_sweep.c.y+s,c=i.m_sweep.c.x+a,_=i.m_sweep.c.y+r,h=c-l,u=_-m,y=e.getWorldVector(this.m_localXAxis1),d=e.m_linearVelocity,p=i.m_linearVelocity,g=e.m_angularVelocity,f=i.m_angularVelocity,x=h*-g*y.y+u*g*y.x+(y.x*(p.x+-f*r-d.x- -g*s)+y.y*(p.y+f*a-d.y-g*n));return x},getJointTranslation:function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.getWorldPoint(this.m_localAnchor1),n=e.getWorldPoint(this.m_localAnchor2),s=n.x-i.x,o=n.y-i.y,a=t.getWorldVector(this.m_localXAxis1),r=a.x*s+a.y*o;return r},getReactionTorque:function(t){return t*this.m_impulse.y},getReactionForce:function(t){return new b.common.math.B2Vec2(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},getAnchorB:function(){return this.m_bodyB.getWorldPoint(this.m_localAnchor2)},getAnchorA:function(){return this.m_bodyA.getWorldPoint(this.m_localAnchor1)},__class__:b.dynamics.joints.B2PrismaticJoint}),b.dynamics.joints.B2PrismaticJointDef=function(){b.dynamics.joints.B2JointDef.call(this),this.localAnchorA=new b.common.math.B2Vec2,this.localAnchorB=new b.common.math.B2Vec2,this.localAxisA=new b.common.math.B2Vec2,this.type=b.dynamics.joints.B2JointType.PRISMATIC_JOINT,this.localAxisA.set(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},i["box2D.dynamics.joints.B2PrismaticJointDef"]=b.dynamics.joints.B2PrismaticJointDef,b.dynamics.joints.B2PrismaticJointDef.__name__=["box2D","dynamics","joints","B2PrismaticJointDef"],b.dynamics.joints.B2PrismaticJointDef.__super__=b.dynamics.joints.B2JointDef,b.dynamics.joints.B2PrismaticJointDef.prototype=t(b.dynamics.joints.B2JointDef.prototype,{initialize:function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.getLocalPoint(i),this.localAnchorB=this.bodyB.getLocalPoint(i),this.localAxisA=this.bodyA.getLocalVector(n),this.referenceAngle=this.bodyB.getAngle()-this.bodyA.getAngle()},__class__:b.dynamics.joints.B2PrismaticJointDef}),b.dynamics.joints.B2PulleyJoint=function(t){b.dynamics.joints.B2Joint.call(this,t),this.m_groundAnchor1=new b.common.math.B2Vec2,this.m_groundAnchor2=new b.common.math.B2Vec2,this.m_localAnchor1=new b.common.math.B2Vec2,this.m_localAnchor2=new b.common.math.B2Vec2,this.m_u1=new b.common.math.B2Vec2,this.m_u2=new b.common.math.B2Vec2;this.m_ground=this.m_bodyA.m_world.m_groundBody,this.m_groundAnchor1.x=t.groundAnchorA.x-this.m_ground.m_xf.position.x,this.m_groundAnchor1.y=t.groundAnchorA.y-this.m_ground.m_xf.position.y,this.m_groundAnchor2.x=t.groundAnchorB.x-this.m_ground.m_xf.position.x,this.m_groundAnchor2.y=t.groundAnchorB.y-this.m_ground.m_xf.position.y,this.m_localAnchor1.setV(t.localAnchorA),this.m_localAnchor2.setV(t.localAnchorB),this.m_ratio=t.ratio,this.m_constant=t.lengthA+this.m_ratio*t.lengthB,this.m_maxLength1=b.common.math.B2Math.min(t.maxLengthA,this.m_constant-this.m_ratio*b.dynamics.joints.B2PulleyJoint.b2_minPulleyLength),this.m_maxLength2=b.common.math.B2Math.min(t.maxLengthB,(this.m_constant-b.dynamics.joints.B2PulleyJoint.b2_minPulleyLength)/this.m_ratio),this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},i["box2D.dynamics.joints.B2PulleyJoint"]=b.dynamics.joints.B2PulleyJoint,b.dynamics.joints.B2PulleyJoint.__name__=["box2D","dynamics","joints","B2PulleyJoint"],b.dynamics.joints.B2PulleyJoint.__super__=b.dynamics.joints.B2Joint,b.dynamics.joints.B2PulleyJoint.prototype=t(b.dynamics.joints.B2Joint.prototype,{solvePositionConstraints:function(){var t,e,i,n,s,o,a,r,l,m,c,_,h,u,y=this.m_bodyA,d=this.m_bodyB,p=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,g=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,f=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,x=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,B=0;return this.m_state==b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(t=y.m_xf.R,e=this.m_localAnchor1.x-y.m_sweep.localCenter.x,i=this.m_localAnchor1.y-y.m_sweep.localCenter.y,u=t.col1.x*e+t.col2.x*i,i=t.col1.y*e+t.col2.y*i,e=u,t=d.m_xf.R,n=this.m_localAnchor2.x-d.m_sweep.localCenter.x,s=this.m_localAnchor2.y-d.m_sweep.localCenter.y,u=t.col1.x*n+t.col2.x*s,s=t.col1.y*n+t.col2.y*s,n=u,o=y.m_sweep.c.x+e,a=y.m_sweep.c.y+i,r=d.m_sweep.c.x+n,l=d.m_sweep.c.y+s,this.m_u1.set(o-p,a-g),this.m_u2.set(r-f,l-x),m=this.m_u1.length(),c=this.m_u2.length(),m>b.common.B2Settings.b2_linearSlop?this.m_u1.multiply(1/m):this.m_u1.setZero(),c>b.common.B2Settings.b2_linearSlop?this.m_u2.multiply(1/c):this.m_u2.setZero(),_=this.m_constant-m-this.m_ratio*c,B=b.common.math.B2Math.max(B,-_),_=b.common.math.B2Math.clamp(_+b.common.B2Settings.b2_linearSlop,-b.common.B2Settings.b2_maxLinearCorrection,0),h=-this.m_pulleyMass*_,o=-h*this.m_u1.x,a=-h*this.m_u1.y,r=-this.m_ratio*h*this.m_u2.x,l=-this.m_ratio*h*this.m_u2.y,y.m_sweep.c.x+=y.m_invMass*o,y.m_sweep.c.y+=y.m_invMass*a,y.m_sweep.a+=y.m_invI*(e*a-i*o),d.m_sweep.c.x+=d.m_invMass*r,d.m_sweep.c.y+=d.m_invMass*l,d.m_sweep.a+=d.m_invI*(n*l-s*r),y.synchronizeTransform(),d.synchronizeTransform()),this.m_limitState1==b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(t=y.m_xf.R,e=this.m_localAnchor1.x-y.m_sweep.localCenter.x,i=this.m_localAnchor1.y-y.m_sweep.localCenter.y,u=t.col1.x*e+t.col2.x*i,i=t.col1.y*e+t.col2.y*i,e=u,o=y.m_sweep.c.x+e,a=y.m_sweep.c.y+i,this.m_u1.set(o-p,a-g),m=this.m_u1.length(),m>b.common.B2Settings.b2_linearSlop?(this.m_u1.x*=1/m,this.m_u1.y*=1/m):this.m_u1.setZero(),_=this.m_maxLength1-m,B=b.common.math.B2Math.max(B,-_),_=b.common.math.B2Math.clamp(_+b.common.B2Settings.b2_linearSlop,-b.common.B2Settings.b2_maxLinearCorrection,0),h=-this.m_limitMass1*_,o=-h*this.m_u1.x,a=-h*this.m_u1.y,y.m_sweep.c.x+=y.m_invMass*o,y.m_sweep.c.y+=y.m_invMass*a,y.m_sweep.a+=y.m_invI*(e*a-i*o),y.synchronizeTransform()),this.m_limitState2==b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(t=d.m_xf.R,n=this.m_localAnchor2.x-d.m_sweep.localCenter.x,s=this.m_localAnchor2.y-d.m_sweep.localCenter.y,u=t.col1.x*n+t.col2.x*s,s=t.col1.y*n+t.col2.y*s,n=u,r=d.m_sweep.c.x+n,l=d.m_sweep.c.y+s,this.m_u2.set(r-f,l-x),c=this.m_u2.length(),c>b.common.B2Settings.b2_linearSlop?(this.m_u2.x*=1/c,this.m_u2.y*=1/c):this.m_u2.setZero(),_=this.m_maxLength2-c,B=b.common.math.B2Math.max(B,-_),_=b.common.math.B2Math.clamp(_+b.common.B2Settings.b2_linearSlop,-b.common.B2Settings.b2_maxLinearCorrection,0),h=-this.m_limitMass2*_,r=-h*this.m_u2.x,l=-h*this.m_u2.y,d.m_sweep.c.x+=d.m_invMass*r,d.m_sweep.c.y+=d.m_invMass*l,d.m_sweep.a+=d.m_invI*(n*l-s*r),d.synchronizeTransform()),B<b.common.B2Settings.b2_linearSlop},solveVelocityConstraints:function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,s=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*n+t.col2.x*s;s=t.col1.y*n+t.col2.y*s,n=o,t=i.m_xf.R;var a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,r=this.m_localAnchor2.y-i.m_sweep.localCenter.y;o=t.col1.x*a+t.col2.x*r,r=t.col1.y*a+t.col2.y*r,a=o;var l,m,c,_,h,u,y,d,p,g,f;this.m_state==b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(l=e.m_linearVelocity.x+-e.m_angularVelocity*s,m=e.m_linearVelocity.y+e.m_angularVelocity*n,c=i.m_linearVelocity.x+-i.m_angularVelocity*r,_=i.m_linearVelocity.y+i.m_angularVelocity*a,p=-(this.m_u1.x*l+this.m_u1.y*m)-this.m_ratio*(this.m_u2.x*c+this.m_u2.y*_),g=this.m_pulleyMass*-p,f=this.m_impulse,this.m_impulse=b.common.math.B2Math.max(0,this.m_impulse+g),g=this.m_impulse-f,h=-g*this.m_u1.x,u=-g*this.m_u1.y,y=-this.m_ratio*g*this.m_u2.x,d=-this.m_ratio*g*this.m_u2.y,e.m_linearVelocity.x+=e.m_invMass*h,e.m_linearVelocity.y+=e.m_invMass*u,e.m_angularVelocity+=e.m_invI*(n*u-s*h),i.m_linearVelocity.x+=i.m_invMass*y,i.m_linearVelocity.y+=i.m_invMass*d,i.m_angularVelocity+=i.m_invI*(a*d-r*y)),this.m_limitState1==b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(l=e.m_linearVelocity.x+-e.m_angularVelocity*s,m=e.m_linearVelocity.y+e.m_angularVelocity*n,p=-(this.m_u1.x*l+this.m_u1.y*m),g=-this.m_limitMass1*p,f=this.m_limitImpulse1,this.m_limitImpulse1=b.common.math.B2Math.max(0,this.m_limitImpulse1+g),g=this.m_limitImpulse1-f,h=-g*this.m_u1.x,u=-g*this.m_u1.y,e.m_linearVelocity.x+=e.m_invMass*h,e.m_linearVelocity.y+=e.m_invMass*u,e.m_angularVelocity+=e.m_invI*(n*u-s*h)),this.m_limitState2==b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(c=i.m_linearVelocity.x+-i.m_angularVelocity*r,_=i.m_linearVelocity.y+i.m_angularVelocity*a,p=-(this.m_u2.x*c+this.m_u2.y*_),g=-this.m_limitMass2*p,f=this.m_limitImpulse2,this.m_limitImpulse2=b.common.math.B2Math.max(0,this.m_limitImpulse2+g),g=this.m_limitImpulse2-f,y=-g*this.m_u2.x,d=-g*this.m_u2.y,i.m_linearVelocity.x+=i.m_invMass*y,i.m_linearVelocity.y+=i.m_invMass*d,i.m_angularVelocity+=i.m_invI*(a*d-r*y))},initVelocityConstraints:function(t){var e,i=this.m_bodyA,n=this.m_bodyB;e=i.m_xf.R;var s=this.m_localAnchor1.x-i.m_sweep.localCenter.x,o=this.m_localAnchor1.y-i.m_sweep.localCenter.y,a=e.col1.x*s+e.col2.x*o;o=e.col1.y*s+e.col2.y*o,s=a,e=n.m_xf.R;var r=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y;a=e.col1.x*r+e.col2.x*l,l=e.col1.y*r+e.col2.y*l,r=a;var m=i.m_sweep.c.x+s,c=i.m_sweep.c.y+o,_=n.m_sweep.c.x+r,h=n.m_sweep.c.y+l,u=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,y=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,d=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,p=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.set(m-u,c-y),this.m_u2.set(_-d,h-p);var g=this.m_u1.length(),f=this.m_u2.length();g>b.common.B2Settings.b2_linearSlop?this.m_u1.multiply(1/g):this.m_u1.setZero(),f>b.common.B2Settings.b2_linearSlop?this.m_u2.multiply(1/f):this.m_u2.setZero();var x=this.m_constant-g-this.m_ratio*f;x>0?(this.m_state=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT,this.m_impulse=0):this.m_state=b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT,g<this.m_maxLength1?(this.m_limitState1=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT,this.m_limitImpulse1=0):this.m_limitState1=b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT,f<this.m_maxLength2?(this.m_limitState2=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT,this.m_limitImpulse2=0):this.m_limitState2=b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT;var B=s*this.m_u1.y-o*this.m_u1.x,v=r*this.m_u2.y-l*this.m_u2.x;if(this.m_limitMass1=i.m_invMass+i.m_invI*B*B,this.m_limitMass2=n.m_invMass+n.m_invI*v*v,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass,t.warmStarting){this.m_impulse*=t.dtRatio,this.m_limitImpulse1*=t.dtRatio,this.m_limitImpulse2*=t.dtRatio;var w=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,A=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,S=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,L=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y;i.m_linearVelocity.x+=i.m_invMass*w,i.m_linearVelocity.y+=i.m_invMass*A,i.m_angularVelocity+=i.m_invI*(s*A-o*w),n.m_linearVelocity.x+=n.m_invMass*S,n.m_linearVelocity.y+=n.m_invMass*L,n.m_angularVelocity+=n.m_invI*(r*L-l*S)}else this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},getRatio:function(){return this.m_ratio},getLength2:function(){var t=this.m_bodyB.getWorldPoint(this.m_localAnchor2),e=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,i=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,n=t.x-e,s=t.y-i;return Math.sqrt(n*n+s*s)},getLength1:function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchor1),e=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,i=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,n=t.x-e,s=t.y-i;return Math.sqrt(n*n+s*s)},getGroundAnchorB:function(){var t=this.m_ground.m_xf.position.copy();return t.add(this.m_groundAnchor2),t},getGroundAnchorA:function(){var t=this.m_ground.m_xf.position.copy();return t.add(this.m_groundAnchor1),t},getReactionTorque:function(){return 0},getReactionForce:function(t){return new b.common.math.B2Vec2(t*this.m_impulse*this.m_u2.x,t*this.m_impulse*this.m_u2.y)},getAnchorB:function(){return this.m_bodyB.getWorldPoint(this.m_localAnchor2)},getAnchorA:function(){return this.m_bodyA.getWorldPoint(this.m_localAnchor1)},__class__:b.dynamics.joints.B2PulleyJoint}),b.dynamics.joints.B2PulleyJointDef=function(){b.dynamics.joints.B2JointDef.call(this),this.groundAnchorA=new b.common.math.B2Vec2,this.groundAnchorB=new b.common.math.B2Vec2,this.localAnchorA=new b.common.math.B2Vec2,this.localAnchorB=new b.common.math.B2Vec2,this.type=b.dynamics.joints.B2JointType.PULLEY_JOINT,this.groundAnchorA.set(-1,1),this.groundAnchorB.set(1,1),this.localAnchorA.set(-1,0),this.localAnchorB.set(1,0),this.lengthA=0,this.maxLengthA=0,this.lengthB=0,this.maxLengthB=0,this.ratio=1,this.collideConnected=!0},i["box2D.dynamics.joints.B2PulleyJointDef"]=b.dynamics.joints.B2PulleyJointDef,b.dynamics.joints.B2PulleyJointDef.__name__=["box2D","dynamics","joints","B2PulleyJointDef"],b.dynamics.joints.B2PulleyJointDef.__super__=b.dynamics.joints.B2JointDef,b.dynamics.joints.B2PulleyJointDef.prototype=t(b.dynamics.joints.B2JointDef.prototype,{initialize:function(t,e,i,n,s,o,a){this.bodyA=t,this.bodyB=e,this.groundAnchorA.setV(i),this.groundAnchorB.setV(n),this.localAnchorA=this.bodyA.getLocalPoint(s),this.localAnchorB=this.bodyB.getLocalPoint(o);var r=s.x-i.x,l=s.y-i.y;this.lengthA=Math.sqrt(r*r+l*l);var m=o.x-n.x,c=o.y-n.y;this.lengthB=Math.sqrt(m*m+c*c),this.ratio=a;var _=this.lengthA+this.ratio*this.lengthB;this.maxLengthA=_-this.ratio*b.dynamics.joints.B2PulleyJoint.b2_minPulleyLength,this.maxLengthB=(_-b.dynamics.joints.B2PulleyJoint.b2_minPulleyLength)/this.ratio},__class__:b.dynamics.joints.B2PulleyJointDef}),b.dynamics.joints.B2RevoluteJoint=function(t){b.dynamics.joints.B2Joint.call(this,t),this.K=new b.common.math.B2Mat22,this.K1=new b.common.math.B2Mat22,this.K2=new b.common.math.B2Mat22,this.K3=new b.common.math.B2Mat22,this.impulse3=new b.common.math.B2Vec3,this.impulse2=new b.common.math.B2Vec2,this.reduced=new b.common.math.B2Vec2,this.m_localAnchor1=new b.common.math.B2Vec2,this.m_localAnchor2=new b.common.math.B2Vec2,this.m_impulse=new b.common.math.B2Vec3,this.m_mass=new b.common.math.B2Mat33,this.m_localAnchor1.setV(t.localAnchorA),this.m_localAnchor2.setV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.setZero(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT},i["box2D.dynamics.joints.B2RevoluteJoint"]=b.dynamics.joints.B2RevoluteJoint,b.dynamics.joints.B2RevoluteJoint.__name__=["box2D","dynamics","joints","B2RevoluteJoint"],b.dynamics.joints.B2RevoluteJoint.__super__=b.dynamics.joints.B2Joint,b.dynamics.joints.B2RevoluteJoint.prototype=t(b.dynamics.joints.B2Joint.prototype,{solvePositionConstraints:function(){var t,e,i,n,s,o=this.m_bodyA,a=this.m_bodyB,r=0,l=0;if(this.m_enableLimit&&this.m_limitState!=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT){var m=a.m_sweep.a-o.m_sweep.a-this.m_referenceAngle,c=0;this.m_limitState==b.dynamics.joints.B2LimitState.EQUAL_LIMITS?(t=b.common.math.B2Math.clamp(m-this.m_lowerAngle,-b.common.B2Settings.b2_maxAngularCorrection,b.common.B2Settings.b2_maxAngularCorrection),c=-this.m_motorMass*t,r=b.common.math.B2Math.abs(t)):this.m_limitState==b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT?(t=m-this.m_lowerAngle,r=-t,t=b.common.math.B2Math.clamp(t+b.common.B2Settings.b2_angularSlop,-b.common.B2Settings.b2_maxAngularCorrection,0),c=-this.m_motorMass*t):this.m_limitState==b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(t=m-this.m_upperAngle,r=t,t=b.common.math.B2Math.clamp(t-b.common.B2Settings.b2_angularSlop,0,b.common.B2Settings.b2_maxAngularCorrection),c=-this.m_motorMass*t),o.m_sweep.a-=o.m_invI*c,a.m_sweep.a+=a.m_invI*c,o.synchronizeTransform(),a.synchronizeTransform()}e=o.m_xf.R;var _=this.m_localAnchor1.x-o.m_sweep.localCenter.x,h=this.m_localAnchor1.y-o.m_sweep.localCenter.y;i=e.col1.x*_+e.col2.x*h,h=e.col1.y*_+e.col2.y*h,_=i,e=a.m_xf.R;var u=this.m_localAnchor2.x-a.m_sweep.localCenter.x,y=this.m_localAnchor2.y-a.m_sweep.localCenter.y;i=e.col1.x*u+e.col2.x*y,y=e.col1.y*u+e.col2.y*y,u=i;var d=a.m_sweep.c.x+u-o.m_sweep.c.x-_,p=a.m_sweep.c.y+y-o.m_sweep.c.y-h,g=d*d+p*p,f=Math.sqrt(g);l=f;var x=o.m_invMass,B=a.m_invMass,v=o.m_invI,w=a.m_invI,A=10*b.common.B2Settings.b2_linearSlop;if(g>A*A){var S=x+B,L=1/S;n=L*-d,s=L*-p;var M=.5;o.m_sweep.c.x-=M*x*n,o.m_sweep.c.y-=M*x*s,a.m_sweep.c.x+=M*B*n,a.m_sweep.c.y+=M*B*s,d=a.m_sweep.c.x+u-o.m_sweep.c.x-_,p=a.m_sweep.c.y+y-o.m_sweep.c.y-h}return this.K1.col1.x=x+B,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=x+B,this.K2.col1.x=v*h*h,this.K2.col2.x=-v*_*h,this.K2.col1.y=-v*_*h,this.K2.col2.y=v*_*_,this.K3.col1.x=w*y*y,this.K3.col2.x=-w*u*y,this.K3.col1.y=-w*u*y,this.K3.col2.y=w*u*u,this.K.setM(this.K1),this.K.addM(this.K2),this.K.addM(this.K3),this.K.solve(b.dynamics.joints.B2RevoluteJoint.tImpulse,-d,-p),n=b.dynamics.joints.B2RevoluteJoint.tImpulse.x,s=b.dynamics.joints.B2RevoluteJoint.tImpulse.y,o.m_sweep.c.x-=o.m_invMass*n,o.m_sweep.c.y-=o.m_invMass*s,o.m_sweep.a-=o.m_invI*(_*s-h*n),a.m_sweep.c.x+=a.m_invMass*n,a.m_sweep.c.y+=a.m_invMass*s,a.m_sweep.a+=a.m_invI*(u*s-y*n),o.synchronizeTransform(),a.synchronizeTransform(),l<=b.common.B2Settings.b2_linearSlop&&r<=b.common.B2Settings.b2_angularSlop},solveVelocityConstraints:function(t){var e,i,n,s,o,a,r,l=this.m_bodyA,m=this.m_bodyB,c=l.m_linearVelocity,_=l.m_angularVelocity,h=m.m_linearVelocity,u=m.m_angularVelocity,y=l.m_invMass,d=m.m_invMass,p=l.m_invI,g=m.m_invI;if(this.m_enableMotor&&this.m_limitState!=b.dynamics.joints.B2LimitState.EQUAL_LIMITS){var f=u-_-this.m_motorSpeed,x=this.m_motorMass*-f,B=this.m_motorImpulse,v=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=b.common.math.B2Math.clamp(this.m_motorImpulse+x,-v,v),x=this.m_motorImpulse-B,_-=p*x,u+=g*x}if(this.m_enableLimit&&this.m_limitState!=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT){e=l.m_xf.R,s=this.m_localAnchor1.x-l.m_sweep.localCenter.x,o=this.m_localAnchor1.y-l.m_sweep.localCenter.y,i=e.col1.x*s+e.col2.x*o,o=e.col1.y*s+e.col2.y*o,s=i,e=m.m_xf.R,a=this.m_localAnchor2.x-m.m_sweep.localCenter.x,r=this.m_localAnchor2.y-m.m_sweep.localCenter.y,i=e.col1.x*a+e.col2.x*r,r=e.col1.y*a+e.col2.y*r,a=i;var w=h.x+-u*r-c.x- -_*o,A=h.y+u*a-c.y-_*s,S=u-_;this.m_mass.solve33(this.impulse3,-w,-A,-S),this.m_limitState==b.dynamics.joints.B2LimitState.EQUAL_LIMITS?this.m_impulse.add(this.impulse3):this.m_limitState==b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT?(n=this.m_impulse.z+this.impulse3.z,0>n&&(this.m_mass.solve22(this.reduced,-w,-A),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)):this.m_limitState==b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(n=this.m_impulse.z+this.impulse3.z,n>0&&(this.m_mass.solve22(this.reduced,-w,-A),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)),c.x-=y*this.impulse3.x,c.y-=y*this.impulse3.y,_-=p*(s*this.impulse3.y-o*this.impulse3.x+this.impulse3.z),h.x+=d*this.impulse3.x,h.y+=d*this.impulse3.y,u+=g*(a*this.impulse3.y-r*this.impulse3.x+this.impulse3.z)}else{e=l.m_xf.R,s=this.m_localAnchor1.x-l.m_sweep.localCenter.x,o=this.m_localAnchor1.y-l.m_sweep.localCenter.y,i=e.col1.x*s+e.col2.x*o,o=e.col1.y*s+e.col2.y*o,s=i,e=m.m_xf.R,a=this.m_localAnchor2.x-m.m_sweep.localCenter.x,r=this.m_localAnchor2.y-m.m_sweep.localCenter.y,i=e.col1.x*a+e.col2.x*r,r=e.col1.y*a+e.col2.y*r,a=i;var L=h.x+-u*r-c.x- -_*o,M=h.y+u*a-c.y-_*s;this.m_mass.solve22(this.impulse2,-L,-M),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,c.x-=y*this.impulse2.x,c.y-=y*this.impulse2.y,_-=p*(s*this.impulse2.y-o*this.impulse2.x),h.x+=d*this.impulse2.x,h.y+=d*this.impulse2.y,u+=g*(a*this.impulse2.y-r*this.impulse2.x)}l.m_linearVelocity.setV(c),l.m_angularVelocity=_,m.m_linearVelocity.setV(h),m.m_angularVelocity=u},initVelocityConstraints:function(t){var e,i,n=this.m_bodyA,s=this.m_bodyB;this.m_enableMotor||this.m_enableLimit,e=n.m_xf.R;var o=this.m_localAnchor1.x-n.m_sweep.localCenter.x,a=this.m_localAnchor1.y-n.m_sweep.localCenter.y;i=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=i,e=s.m_xf.R;var r=this.m_localAnchor2.x-s.m_sweep.localCenter.x,l=this.m_localAnchor2.y-s.m_sweep.localCenter.y;i=e.col1.x*r+e.col2.x*l,l=e.col1.y*r+e.col2.y*l,r=i;var m=n.m_invMass,c=s.m_invMass,_=n.m_invI,h=s.m_invI;if(this.m_mass.col1.x=m+c+a*a*_+l*l*h,this.m_mass.col2.x=-a*o*_-l*r*h,this.m_mass.col3.x=-a*_-l*h,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=m+c+o*o*_+r*r*h,this.m_mass.col3.y=o*_+r*h,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=_+h,this.m_motorMass=1/(_+h),0==this.m_enableMotor&&(this.m_motorImpulse=0),this.m_enableLimit){var u=s.m_sweep.a-n.m_sweep.a-this.m_referenceAngle;b.common.math.B2Math.abs(this.m_upperAngle-this.m_lowerAngle)<2*b.common.B2Settings.b2_angularSlop?this.m_limitState=b.dynamics.joints.B2LimitState.EQUAL_LIMITS:u<=this.m_lowerAngle?(this.m_limitState!=b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT&&(this.m_impulse.z=0),this.m_limitState=b.dynamics.joints.B2LimitState.AT_LOWER_LIMIT):u>=this.m_upperAngle?(this.m_limitState!=b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT&&(this.m_impulse.z=0),this.m_limitState=b.dynamics.joints.B2LimitState.AT_UPPER_LIMIT):(this.m_limitState=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT,this.m_impulse.z=0)}else this.m_limitState=b.dynamics.joints.B2LimitState.INACTIVE_LIMIT;if(t.warmStarting){this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var y=this.m_impulse.x,d=this.m_impulse.y;n.m_linearVelocity.x-=m*y,n.m_linearVelocity.y-=m*d,n.m_angularVelocity-=_*(o*d-a*y+this.m_motorImpulse+this.m_impulse.z),s.m_linearVelocity.x+=c*y,s.m_linearVelocity.y+=c*d,s.m_angularVelocity+=h*(r*d-l*y+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0},getMotorTorque:function(){return this.m_maxMotorTorque},setMaxMotorTorque:function(t){this.m_maxMotorTorque=t},getMotorSpeed:function(){return this.m_motorSpeed},setMotorSpeed:function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},enableMotor:function(t){this.m_enableMotor=t},isMotorEnabled:function(){return this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor},setLimits:function(t,e){this.m_lowerAngle=t,this.m_upperAngle=e},getUpperLimit:function(){return this.m_upperAngle},getLowerLimit:function(){return this.m_lowerAngle},enableLimit:function(t){this.m_enableLimit=t},isLimitEnabled:function(){return this.m_enableLimit},getJointSpeed:function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},getJointAngle:function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},getReactionTorque:function(t){return t*this.m_impulse.z},getReactionForce:function(t){return new b.common.math.B2Vec2(t*this.m_impulse.x,t*this.m_impulse.y)},getAnchorB:function(){return this.m_bodyB.getWorldPoint(this.m_localAnchor2)},getAnchorA:function(){return this.m_bodyA.getWorldPoint(this.m_localAnchor1)},__class__:b.dynamics.joints.B2RevoluteJoint}),b.dynamics.joints.B2RevoluteJointDef=function(){b.dynamics.joints.B2JointDef.call(this),this.localAnchorA=new b.common.math.B2Vec2,this.localAnchorB=new b.common.math.B2Vec2,this.type=b.dynamics.joints.B2JointType.REVOLUTE_JOINT,this.localAnchorA.set(0,0),this.localAnchorB.set(0,0),this.referenceAngle=0,this.lowerAngle=0,this.upperAngle=0,this.maxMotorTorque=0,this.motorSpeed=0,this.enableLimit=!1,this.enableMotor=!1},i["box2D.dynamics.joints.B2RevoluteJointDef"]=b.dynamics.joints.B2RevoluteJointDef,b.dynamics.joints.B2RevoluteJointDef.__name__=["box2D","dynamics","joints","B2RevoluteJointDef"],b.dynamics.joints.B2RevoluteJointDef.__super__=b.dynamics.joints.B2JointDef,b.dynamics.joints.B2RevoluteJointDef.prototype=t(b.dynamics.joints.B2JointDef.prototype,{initialize:function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.getLocalPoint(i),this.localAnchorB=this.bodyB.getLocalPoint(i),this.referenceAngle=this.bodyB.getAngle()-this.bodyA.getAngle()},__class__:b.dynamics.joints.B2RevoluteJointDef}),b.dynamics.joints.B2WeldJoint=function(t){b.dynamics.joints.B2Joint.call(this,t),this.m_localAnchorA=new b.common.math.B2Vec2,this.m_localAnchorB=new b.common.math.B2Vec2,this.m_impulse=new b.common.math.B2Vec3,this.m_mass=new b.common.math.B2Mat33,this.m_localAnchorA.setV(t.localAnchorA),this.m_localAnchorB.setV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.setZero(),this.m_mass=new b.common.math.B2Mat33},i["box2D.dynamics.joints.B2WeldJoint"]=b.dynamics.joints.B2WeldJoint,b.dynamics.joints.B2WeldJoint.__name__=["box2D","dynamics","joints","B2WeldJoint"],b.dynamics.joints.B2WeldJoint.__super__=b.dynamics.joints.B2Joint,b.dynamics.joints.B2WeldJoint.prototype=t(b.dynamics.joints.B2Joint.prototype,{solvePositionConstraints:function(){var t,e,i=this.m_bodyA,n=this.m_bodyB;t=i.m_xf.R;var s=this.m_localAnchorA.x-i.m_sweep.localCenter.x,o=this.m_localAnchorA.y-i.m_sweep.localCenter.y;e=t.col1.x*s+t.col2.x*o,o=t.col1.y*s+t.col2.y*o,s=e,t=n.m_xf.R;var a=this.m_localAnchorB.x-n.m_sweep.localCenter.x,r=this.m_localAnchorB.y-n.m_sweep.localCenter.y;e=t.col1.x*a+t.col2.x*r,r=t.col1.y*a+t.col2.y*r,a=e;var l=i.m_invMass,m=n.m_invMass,c=i.m_invI,_=n.m_invI,h=n.m_sweep.c.x+a-i.m_sweep.c.x-s,u=n.m_sweep.c.y+r-i.m_sweep.c.y-o,y=n.m_sweep.a-i.m_sweep.a-this.m_referenceAngle,d=10*b.common.B2Settings.b2_linearSlop,p=Math.sqrt(h*h+u*u),g=b.common.math.B2Math.abs(y);p>d&&(c*=1,_*=1),this.m_mass.col1.x=l+m+o*o*c+r*r*_,this.m_mass.col2.x=-o*s*c-r*a*_,this.m_mass.col3.x=-o*c-r*_,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=l+m+s*s*c+a*a*_,this.m_mass.col3.y=s*c+a*_,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=c+_;var f=new b.common.math.B2Vec3;return this.m_mass.solve33(f,-h,-u,-y),i.m_sweep.c.x-=l*f.x,i.m_sweep.c.y-=l*f.y,i.m_sweep.a-=c*(s*f.y-o*f.x+f.z),n.m_sweep.c.x+=m*f.x,n.m_sweep.c.y+=m*f.y,n.m_sweep.a+=_*(a*f.y-r*f.x+f.z),i.synchronizeTransform(),n.synchronizeTransform(),p<=b.common.B2Settings.b2_linearSlop&&g<=b.common.B2Settings.b2_angularSlop},solveVelocityConstraints:function(){var t,e,i=this.m_bodyA,n=this.m_bodyB,s=i.m_linearVelocity,o=i.m_angularVelocity,a=n.m_linearVelocity,r=n.m_angularVelocity,l=i.m_invMass,m=n.m_invMass,c=i.m_invI,_=n.m_invI;t=i.m_xf.R;var h=this.m_localAnchorA.x-i.m_sweep.localCenter.x,u=this.m_localAnchorA.y-i.m_sweep.localCenter.y;e=t.col1.x*h+t.col2.x*u,u=t.col1.y*h+t.col2.y*u,h=e,t=n.m_xf.R;var y=this.m_localAnchorB.x-n.m_sweep.localCenter.x,d=this.m_localAnchorB.y-n.m_sweep.localCenter.y;e=t.col1.x*y+t.col2.x*d,d=t.col1.y*y+t.col2.y*d,y=e;var p=a.x-r*d-s.x+o*u,g=a.y+r*y-s.y-o*h,f=r-o,x=new b.common.math.B2Vec3;this.m_mass.solve33(x,-p,-g,-f),this.m_impulse.add(x),s.x-=l*x.x,s.y-=l*x.y,o-=c*(h*x.y-u*x.x+x.z),a.x+=m*x.x,a.y+=m*x.y,r+=_*(y*x.y-d*x.x+x.z),i.m_angularVelocity=o,n.m_angularVelocity=r},initVelocityConstraints:function(t){var e,i,n=this.m_bodyA,s=this.m_bodyB;e=n.m_xf.R;var o=this.m_localAnchorA.x-n.m_sweep.localCenter.x,a=this.m_localAnchorA.y-n.m_sweep.localCenter.y;i=e.col1.x*o+e.col2.x*a,a=e.col1.y*o+e.col2.y*a,o=i,e=s.m_xf.R;var r=this.m_localAnchorB.x-s.m_sweep.localCenter.x,l=this.m_localAnchorB.y-s.m_sweep.localCenter.y;i=e.col1.x*r+e.col2.x*l,l=e.col1.y*r+e.col2.y*l,r=i;var m=n.m_invMass,c=s.m_invMass,_=n.m_invI,h=s.m_invI;this.m_mass.col1.x=m+c+a*a*_+l*l*h,this.m_mass.col2.x=-a*o*_-l*r*h,this.m_mass.col3.x=-a*_-l*h,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=m+c+o*o*_+r*r*h,this.m_mass.col3.y=o*_+r*h,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=_+h,t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_impulse.z*=t.dtRatio,n.m_linearVelocity.x-=m*this.m_impulse.x,n.m_linearVelocity.y-=m*this.m_impulse.y,n.m_angularVelocity-=_*(o*this.m_impulse.y-a*this.m_impulse.x+this.m_impulse.z),s.m_linearVelocity.x+=c*this.m_impulse.x,s.m_linearVelocity.y+=c*this.m_impulse.y,s.m_angularVelocity+=h*(r*this.m_impulse.y-l*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.setZero()},getReactionTorque:function(t){return t*this.m_impulse.z},getReactionForce:function(t){return new b.common.math.B2Vec2(t*this.m_impulse.x,t*this.m_impulse.y)},getAnchorB:function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},getAnchorA:function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},__class__:b.dynamics.joints.B2WeldJoint}),b.dynamics.joints.B2WeldJointDef=function(){b.dynamics.joints.B2JointDef.call(this),this.localAnchorA=new b.common.math.B2Vec2,this.localAnchorB=new b.common.math.B2Vec2,this.type=b.dynamics.joints.B2JointType.WELD_JOINT,this.referenceAngle=0},i["box2D.dynamics.joints.B2WeldJointDef"]=b.dynamics.joints.B2WeldJointDef,b.dynamics.joints.B2WeldJointDef.__name__=["box2D","dynamics","joints","B2WeldJointDef"],b.dynamics.joints.B2WeldJointDef.__super__=b.dynamics.joints.B2JointDef,b.dynamics.joints.B2WeldJointDef.prototype=t(b.dynamics.joints.B2JointDef.prototype,{initialize:function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.setV(this.bodyA.getLocalPoint(i)),this.localAnchorB.setV(this.bodyB.getLocalPoint(i)),this.referenceAngle=this.bodyB.getAngle()-this.bodyA.getAngle()},__class__:b.dynamics.joints.B2WeldJointDef}),_.Lib=function(){},i["flash.Lib"]=_.Lib,_.Lib.__name__=["flash","Lib"],_.Lib.__properties__={get_stage:"get_stage",get_current:"get_current"},_.Lib.__init=function(){var t;_.Lib.schList=[],_.Lib.schLength=0,window.reqAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,700/_.Lib.frameRate,null)},t=navigator.userAgent||navigator.vendor||window.opera,_.Lib.mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))
},_.Lib.getTimer=function(){return~~(Date.now()-_.Lib.qTimeStamp)},_.Lib.getURL=function(t,e){A.Browser.window.open(t.url,e)},_.Lib.jsNode=function(t){var e=A.Browser.document.createElement(t);return e.style.position="absolute",e},_.Lib.jsDiv=function(){return _.Lib.jsNode("div")},_.Lib.jsCanvas=function(){return _.Lib.jsNode("canvas")},_.Lib.jsHelper=function(){if(null==_.Lib.qHelper){var t=_.Lib.jsDiv();_.Lib.get_stage().component.appendChild(t),t.style.visibility="hidden",t.setAttribute("node","Lib.jsHelper"),t.appendChild(_.Lib.qHelper=_.Lib.jsDiv())}return _.Lib.qHelper},_.Lib.get_current=function(){return null==_.Lib.qCurrent&&_.Lib.get_stage().addChild(_.Lib.qCurrent=new _.display.MovieClip),_.Lib.qCurrent},_.Lib.get_stage=function(){return null==_.Lib.qStage&&A.Browser.document.body.appendChild((_.Lib.qStage=new _.display.Stage).component),_.Lib.qStage},_.Lib.requestAnimationFrame=function(t){window.reqAnimFrame(t)},_.Lib.schedule=function(t){_.Lib.schList[_.Lib.schLength++]=t},_.Lib.rgba=function(t){return"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+((t>>24&255)/255).toFixed(4)+")"},_.Lib.rgbf=function(t,e){return"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+e.toFixed(4)+")"},_.display.Bitmap=function(t,e,i){null==i&&(i=!1),this.smoothing=!1,_.display.DisplayObject.call(this),this.set_bitmapData(t)},i["flash.display.Bitmap"]=_.display.Bitmap,_.display.Bitmap.__name__=["flash","display","Bitmap"],_.display.Bitmap.__interfaces__=[_.display.IBitmapDrawable],_.display.Bitmap.__super__=_.display.DisplayObject,_.display.Bitmap.prototype=t(_.display.DisplayObject.prototype,{drawToSurface:function(t,e,i,n,s,o,a){this.bitmapData.drawToSurface(t,e,i,n,s,o,a)},get_height:function(){return null!=this.qHeight?this.qHeight:null!=this.bitmapData?this.bitmapData.component.height:0},get_width:function(){return null!=this.qWidth?this.qWidth:null!=this.bitmapData?this.bitmapData.component.width:0},set_smoothing:function(t){var e=this.bitmapData.qContext;return console&&console.log(d.string(this)+".smoothing = "+d.string(t)),e.imageSmoothingEnabled=e.oImageSmoothingEnabled=e.msImageSmoothingEnabled=e.webkitImageSmoothingEnabled=e.mozImageSmoothingEnabled=t,t},set_bitmapData:function(t){return null!=this.bitmapData&&this.component.removeChild(this.bitmapData.component),null!=t&&this.component.appendChild(t.handle()),this.bitmapData=t},__class__:_.display.Bitmap,__properties__:t(_.display.DisplayObject.prototype.__properties__,{set_bitmapData:"set_bitmapData",set_smoothing:"set_smoothing"})}),_.display.ImageDataLease=function(){},i["flash.display.ImageDataLease"]=_.display.ImageDataLease,_.display.ImageDataLease.__name__=["flash","display","ImageDataLease"],_.display.ImageDataLease.prototype={clone:function(){var t=new _.display.ImageDataLease;return t.seed=this.seed,t.time=this.time,t},set:function(t,e){this.seed=t,this.time=e},__class__:_.display.ImageDataLease},_.display.BitmapData=function(t,e,i,n){null==i&&(i=!0),this.qSync=1,this.qTransparent=i,this.qTick=0,this.qTime=(new Date).getTime(),this.rect=new _.geom.Rectangle(0,0,t,e),this.component=_.Lib.jsCanvas(),this.component.setAttribute("node",v.getClassName(v.getClass(this))),this.component.width=t,this.component.height=e,this.qContext=this.component.getContext("2d"),_.display.BitmapData.setSmoothing(this.qContext,!0),this.qPixel=this.qContext.createImageData(1,1),null==n&&(n=-1),i||(n|=-16777216),0!=(-16777216&n)&&this.fillRect(this.rect,n)},i["flash.display.BitmapData"]=_.display.BitmapData,_.display.BitmapData.__name__=["flash","display","BitmapData"],_.display.BitmapData.__interfaces__=[_.display.IBitmapDrawable],_.display.BitmapData.setSmoothing=function(t,e){t.imageSmoothingEnabled=t.oImageSmoothingEnabled=t.msImageSmoothingEnabled=t.webkitImageSmoothingEnabled=t.mozImageSmoothingEnabled=e},_.display.BitmapData.makeColor=function(t){return"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+((t>>24&255)/255).toFixed(4)+")"},_.display.BitmapData.loadFromBytes=function(t,e,i){var n=new _.display.BitmapData(0,0);return n.nmeLoadFromBytes(t,e,i),n},_.display.BitmapData.nmeIsPNG=function(t){return t.position=0,137==t.data.getUint8(t.position++)&&80==t.data.getUint8(t.position++)&&78==t.data.getUint8(t.position++)&&71==t.data.getUint8(t.position++)&&13==t.data.getUint8(t.position++)&&10==t.data.getUint8(t.position++)&&26==t.data.getUint8(t.position++)&&10==t.data.getUint8(t.position++)},_.display.BitmapData.nmeIsJPG=function(t){return t.position=0,255==t.data.getUint8(t.position++)&&216==t.data.getUint8(t.position++)},_.display.BitmapData.prototype={nmeLoadFromBytes:function(t,e,i){var n,s,o,a,r,l=this,m=document.createElement("img"),c=this.component,h=null;if(!(n=_.display.BitmapData.nmeIsPNG(t)?"png":_.display.BitmapData.nmeIsJPG(t)?"jpeg":""))throw new _.errors.IOError("BitmapData can only load from ByteArrays with PNG/JPEG data.");h=function(){if(m.removeEventListener("load",h),l.rect.width=c.width=m.width,l.rect.height=c.height=m.height,s=l.qContext=c.getContext("2d"),s.drawImage(m,0,0),null!=e){for(o=-1,a=e.length,r=s.getImageData(0,0,m.width,m.height);++o<a;)r.data[(o<<2)+3]=e.data.getUint8(e.position++);s.putImageData(r,0,0)}null!=i&&i(l)},m.addEventListener("load",h),m.src="data:image/"+n+";base64,"+t.toBase64()},syncData:function(){1==(3&this.qSync)&&(this.qImageData=this.qContext.getImageData(0,0,this.component.width,this.component.height),this.qSync=-4&this.qSync)},syncCanvas:function(){2==(3&this.qSync)&&(this.qContext.putImageData(this.qImageData,0,0),this.qSync=-4&this.qSync)},nmeLoadFromFile:function(t,i){var n=this,s=A.Browser.document.createElement("img");if(null!=i){var o={image:s,texture:this.component,inLoader:i,bitmapData:this};s.addEventListener("load",function(t,e){return function(i){return t(e,i)}}(e(this,this.jeashOnLoad),o),!1),s.addEventListener("error",function(t){s.complete||n.jeashOnLoad(o,t)},!1)}s.src=t},jeashOnLoad:function(t){var e=t.texture,i=t.image.width,n=t.image.height;e.width=i,e.height=n;var s=e.getContext("2d");if(s.drawImage(t.image,0,0,i,n),t.bitmapData.width=i,t.bitmapData.height=n,t.bitmapData.rect=new _.geom.Rectangle(0,0,i,n),null!=t.inLoader){var o=new _.events.Event("complete");o.set_target(t.inLoader),t.inLoader.dispatchEvent(o)}},applyFilter:function(){},noise:function(t,e,i,n,s){null==s&&(s=!1),null==n&&(n=7),null==i&&(i=255),null==e&&(e=0);var o,a,r=2!=(3&this.qSync),l=0,m=i-e+1,c=t,_=(1&n)>0,h=(2&n)>0,u=(4&n)>0,y=(8&n)>0;for(this.lock(),a=this.qImageData.data,o=a.length;o>l;)s?(a[l]=a[l+1]=a[l+2]=e+(c=16807*c%2147483647)%m,l+=3):(a[l++]=_?e+(c=16807*c%2147483647)%m:0,a[l++]=h?e+(c=16807*c%2147483647)%m:0,a[l++]=u?e+(c=16807*c%2147483647)%m:0),a[l++]=y?e+(c=16807*c%2147483647)%m:255;this.qSync|=6,r&&this.unlock()},copyChannel:function(t,e,i,n,s){var o,a,r,l,m,c=~~t.x,_=~~i.x,h=~~t.y,u=~~i.y,y=~~e.width,d=~~e.height,p=t.component.width,g=t.component.height,f=this.component.width,x=this.component.height,B=n,v=s;if(0>_&&(y+=_,_=0),0>u&&(d+=u,u=0),0>c&&(y+=c,c=0),0>h&&(d+=h,h=0),c+y>p&&(y=p-c),h+d>g&&(d=g-h),_+y>f&&(y=f-_),u+d>x&&(d=x-u),!(0>=y||0>=d))if(8==B&&8==v){var b=this.qContext.globalCompositeOperation,w=this.qContext.fillStyle;for(this.qContext.globalCompositeOperation="darker",o=0;o++<8;)this.qContext.drawImage(this.component,_,u,y,d,_,u,y,d);this.qContext.globalCompositeOperation="destination-over",this.qContext.fillStyle="black",this.qContext.fillRect(c,h,y,d),this.qContext.globalCompositeOperation="destination-atop",this.qContext.drawImage(t.handle(),c,h,y,d,_,u,y,d),this.qContext.globalCompositeOperation=b,this.qContext.fillStyle=w}else{var A,S,L=2!=(3&this.qSync);if(this.lock(),S=this.qImageData.data,t.lock(),A=t.qImageData.data,B=8==B?3:4==B?2:2==B?1:1==B?0:-1,v=8==v?3:4==v?2:2==v?1:1==v?0:-1,0>B||0>v)return;for(a=u+d,l=h+d;--l>=h;)for(--a,m=y,o=4*(_+f*a)+v,r=4*(c+p*l)+B;m-->0;)S[r]=A[o],o+=4,r+=4;this.qSync|=6,L&&this.unlock()}},colorTransform:function(t,e){var i=~~t.x,n=~~t.y,s=~~t.width,o=~~t.height,a=this.component.width,r=this.component.height,l=this.qContext.globalCompositeOperation,m=this.qContext.globalAlpha;if(0>i&&(s+=i,i=0),0>n&&(o+=n,n=0),i+s>a&&(s=a-i),n+o>r&&(o=r-n),!(0>=s||0>=o)){if(e.isAlphaMultiplier())this.syncCanvas(),this.qContext.globalCompositeOperation="copy",this.qContext.globalAlpha*=e.alphaMultiplier,this.qContext.drawImage(this.component,i,n,s,o,i,n,s,o),this.qSync|=5;else if(e.isColorSetter()){var c=this.qContext.fillStyle;0!=e.alphaMultiplier?(this.qContext.globalCompositeOperation="source-in",this.qContext.fillStyle="rgb("+~~e.redOffset+","+~~e.greenOffset+","+~~e.blueOffset+")",this.qContext.fillRect(i,n,s,o),this.qContext.globalCompositeOperation="copy",this.qContext.globalAlpha=e.alphaMultiplier,this.qContext.drawImage(this.component,i,n,s,o,i,n,s,o)):(this.qContext.globalCompositeOperation="copy",this.qContext.fillStyle="rgba("+~~e.redOffset+","+~~e.greenOffset+","+~~e.blueOffset+","+~~e.alphaOffset+")",this.qContext.fillRect(i,n,s,o)),this.qContext.fillStyle=c}else{var _=2!=(3&this.qSync);this.lock();var h,u=this.qImageData.data,y=a*r*4,d=y,p=e.redMultiplier,g=e.greenMultiplier,f=e.blueMultiplier,x=e.alphaMultiplier,B=e.redOffset,v=e.greenOffset,b=e.blueOffset,w=e.alphaOffset;if(0==i&&0==n&&s==a&&o==r)for(;(d-=4)>=0;)(h=u[d+3])>0&&(u[d+3]=(h=h*x+w)<0?0:h>255?255:~~h),u[d+2]=(h=u[d+2]*f+b)<0?0:h>255?255:~~h,u[d+1]=(h=u[d+1]*g+v)<0?0:h>255?255:~~h,u[d]=(h=u[d]*p+B)<0?0:h>255?255:~~h;else for(var A,S=n-1,L=n+o;++S<L;)for(d=a*S+i-1<<2,A=d+4*s;(d+=4)<A;)(h=u[d+3])>0&&(u[d+3]=(h=h*x+w)<0?0:h>255?255:~~h),u[d+2]=(h=u[d+2]*f+b)<0?0:h>255?255:~~h,u[d+1]=(h=u[d+1]*g+v)<0?0:h>255?255:~~h,u[d]=(h=u[d]*p+B)<0?0:h>255?255:~~h;this.qSync|=6,_&&this.unlock()}this.qContext.globalCompositeOperation=l,this.qContext.globalAlpha=m}},floodFill:function(t,e,i){var n=1==(3&this.qSync);this.lock();var s,o,a,r,l,m,c,_,h,u,y,d,p=[t|e<<16],g=1,f=this.qImageData.data,x=[],B=this.component.width,v=this.component.height;for(y=e*this.component.width+t<<4,s=f[y],o=f[y+1],a=f[y+2],r=f[y+3],_=i>>>24,l=i>>16&255,m=i>>8&255,c=255&i,u=-1;++u<v;)for(x.push(d=[]),h=0;B>h;)d.push(0),h+=32;for(;g>0;)y=p[--g],h=65535&y,u=y>>>16,0>h||0>u||h>=B||u>=v||0==(x[u][h>>5]>>(31&h)&1)&&(x[u][h>>5]|=1<<(31&h),y=u*this.component.width+h<<2,f[y]==s&&f[y+1]==o&&f[y+2]==a&&f[y+3]==r&&(f[y]=l,f[y+1]=m,f[y+2]=c,f[y+3]=_,(y=h+1)<B&&0==(x[u][y>>5]>>(31&y)&1)&&(p[g++]=u<<16|y),h>0&&0==(x[u][(y=h-1)>>5]>>(31&y)&1)&&(p[g++]=u<<16|y),(y=u+1)<v&&0==(x[y][h>>5]>>(31&h)&1)&&(p[g++]=y<<16|h),u>0&&0==(x[y=u-1][h>>5]>>(31&h)&1)&&(p[g++]=y<<16|h)));this.qSync|=6,n&&this.unlock()},getColorBoundsRect:function(t,e,i){null==i&&(i=!0),this.syncData();var n,s,o,a,r=this.qImageData.data,l=this.component.width,m=this.component.height,c=0,h=0,u=r.length;for(n=0;u>n;)s=(this.qTransparent?r[n+3]<<24:-16777216)|(255&r[n])<<16|(255&r[n+1])<<8|255&r[n+2],s==e==i&&(o=Math.floor((n>>2)%this.component.width),a=Math.floor((n>>2)/this.component.width),l>o&&(l=o),o>c&&(c=o),m>a&&(m=a),a>h&&(h=a)),n+=4;return c>=l&&h>=m?new _.geom.Rectangle(l,m,c-l+1,h-m+1):i?new _.geom.Rectangle(0,0,0,0):new _.geom.Rectangle(0,0,this.component.width,this.component.height)},setPixel32:function(t,e,i){if(!(0>t||0>e||t>=this.component.width||e>=this.component.height))if(2!=(3&this.qSync))this.qPixel.data[0]=i>>>16&255,this.qPixel.data[1]=i>>>8&255,this.qPixel.data[2]=255&i,this.qPixel.data[3]=i>>>24&255,this.qContext.putImageData(this.qPixel,t,e),this.qSync|=5;else{var n=e*this.component.width+t<<2;this.qImageData.data[n]=i>>>16&255,this.qImageData.data[n+1]=i>>>8&255,this.qImageData.data[n+2]=255&i,this.qImageData.data[n+3]=i>>>24&255,this.qSync|=6}},setPixel:function(t,e,i){if(!(0>t||0>e||t>=this.component.width||e>=this.component.height))if(2!=(3&this.qSync))this.qPixel.data[0]=i>>>16&255,this.qPixel.data[1]=i>>>8&255,this.qPixel.data[2]=255&i,this.qPixel.data[3]=255,this.qContext.putImageData(this.qPixel,t,e),this.qSync|=5;else{var n=e*this.component.width+t<<2;this.qImageData.data[n]=i>>>16&255,this.qImageData.data[n+1]=i>>>8&255,this.qImageData.data[n+2]=255&i,this.qImageData.data[n+3]=255,this.qSync|=6}},getPixel32:function(t,e){if(0>t||0>e||t>=this.component.width||e>=this.component.height)return 0;if(1==(3&this.qSync)){var i=this.qContext.getImageData(t,e,1,1).data;return(this.qTransparent?i[3]<<24:-16777216)|i[0]<<16|i[1]<<8|i[2]}var n=e*this.component.width+t<<2;return(this.qTransparent?this.qImageData.data[n+3]<<24:-16777216)|this.qImageData.data[n]<<16|this.qImageData.data[n+1]<<8|this.qImageData.data[n+2]},getPixel:function(t,e){if(0>t||0>e||t>=this.component.width||e>=this.component.height)return 0;if(1==(3&this.qSync)){var i=this.qContext.getImageData(t,e,1,1).data;return i[0]<<16|i[1]<<8|i[2]}var n=e*this.component.width+t<<2;return this.qImageData.data[n]<<16|this.qImageData.data[n+1]<<8|this.qImageData.data[n+2]},unlock:function(){this.syncCanvas()},lock:function(){this.syncData()},draw:function(t,e,i,n,s,o){this.syncCanvas();var a=0;this.qContext.save(),null!=i&&(a=i.alphaMultiplier,i.alphaMultiplier=1,this.qContext.globalAlpha*=a),null!=s&&(this.qContext.beginPath(),this.qContext.rect(s.x,s.y,s.width,s.height),this.qContext.clip(),this.qContext.beginPath()),null!=o&&_.display.BitmapData.setSmoothing(this.qContext,o),t.drawToSurface(this.handle(),this.qContext,e,i,n,s,null),this.qContext.restore(),null!=i&&(i.alphaMultiplier=a),this.qSync|=5},copyPixels:function(t,e,i,n,s,o){if(null==o&&(o=!1),this.syncCanvas(),null!=n)throw"alphaBitmapData is not supported yet.";var a,r,l=t.handle(),m=this.component.width,c=this.component.height;if(!(null==l||(a=l.width)<=0||(r=l.height)<=0)){var _,h,u,y,d=~~i.x,p=~~i.y;null!=e?(_=e.x,h=e.y,u=e.width,y=e.height,0>_&&(u+=_,_=0),0>h&&(y+=h,h=0),_+u>a&&(u=a-_),h+y>r&&(y=r-h)):(_=h=0,u=a,y=r),0>d&&(u+=d,_-=d,d=0),0>p&&(y+=p,h-=p,p=0),d+u>m&&(u=m-d),p+y>c&&(y=c-p),0>=u||0>=y||(this.qTransparent&&!o&&this.qContext.clearRect(d,p,u,y),this.qContext.drawImage(l,_,h,u,y,d,p,u,y),this.qSync|=5)}},drawToSurface:function(t,e,i,n,s,o,a){e.save(),null!=a&&e.imageSmoothingEnabled!=a&&_.display.BitmapData.setSmoothing(e,a),null!=i&&(1==i.a&&0==i.b&&0==i.c&&1==i.d?e.translate(i.tx,i.ty):e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty)),e.drawImage(this.handle(),0,0),e.restore()},getTick:function(){return this.qTick},getTime:function(){return this.qTime},handle:function(){return this.syncCanvas(),0!=(4&this.qSync)&&(this.qTick++,this.qTime=(new Date).getTime(),this.qSync&=-5),this.component},dispose:function(){this.component.width=this.component.height=1,this.qImageData=null,this.qSync=5},clone:function(){this.syncCanvas();var t=new _.display.BitmapData(this.component.width,this.component.height,this.qTransparent,0);return t.qContext.drawImage(this.component,0,0),t.qSync|=5,t},fillRect:function(t,e){if(!(null==t||t.width<=0||t.height<=0)){if(t.equals(this.rect)&&this.qTransparent&&0==(-16777216&e))return this.component.width=this.component.width,void 0;this.qTransparent?-16777216!=(-16777216&e)&&this.qContext.clearRect(t.x,t.y,t.width,t.height):e|=-16777216,0!=(-16777216&e)&&(this.qContext.fillStyle=_.display.BitmapData.makeColor(e),this.qContext.fillRect(t.x,t.y,t.width,t.height)),this.qSync|=5}},__class__:_.display.BitmapData,__properties__:{get_width:"get_width",get_height:"get_height"}},_.display.BitmapDataChannel=function(){},i["flash.display.BitmapDataChannel"]=_.display.BitmapDataChannel,_.display.BitmapDataChannel.__name__=["flash","display","BitmapDataChannel"],_.display.BlendMode=i["flash.display.BlendMode"]={__ename__:!0,__constructs__:["ADD","ALPHA","DARKEN","DIFFERENCE","ERASE","HARDLIGHT","INVERT","LAYER","LIGHTEN","MULTIPLY","NORMAL","OVERLAY","SCREEN","SUBTRACT"]},_.display.BlendMode.ADD=["ADD",0],_.display.BlendMode.ADD.toString=n,_.display.BlendMode.ADD.__enum__=_.display.BlendMode,_.display.BlendMode.ALPHA=["ALPHA",1],_.display.BlendMode.ALPHA.toString=n,_.display.BlendMode.ALPHA.__enum__=_.display.BlendMode,_.display.BlendMode.DARKEN=["DARKEN",2],_.display.BlendMode.DARKEN.toString=n,_.display.BlendMode.DARKEN.__enum__=_.display.BlendMode,_.display.BlendMode.DIFFERENCE=["DIFFERENCE",3],_.display.BlendMode.DIFFERENCE.toString=n,_.display.BlendMode.DIFFERENCE.__enum__=_.display.BlendMode,_.display.BlendMode.ERASE=["ERASE",4],_.display.BlendMode.ERASE.toString=n,_.display.BlendMode.ERASE.__enum__=_.display.BlendMode,_.display.BlendMode.HARDLIGHT=["HARDLIGHT",5],_.display.BlendMode.HARDLIGHT.toString=n,_.display.BlendMode.HARDLIGHT.__enum__=_.display.BlendMode,_.display.BlendMode.INVERT=["INVERT",6],_.display.BlendMode.INVERT.toString=n,_.display.BlendMode.INVERT.__enum__=_.display.BlendMode,_.display.BlendMode.LAYER=["LAYER",7],_.display.BlendMode.LAYER.toString=n,_.display.BlendMode.LAYER.__enum__=_.display.BlendMode,_.display.BlendMode.LIGHTEN=["LIGHTEN",8],_.display.BlendMode.LIGHTEN.toString=n,_.display.BlendMode.LIGHTEN.__enum__=_.display.BlendMode,_.display.BlendMode.MULTIPLY=["MULTIPLY",9],_.display.BlendMode.MULTIPLY.toString=n,_.display.BlendMode.MULTIPLY.__enum__=_.display.BlendMode,_.display.BlendMode.NORMAL=["NORMAL",10],_.display.BlendMode.NORMAL.toString=n,_.display.BlendMode.NORMAL.__enum__=_.display.BlendMode,_.display.BlendMode.OVERLAY=["OVERLAY",11],_.display.BlendMode.OVERLAY.toString=n,_.display.BlendMode.OVERLAY.__enum__=_.display.BlendMode,_.display.BlendMode.SCREEN=["SCREEN",12],_.display.BlendMode.SCREEN.toString=n,_.display.BlendMode.SCREEN.__enum__=_.display.BlendMode,_.display.BlendMode.SUBTRACT=["SUBTRACT",13],_.display.BlendMode.SUBTRACT.toString=n,_.display.BlendMode.SUBTRACT.__enum__=_.display.BlendMode,_.display._CapsStyle={},_.display._CapsStyle.CapsStyle_Impl_=function(){},i["flash.display._CapsStyle.CapsStyle_Impl_"]=_.display._CapsStyle.CapsStyle_Impl_,_.display._CapsStyle.CapsStyle_Impl_.__name__=["flash","display","_CapsStyle","CapsStyle_Impl_"],_.display._CapsStyle.CapsStyle_Impl_._new=function(t){return t},_.display._CapsStyle.CapsStyle_Impl_.toString=function(t){return t},_.display._CapsStyle.CapsStyle_Impl_.fromString=function(t){return t},_.display.Graphics=function(){this.rgPending=!1,this.synced=!0,this.component=_.Lib.jsCanvas(),this.component.setAttribute("node",v.getClassName(v.getClass(this))),this.context=this.component.getContext("2d"),this.context.save(),this.bounds=new _.geom.Rectangle,this.resetBounds(),this.rec=[],this.lineWidth=this.len=0},i["flash.display.Graphics"]=_.display.Graphics,_.display.Graphics.__name__=["flash","display","Graphics"],_.display.Graphics.__interfaces__=[_.display.IBitmapDrawable],_.display.Graphics.prototype={render:function(t,i){var n,s=0,o=-1,a=this._drawMatrix,r=0,l=null;null==a&&(this._drawMatrix=a=new _.geom.Matrix);try{for(;++o<this.len;){var m=n=this.rec[o];switch(m){case 0:throw"__break__";case 1:r>0&&(s=this._closePath(t,i,s,a,l)),i.lineWidth=n=this.rec[++o],n>0?(s|=2,i.strokeStyle=this.rec[++o],i.lineCap=2==(n=this.rec[++o])?"butt":1==n?"square":"round",i.lineJoin=2==(n=this.rec[++o])?"bevel":1==n?"miter":"round"):(s&=-3,i.strokeStyle=null);break;case 2:case 3:if(r>0&&(s=this._closePath(t,i,s,a,l)),s|=1,3==n){l=this.rec[++o].handle();var c=this.rec[++o];this.rec[++o]?(c?s|=8:s&=-9,a.a=this.rec[++o],a.b=this.rec[++o],a.c=this.rec[++o],a.d=this.rec[++o],a.tx=this.rec[++o],a.ty=this.rec[++o],s|=4):(i.fillStyle=i.createPattern(l,c?"repeat":"no-repeat"),s&=-5)}else i.fillStyle=this.rec[++o],s&=-5;r=0;break;case 9:r>0&&(s=this._closePath(t,i,s,a,l),r=0);break;case 10:i.moveTo(this.rec[++o],this.rec[++o]),r++;break;case 11:i.lineTo(this.rec[++o],this.rec[++o]),r++;break;case 12:i.quadraticCurveTo(this.rec[++o],this.rec[++o],this.rec[++o],this.rec[++o]),r++;break;case 13:var h=this.rec[++o],u=this.rec[++o],y=this.rec[++o],p=this.rec[++o];i.rect(h,u,y,p),r++;break;case 14:var h=this.rec[++o],u=this.rec[++o],c=this.rec[++o];0>c&&(c=-c),0!=c&&i.arc(h,u,c,0,2*Math.PI,!0),r++;break;case 17:var h=this.rec[++o],u=this.rec[++o],y=this.rec[++o],p=this.rec[++o],g=h+y/2,f=u+p/2,x=h+y,B=u+p,v=.275892,b=y*v,w=p*v;i.moveTo(g,u),i.bezierCurveTo(g+b,u,x,f-w,x,f),i.bezierCurveTo(x,f+w,g+b,B,g,B),i.bezierCurveTo(g-b,B,h,f+w,h,f),i.bezierCurveTo(h,f-w,g-b,u,g,u),r++;break;case 15:var h=this.rec[++o],u=this.rec[++o],y=this.rec[++o],p=this.rec[++o],A=this.rec[++o],S=this.rec[++o];null==S||null==e(i,i.quadraticCurveTo)?(i.moveTo(h+A,u+p),i.arcTo(h+y-A,u+p-A,h+y,u+p-A,A),i.arcTo(h+y,u+A,h+y-A,u,A),i.arcTo(h+A,u,h,u+A,A),i.arcTo(h+A,u+p-A,h+A,u+p,A)):(i.moveTo(h+A,u+p),i.lineTo(h+y-A,u+p),i.quadraticCurveTo(h+y,u+p,h+y,u+p-S),i.lineTo(h+y,u+S),i.quadraticCurveTo(h+y,u,h+y-A,u),i.lineTo(h+A,u),i.quadraticCurveTo(h,u,h,u+S),i.lineTo(h,u+p-S),i.quadraticCurveTo(h,u+p,h+A,u+p)),r++;break;case 16:var L,M,C,T,I,D,V,E,F=this.rec[++o],P=F.handle(),R=this.rec[++o],j=0!=(1&R),O=0!=(2&R),J=0!=(4&R),N=0!=(8&R),k=0!=(16&R),q=this.rec[++o]-1;for(i.save(),i.globalCompositeOperation=0!=(65536&R)?"lighter":"source-over";q>o;)L=this.rec[++o],M=this.rec[++o],C=this.rec[++o],T=this.rec[++o],I=this.rec[++o],D=this.rec[++o],V=this.rec[++o],E=this.rec[++o],i.save(),k?i.transform(this.rec[++o],this.rec[++o],this.rec[++o],this.rec[++o],L,M):(i.translate(L,M),j&&i.scale(n=this.rec[++o],n),O&&i.rotate(this.rec[++o])),J&&(o+=3),N&&(i.globalAlpha=this.rec[++o]),i.drawImage(P,I,D,V,E,-C,-T,V,E),i.restore();i.restore();break;default:throw console&&console.log("Unknown operation: "+d.string(n)),"__break__"}}}catch(U){if("__break__"!=U)throw U}r>0&&(s=this._closePath(t,i,s,a,l))},_closePath:function(t,e,i,n,s){return 1&i&&(e.closePath(),4&i?(e.save(),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),e.fillStyle=e.createPattern(s,8&i?"repeat":"no-repeat"),e.fill(),e.restore()):e.fill()),2&i&&e.stroke(),e.beginPath(),i},drawToSurface:function(t,e,i){e.save(),null!=i&&e.transform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.render(t,e),e.restore()},rgba:function(t,e){return"rgba("+(t>>16&255)+", "+(t>>8&255)+", "+(255&t)+", "+e.toFixed(4)+")"},drawEllipse:function(t,e,i,n){this.rec[this.len++]=17,this.rec[this.len++]=t,this.rec[this.len++]=e,this.rec[this.len++]=i,this.rec[this.len++]=n,this.grab(t,e,t+i,e+n)},drawCircle:function(t,e,i){this.rec[this.len++]=14,this.rec[this.len++]=t,this.rec[this.len++]=e,this.rec[this.len++]=i;var n=i;n+=this.lineWidth/2,this.grab(t-n,e-n,t+n,e+n)},drawRoundRect:function(t,e,i,n,s,o){this.rec[this.len++]=15,this.rec[this.len++]=t,this.rec[this.len++]=e,this.rec[this.len++]=i,this.rec[this.len++]=n,this.rec[this.len++]=s,this.rec[this.len++]=o;var a=this.lineWidth/2;this.grab(t-a,e-a,t+i+a,e+n+a)},drawRect:function(t,e,i,n){this.rec[this.len++]=13,this.rec[this.len++]=t,this.rec[this.len++]=e,this.rec[this.len++]=i,this.rec[this.len++]=n;var s=this.lineWidth/2;this.grab(t-s,e-s,t+i+s,e+n+s)},curveTo:function(t,e,i,n){this.rec[this.len++]=12,this.rec[this.len++]=t,this.rec[this.len++]=e,this.rec[this.len++]=i,this.rec[this.len++]=n;var s=this.lineWidth/2;this.grab(i-s,n-s,i+s,n+s)},lineTo:function(t,e){this.rec[this.len++]=11,this.rec[this.len++]=t,this.rec[this.len++]=e;var i=this.lineWidth/2;this.grab(t-i,e-i,t+i,e+i)},moveTo:function(t,e){this.rec[this.len++]=10,this.rec[this.len++]=t,this.rec[this.len++]=e;var i=this.lineWidth/2;this.grab(t-i,e-i,t+i,e+i)},endFill:function(){this.rec[this.len++]=9,this.invalidate()},beginBitmapFill:function(t,e,i){this.rec[this.len++]=3,this.rec[this.len++]=t,this.rec[this.len++]=null!=i?i:!0,(this.rec[this.len++]=null!=e)&&(this.rec[this.len++]=e.a,this.rec[this.len++]=e.b,this.rec[this.len++]=e.c,this.rec[this.len++]=e.d,this.rec[this.len++]=e.tx,this.rec[this.len++]=e.ty)},beginFill:function(t,e){null==e&&(e=1),null==t&&(t=0),this.rec[this.len++]=2,this.rec[this.len++]=_.Lib.rgbf(t,e)},lineStyle:function(t,e,i,n,s,o,a){this.rec[this.len++]=1,this.rec[this.len++]=this.lineWidth=t>0?t:0,t>0&&(this.rec[this.len++]=_.Lib.rgbf(null!=e?e:0,null!=i?i:1),this.rec[this.len++]="none"==o?2:"square"==o?1:0,this.rec[this.len++]="bevel"==a?2:"miter"==a?1:0)},clear:function(){for(var t=0;t<this.len;)this.rec[t++]=0;this.lineWidth=this.len=0,this.resetBounds(),this.invalidate()},invalidate:function(){this.synced&&(this.synced=!1,this.rgPending||null==this.displayObject||null==this.displayObject.get_stage()||(_.Lib.schedule(e(this,this.regenerate)),this.rgPending=!0))},grab:function(t,e,i,n){var s;t<(s=this.bounds.x)&&(s-=t,this.bounds.x-=s,this.bounds.width+=s),e<(s=this.bounds.y)&&(s-=e,this.bounds.y-=s,this.bounds.height+=s),i>(s=this.bounds.get_right())&&(this.bounds.width+=i-s),n>(s=this.bounds.get_bottom())&&(this.bounds.height+=n-s),this.invalidate()},resetBounds:function(){this.bounds.setVoid(),this.invalidate()},set_displayObject:function(t){return this.displayObject!=t&&(this.displayObject=t,this.synced||_.Lib.schedule(e(this,this.regenerate))),t},regenerate:function(){var t=this.component,e=this.component.style,i=this.context,n=this.bounds,s=~~(n.x-2),o=~~(n.y-2),a=Math.ceil(n.width+4),r=Math.ceil(n.height+4);return this.synced=!0,this.rgPending=!1,n.width<=0||n.height<=0?(t.width=t.height=1,e.top=e.left="0",void 0):((this.compX!=s||this.compY!=o)&&(e.left=s+"px",e.top=o+"px"),a!=t.width||r!=t.height?(t.width=a,t.height=r):i.clearRect(0,0,t.width,t.height),i.save(),i.translate(-s,-o),this.render(t,i),i.restore(),void 0)},__class__:_.display.Graphics,__properties__:{set_displayObject:"set_displayObject"}},_.display._JointStyle={},_.display._JointStyle.JointStyle_Impl_=function(){},i["flash.display._JointStyle.JointStyle_Impl_"]=_.display._JointStyle.JointStyle_Impl_,_.display._JointStyle.JointStyle_Impl_.__name__=["flash","display","_JointStyle","JointStyle_Impl_"],_.display._JointStyle.JointStyle_Impl_._new=function(t){return t},_.display._JointStyle.JointStyle_Impl_.toString=function(t){return t},_.display._JointStyle.JointStyle_Impl_.fromString=function(t){return t},_.display.Loader=function(){_.display.Sprite.call(this),this.contentLoaderInfo=_.display.LoaderInfo.create(this)},i["flash.display.Loader"]=_.display.Loader,_.display.Loader.__name__=["flash","display","Loader"],_.display.Loader.__super__=_.display.Sprite,_.display.Loader.prototype=t(_.display.Sprite.prototype,{handleLoad:function(t){t.set_currentTarget(this),this.contentLoaderInfo.removeEventListener("complete",e(this,this.handleLoad))},loadBytes:function(t){var i=this;try{this.contentLoaderInfo.addEventListener("complete",e(this,this.handleLoad),!1),_.display.BitmapData.loadFromBytes(t,null,function(t){i.content=new _.display.Bitmap(t),i.contentLoaderInfo.content=i.content,i.addChild(i.content);var e=new _.events.Event("complete");e.set_currentTarget(i),i.contentLoaderInfo.dispatchEvent(e)})}catch(n){console.log("Error "+d.string(n));var s=new _.events.IOErrorEvent("ioError");s.set_currentTarget(this),this.contentLoaderInfo.dispatchEvent(s)}},load:function(t){var i="",n=t.url.split(".");n.length>0&&(i=n[n.length-1].toLowerCase());var s=!0;this.contentLoaderInfo.url=t.url,this.contentLoaderInfo.contentType=function(e){var n;switch(i){case"swf":n="application/x-shockwave-flash";break;case"jpg":case"jpeg":n=function(){var t;return s=!1,t="image/jpeg"}(e);break;case"png":n="image/png";break;case"gif":n="image/gif";break;default:n=function(){throw"Unrecognized file "+t.url}(e)}return n}(this),this.mImage=new _.display.BitmapData(0,0,s);try{this.contentLoaderInfo.addEventListener("complete",e(this,this.handleLoad),!1),this.mImage.nmeLoadFromFile(t.url,this.contentLoaderInfo),this.content=new _.display.Bitmap(this.mImage),this.contentLoaderInfo.content=this.content,this.addChild(this.content)}catch(o){console.log("Error "+d.string(o));var a=new _.events.IOErrorEvent("ioError");return a.set_currentTarget(this),this.contentLoaderInfo.dispatchEvent(a),void 0}null==this.mShape&&(this.mShape=new _.display.Shape,this.addChild(this.mShape))},__class__:_.display.Loader}),_.display.LoaderInfo=function(){_.events.EventDispatcher.call(this),this.bytesLoaded=this.bytesTotal=0,this.childAllowsParent=!0,this.parameters={}},i["flash.display.LoaderInfo"]=_.display.LoaderInfo,_.display.LoaderInfo.__name__=["flash","display","LoaderInfo"],_.display.LoaderInfo.create=function(t){var e=new _.display.LoaderInfo;return null!=t?e.loader=t:e.url="",e},_.display.LoaderInfo.__super__=_.events.EventDispatcher,_.display.LoaderInfo.prototype=t(_.events.EventDispatcher.prototype,{__class__:_.display.LoaderInfo}),_.display.MovieClip=function(){_.display.Sprite.call(this),this.enabled=!0,this.qIndex=this.qTotal=0,this.loaderInfo=_.display.LoaderInfo.create()},i["flash.display.MovieClip"]=_.display.MovieClip,_.display.MovieClip.__name__=["flash","display","MovieClip"],_.display.MovieClip.__super__=_.display.Sprite,_.display.MovieClip.prototype=t(_.display.Sprite.prototype,{get_totalFrames:function(){return this.qTotal},get_framesLoaded:function(){return this.qTotal},get_currentFrame:function(){return this.qIndex},stop:function(){},prevFrame:function(){},play:function(){},nextFrame:function(){},gotoAndStop:function(){},gotoAndPlay:function(){},__class__:_.display.MovieClip,__properties__:t(_.display.Sprite.prototype.__properties__,{get_currentFrame:"get_currentFrame",get_framesLoaded:"get_framesLoaded",get_totalFrames:"get_totalFrames"})}),_.display.Shape=function(){(this.graphics=new _.display.Graphics).set_displayObject(this),this.component=this.graphics.component,_.display.DisplayObject.call(this)},i["flash.display.Shape"]=_.display.Shape,_.display.Shape.__name__=["flash","display","Shape"],_.display.Shape.__interfaces__=[_.display.IBitmapDrawable],_.display.Shape.__super__=_.display.DisplayObject,_.display.Shape.prototype=t(_.display.DisplayObject.prototype,{set_stage:function(t){var e=null==this.get_stage()&&null!=t,i=_.display.DisplayObject.prototype.set_stage.call(this,t);return e&&this.graphics.invalidate(),i},drawToSurface:function(t,e,i,n,s,o,a){this.graphics.drawToSurface(t,e,i,n,s,o,a)},__class__:_.display.Shape}),_.display.Stage=function(){this.isTouchScreen=!1,this.frameRate=0,_.display.DisplayObjectContainer.call(this);var t=this.component.style;t.position="absolute",t.overflow="hidden",t.width=t.height="100%",this.qTimeStamp=_.Lib.getTimer(),_.Lib.requestAnimationFrame(e(this,this.onAnimationFrame)),this.mousePos=new _.geom.Point;var i=A.Browser.window;i.addEventListener("mousemove",e(this,this.onMouseMove)),i.addEventListener("touchstart",e(this,this.onTouch)),i.addEventListener("touchend",e(this,this.onTouch)),i.addEventListener("touchmove",e(this,this.onTouch))},i["flash.display.Stage"]=_.display.Stage,_.display.Stage.__name__=["flash","display","Stage"],_.display.Stage.__super__=_.display.DisplayObjectContainer,_.display.Stage.prototype=t(_.display.DisplayObjectContainer.prototype,{onAnimationFrame:function(){for(var t=_.Lib.getTimer(),i=-1;++i<_.Lib.schLength;)_.Lib.schList[i](),_.Lib.schList[i]=null;if(_.Lib.schLength=0,this.frameRate<=0||t-this.qTimeStamp>=1e3/this.frameRate){this.qTimeStamp=t;var n=new _.events.Event("enterFrame");this.broadcastEvent(n)}_.Lib.requestAnimationFrame(e(this,this.onAnimationFrame))},get_stage:function(){return this},get_stageHeight:function(){return A.Browser.window.innerHeight},get_stageWidth:function(){return A.Browser.window.innerWidth},set_focus:function(t){return null!=t?t.giveFocus():this.component.blur(),t},get_focus:function(){var t=document.activeElement;return null!=t&&A.Boot.__instanceof(t=t.node,_.display.InteractiveObject)?t:null},removeEventListener:function(t,e,i,n,s){null==s&&(s=!1),null==n&&(n=0),null==i&&(i=!1);var o=this.component;this.component=window,_.display.DisplayObjectContainer.prototype.removeEventListener.call(this,t,e,i,n,s),this.component=o},addEventListener:function(t,e,i,n,s){null==s&&(s=!1),null==n&&(n=0),null==i&&(i=!1);var o=this.component;this.component=window,_.display.DisplayObjectContainer.prototype.addEventListener.call(this,t,e,i,n,s),this.component=o},onMouseMove:function(t){this.isTouchScreen||(this.mousePos.x=t.pageX,this.mousePos.y=t.pageY)},onTouch:function(t){this.isTouchScreen=!0,t.targetTouches.length>0&&(this.mousePos.x=t.targetTouches[0].pageX,this.mousePos.y=t.targetTouches[0].pageY),t.preventDefault()
},__class__:_.display.Stage,__properties__:t(_.display.DisplayObjectContainer.prototype.__properties__,{get_stageWidth:"get_stageWidth",get_stageHeight:"get_stageHeight",set_focus:"set_focus",get_focus:"get_focus"})}),_.display.StageAlign=i["flash.display.StageAlign"]={__ename__:!0,__constructs__:["TOP_RIGHT","TOP_LEFT","TOP","RIGHT","LEFT","BOTTOM_RIGHT","BOTTOM_LEFT","BOTTOM"]},_.display.StageAlign.TOP_RIGHT=["TOP_RIGHT",0],_.display.StageAlign.TOP_RIGHT.toString=n,_.display.StageAlign.TOP_RIGHT.__enum__=_.display.StageAlign,_.display.StageAlign.TOP_LEFT=["TOP_LEFT",1],_.display.StageAlign.TOP_LEFT.toString=n,_.display.StageAlign.TOP_LEFT.__enum__=_.display.StageAlign,_.display.StageAlign.TOP=["TOP",2],_.display.StageAlign.TOP.toString=n,_.display.StageAlign.TOP.__enum__=_.display.StageAlign,_.display.StageAlign.RIGHT=["RIGHT",3],_.display.StageAlign.RIGHT.toString=n,_.display.StageAlign.RIGHT.__enum__=_.display.StageAlign,_.display.StageAlign.LEFT=["LEFT",4],_.display.StageAlign.LEFT.toString=n,_.display.StageAlign.LEFT.__enum__=_.display.StageAlign,_.display.StageAlign.BOTTOM_RIGHT=["BOTTOM_RIGHT",5],_.display.StageAlign.BOTTOM_RIGHT.toString=n,_.display.StageAlign.BOTTOM_RIGHT.__enum__=_.display.StageAlign,_.display.StageAlign.BOTTOM_LEFT=["BOTTOM_LEFT",6],_.display.StageAlign.BOTTOM_LEFT.toString=n,_.display.StageAlign.BOTTOM_LEFT.__enum__=_.display.StageAlign,_.display.StageAlign.BOTTOM=["BOTTOM",7],_.display.StageAlign.BOTTOM.toString=n,_.display.StageAlign.BOTTOM.__enum__=_.display.StageAlign,_.display.StageDisplayState=i["flash.display.StageDisplayState"]={__ename__:!0,__constructs__:["FULL_SCREEN","FULL_SCREEN_INTERACTIVE","NORMAL"]},_.display.StageDisplayState.FULL_SCREEN=["FULL_SCREEN",0],_.display.StageDisplayState.FULL_SCREEN.toString=n,_.display.StageDisplayState.FULL_SCREEN.__enum__=_.display.StageDisplayState,_.display.StageDisplayState.FULL_SCREEN_INTERACTIVE=["FULL_SCREEN_INTERACTIVE",1],_.display.StageDisplayState.FULL_SCREEN_INTERACTIVE.toString=n,_.display.StageDisplayState.FULL_SCREEN_INTERACTIVE.__enum__=_.display.StageDisplayState,_.display.StageDisplayState.NORMAL=["NORMAL",2],_.display.StageDisplayState.NORMAL.toString=n,_.display.StageDisplayState.NORMAL.__enum__=_.display.StageDisplayState,_.display.StageScaleMode=i["flash.display.StageScaleMode"]={__ename__:!0,__constructs__:["SHOW_ALL","NO_SCALE","NO_BORDER","EXACT_FIT"]},_.display.StageScaleMode.SHOW_ALL=["SHOW_ALL",0],_.display.StageScaleMode.SHOW_ALL.toString=n,_.display.StageScaleMode.SHOW_ALL.__enum__=_.display.StageScaleMode,_.display.StageScaleMode.NO_SCALE=["NO_SCALE",1],_.display.StageScaleMode.NO_SCALE.toString=n,_.display.StageScaleMode.NO_SCALE.__enum__=_.display.StageScaleMode,_.display.StageScaleMode.NO_BORDER=["NO_BORDER",2],_.display.StageScaleMode.NO_BORDER.toString=n,_.display.StageScaleMode.NO_BORDER.__enum__=_.display.StageScaleMode,_.display.StageScaleMode.EXACT_FIT=["EXACT_FIT",3],_.display.StageScaleMode.EXACT_FIT.toString=n,_.display.StageScaleMode.EXACT_FIT.__enum__=_.display.StageScaleMode,_.errors={},_.errors.Error=function(t,e){null==e&&(e=0),null==t&&(t=""),this.message=t,this.errorID=e},i["flash.errors.Error"]=_.errors.Error,_.errors.Error.__name__=["flash","errors","Error"],_.errors.Error.prototype={toString:function(){return null!=this.message?this.message:"Error"},getStackTrace:function(){return w.CallStack.toString(w.CallStack.exceptionStack())},__class__:_.errors.Error},_.errors.IOError=function(t){null==t&&(t=""),_.errors.Error.call(this,t)},i["flash.errors.IOError"]=_.errors.IOError,_.errors.IOError.__name__=["flash","errors","IOError"],_.errors.IOError.__super__=_.errors.Error,_.errors.IOError.prototype=t(_.errors.Error.prototype,{__class__:_.errors.IOError}),_.events.Event=function(t,e,i){null==i&&(i=!1),null==e&&(e=!1),this.type=t,this.bubbles=e,this.cancelable=i},i["flash.events.Event"]=_.events.Event,_.events.Event.__name__=["flash","events","Event"],_.events.Event.prototype={clone:function(){return new _.events.Event(this.type,this.bubbles,this.cancelable)},isDefaultPrevented:function(){return this.defaultPrevented},set_currentTarget:function(t){return this._current=t},get_currentTarget:function(){return this._current||this.currentTarget},set_target:function(t){return this._target=t},get_target:function(){return this._target||this.target},__class__:_.events.Event,__properties__:{set_target:"set_target",get_target:"get_target",set_currentTarget:"set_currentTarget",get_currentTarget:"get_currentTarget"}},_.events.TextEvent=function(t,e,i,n){null==n&&(n=""),null==i&&(i=!1),null==e&&(e=!1),_.events.Event.call(this,t,e,i),this.text=n},i["flash.events.TextEvent"]=_.events.TextEvent,_.events.TextEvent.__name__=["flash","events","TextEvent"],_.events.TextEvent.__super__=_.events.Event,_.events.TextEvent.prototype=t(_.events.Event.prototype,{__class__:_.events.TextEvent}),_.events.ErrorEvent=function(t,e,i,n){_.events.TextEvent.call(this,t,e,i),this.text=n},i["flash.events.ErrorEvent"]=_.events.ErrorEvent,_.events.ErrorEvent.__name__=["flash","events","ErrorEvent"],_.events.ErrorEvent.__super__=_.events.TextEvent,_.events.ErrorEvent.prototype=t(_.events.TextEvent.prototype,{__class__:_.events.ErrorEvent}),_.events.FocusEvent=function(t,e,i,n,s,o){null==o&&(o=0),null==s&&(s=!1),null==i&&(i=!1),null==e&&(e=!1),_.events.Event.call(this,t,e,i),this.keyCode=o,this.shiftKey=1==s,this.set_target(n)},i["flash.events.FocusEvent"]=_.events.FocusEvent,_.events.FocusEvent.__name__=["flash","events","FocusEvent"],_.events.FocusEvent.__super__=_.events.Event,_.events.FocusEvent.prototype=t(_.events.Event.prototype,{__class__:_.events.FocusEvent}),_.events.HTTPStatusEvent=function(t,e,i,n){null==n&&(n=0),null==i&&(i=!1),null==e&&(e=!1),this.status=n,_.events.Event.call(this,t,e,i)},i["flash.events.HTTPStatusEvent"]=_.events.HTTPStatusEvent,_.events.HTTPStatusEvent.__name__=["flash","events","HTTPStatusEvent"],_.events.HTTPStatusEvent.__super__=_.events.Event,_.events.HTTPStatusEvent.prototype=t(_.events.Event.prototype,{__class__:_.events.HTTPStatusEvent}),_.events.IOErrorEvent=function(t,e,i,n){null==n&&(n=""),null==i&&(i=!1),null==e&&(e=!1),_.events.Event.call(this,t,e,i),this.text=n},i["flash.events.IOErrorEvent"]=_.events.IOErrorEvent,_.events.IOErrorEvent.__name__=["flash","events","IOErrorEvent"],_.events.IOErrorEvent.__super__=_.events.Event,_.events.IOErrorEvent.prototype=t(_.events.Event.prototype,{__class__:_.events.IOErrorEvent}),_.events.KeyboardEvent=function(t,e,i,n,s){null==s&&(s=0),null==n&&(n=0),null==i&&(i=!1),null==e&&(e=!0),_.events.Event.call(this,t,e,i),this.keyCode=s,this.charCode=n},i["flash.events.KeyboardEvent"]=_.events.KeyboardEvent,_.events.KeyboardEvent.__name__=["flash","events","KeyboardEvent"],_.events.KeyboardEvent.__super__=_.events.Event,_.events.KeyboardEvent.prototype=t(_.events.Event.prototype,{__class__:_.events.KeyboardEvent}),_.events.MouseEvent=function(t,e,i,n,s,o,a,r,l,m,c){null==c&&(c=0),null==m&&(m=!1),null==l&&(l=!1),null==r&&(r=!1),null==a&&(a=!1),null==i&&(i=!1),null==e&&(e=!0),_.events.Event.call(this,t,e,i),this.ctrlKey=a,this.altKey=r,this.shiftKey=l,this.relatedObject=o,this.button=m?0:1,this.wheelDelta=c},i["flash.events.MouseEvent"]=_.events.MouseEvent,_.events.MouseEvent.__name__=["flash","events","MouseEvent"],_.events.MouseEvent.__super__=_.events.Event,_.events.MouseEvent.prototype=t(_.events.Event.prototype,{updateAfterEvent:function(){},get_localY:function(){return this.get_localPoint().y},get_localX:function(){return this.get_localPoint().x},get_localPoint:function(){var t=_.events.MouseEvent.convPoint;return null==t&&(_.events.MouseEvent.convPoint=t=new _.geom.Point),t.x=this.pageX,t.y=this.pageY,null!=this.relatedObject?this.relatedObject.globalToLocal(t,t):t},get_stageY:function(){return this.pageY},get_stageX:function(){return this.pageX},get_delta:function(){return this.wheelDelta},get_buttonDown:function(){return 0==this.button},__class__:_.events.MouseEvent,__properties__:t(_.events.Event.prototype.__properties__,{get_localX:"get_localX",get_localY:"get_localY",get_stageX:"get_stageX",get_stageY:"get_stageY",get_buttonDown:"get_buttonDown",get_delta:"get_delta"})}),_.events.ProgressEvent=function(t,e,i,n,s){null==s&&(s=0),null==n&&(n=0),null==i&&(i=!1),null==e&&(e=!1),_.events.Event.call(this,t,e,i),this.bytesLoaded=n,this.bytesTotal=s},i["flash.events.ProgressEvent"]=_.events.ProgressEvent,_.events.ProgressEvent.__name__=["flash","events","ProgressEvent"],_.events.ProgressEvent.__super__=_.events.Event,_.events.ProgressEvent.prototype=t(_.events.Event.prototype,{__class__:_.events.ProgressEvent}),_.events.SecurityErrorEvent=function(t,e,i,n){null==n&&(n=""),null==i&&(i=!1),null==e&&(e=!1),_.events.ErrorEvent.call(this,t,e,i),this.text=n},i["flash.events.SecurityErrorEvent"]=_.events.SecurityErrorEvent,_.events.SecurityErrorEvent.__name__=["flash","events","SecurityErrorEvent"],_.events.SecurityErrorEvent.__super__=_.events.ErrorEvent,_.events.SecurityErrorEvent.prototype=t(_.events.ErrorEvent.prototype,{__class__:_.events.SecurityErrorEvent}),_.events.TouchEvent=function(t,e,i,n,s,o,a,r,l,m,c,h,u,y){null==y&&(y=!1),null==u&&(u=!1),null==h&&(h=!1),null==m&&(m=0),null==l&&(l=0),null==r&&(r=0),null==a&&(a=0),null==o&&(o=0),null==s&&(s=!1),null==n&&(n=0),null==i&&(i=!1),null==e&&(e=!0),_.events.Event.call(this,t,e,i),this.altKey=u,this.shiftKey=y,this.ctrlKey=h},i["flash.events.TouchEvent"]=_.events.TouchEvent,_.events.TouchEvent.__name__=["flash","events","TouchEvent"],_.events.TouchEvent.__super__=_.events.Event,_.events.TouchEvent.prototype=t(_.events.Event.prototype,{__class__:_.events.TouchEvent}),_.filters={},_.filters.BitmapFilter=function(t){this._mType=t},i["flash.filters.BitmapFilter"]=_.filters.BitmapFilter,_.filters.BitmapFilter.__name__=["flash","filters","BitmapFilter"],_.filters.BitmapFilter.prototype={nmeApplyFilter:function(t,e,i){null==i&&(i=!1)},nmePreFilter:function(){},clone:function(){throw"Implement in subclass. BitmapFilter::clone"},__class__:_.filters.BitmapFilter},_.geom={},_.geom.ColorTransform=function(t,e,i,n,s,o,a,r){null==r&&(r=0),null==a&&(a=0),null==o&&(o=0),null==s&&(s=0),null==n&&(n=1),null==i&&(i=1),null==e&&(e=1),null==t&&(t=1),this.redMultiplier=t,this.greenMultiplier=e,this.blueMultiplier=i,this.alphaMultiplier=n,this.redOffset=s,this.greenOffset=o,this.blueOffset=a,this.alphaOffset=r},i["flash.geom.ColorTransform"]=_.geom.ColorTransform,_.geom.ColorTransform.__name__=["flash","geom","ColorTransform"],_.geom.ColorTransform.prototype={set_color:function(t){return this.redOffset=t>>16&255,this.greenOffset=t>>8&255,this.blueOffset=255&t,this.redMultiplier=this.greenMultiplier=this.blueMultiplier=0,this.get_color()},get_color:function(){return(0|this.redOffset)<<16|(0|this.greenOffset)<<8|(0|this.blueOffset)},isAlphaMultiplier:function(){return 1==this.redMultiplier&&1==this.greenMultiplier&&1==this.blueMultiplier&&0==this.redOffset&&0==this.greenOffset&&0==this.blueOffset&&0==this.alphaOffset},isColorSetter:function(){return 0==this.redMultiplier&&0==this.greenMultiplier&&0==this.blueMultiplier&&(0==this.alphaMultiplier||0==this.alphaOffset)},concat:function(t){this.redMultiplier+=t.redMultiplier,this.greenMultiplier+=t.greenMultiplier,this.blueMultiplier+=t.blueMultiplier,this.alphaMultiplier+=t.alphaMultiplier},__class__:_.geom.ColorTransform,__properties__:{set_color:"set_color",get_color:"get_color"}},_.geom.Matrix=function(t,e,i,n,s,o){this.a=null==t?1:t,this.b=null==e?0:e,this.c=null==i?0:i,this.d=null==n?1:n,this.tx=null==s?0:s,this.ty=null==o?0:o},i["flash.geom.Matrix"]=_.geom.Matrix,_.geom.Matrix.__name__=["flash","geom","Matrix"],_.geom.Matrix.prototype={to3dString:function(){return"matrix3d("+this.a+", "+this.b+", 0, 0, "+this.c+", "+this.d+", 0, 0, 0, 0, 1, 0, "+this.tx+", "+this.ty+", 0, 1)"},toString:function(){return"matrix("+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.tx+", "+this.ty+")"},transformPoint:function(t){return new _.geom.Point(t.x*this.a+t.y*this.c+this.tx,t.x*this.b+t.y*this.d+this.ty)},concat:function(t){var e;e=this.a*t.a+this.b*t.c,this.b=this.a*t.b+this.b*t.d,this.a=e,e=this.c*t.a+this.d*t.c,this.d=this.c*t.b+this.d*t.d,this.c=e,e=this.tx*t.a+this.ty*t.c+t.tx,this.ty=this.tx*t.b+this.ty*t.d+t.ty,this.tx=e},scale:function(t,e){this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.tx*=t,this.ty*=e},rotate:function(t){var e,i=Math.cos(t),n=Math.sin(t);e=this.a*i-this.b*n,this.b=this.a*n+this.b*i,this.a=e,e=this.c*i-this.d*n,this.d=this.c*n+this.d*i,this.c=e,e=this.tx*i-this.ty*n,this.ty=this.tx*n+this.ty*i,this.tx=e},translate:function(t,e){this.tx+=t,this.ty+=e},invert:function(){var t,e=this.a*this.d-this.b*this.c;0==e?(this.a=this.b=this.c=this.d=0,this.tx=-this.tx,this.ty=-this.ty):(e=1/e,t=this.d*e,this.d=this.a*e,this.a=t,this.b*=-e,this.c*=-e,t=-this.a*this.tx-this.c*this.ty,this.ty=-this.b*this.tx-this.d*this.ty,this.tx=t)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty},isIdentity:function(){return 1==this.a&&1==this.d&&0==this.tx&&0==this.ty&&0==this.b&&0==this.c},identity:function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},clone:function(){return new _.geom.Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty)},__class__:_.geom.Matrix},_.geom.Point=function(t,e){this.x=null==t?0:t,this.y=null==e?0:e},i["flash.geom.Point"]=_.geom.Point,_.geom.Point.__name__=["flash","geom","Point"],_.geom.Point.interpolate=function(t,e,i){return new _.geom.Point(t.x+i*(e.x-t.x),t.y+i*(e.y-t.y))},_.geom.Point.polar=function(t,e){return new _.geom.Point(Math.cos(e)*t,Math.sin(e)*t)},_.geom.Point.prototype={subtract:function(t){return new _.geom.Point(this.x-t.x,this.y-t.y)},add:function(t){return new _.geom.Point(this.x+t.x,this.y+t.y)},offset:function(t,e){this.x+=t,this.y+=e},normalize:function(t){if(0==this.y)this.x=this.x<0?-t:t;else if(0==this.x)this.y=this.y<0?-t:t;else{var e=t/Math.sqrt(this.x*this.x+this.y*this.y);this.x*=e,this.y*=e}},toString:function(){return"point("+this.x+", "+this.y+")"},get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setTo:function(t,e){this.x=t,this.y=e},equals:function(t){return this.x==t.x&&this.y==t.y},clone:function(){return new _.geom.Point(this.x,this.y)},__class__:_.geom.Point,__properties__:{get_length:"get_length"}},_.geom.Rectangle=function(t,e,i,n){null==n&&(n=0),null==i&&(i=0),null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e,this.width=i,this.height=n},i["flash.geom.Rectangle"]=_.geom.Rectangle,_.geom.Rectangle.__name__=["flash","geom","Rectangle"],_.geom.Rectangle.prototype={toString:function(){return"Rectangle("+this.x+", "+this.y+", "+this.width+", "+this.height+")"},transform:function(t){var e,i,n,s,o;s=i=t.a*this.x+t.c*this.y,o=n=t.b*this.x+t.d*this.y,e=t.a*(this.x+this.width)+t.c*this.y,i>e&&(i=e),e>s&&(s=e),e=t.b*(this.x+this.width)+t.d*this.y,n>e&&(n=e),e>o&&(o=e),e=t.a*this.x+t.c*(this.y+this.height),i>e&&(i=e),e>s&&(s=e),e=t.b*this.x+t.d*(this.y+this.height),n>e&&(n=e),e>o&&(o=e),e=t.a*(this.x+this.width)+t.c*(this.y+this.height),i>e&&(i=e),e>s&&(s=e),e=t.b*(this.x+this.width)+t.d*(this.y+this.height),n>e&&(n=e),e>o&&(o=e),this.x=i+t.tx,this.width=s-i,this.y=n+t.ty,this.height=o-n},offsetPoint:function(t){this.x+=t.x,this.y+=t.y},offset:function(t,e){this.x+=t,this.y+=e},inflatePoint:function(t){this.inflate(t.x,t.y)},inflate:function(t,e){this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},union:function(t){var e,i,n,s;return new _.geom.Rectangle((e=this.x)<(n=t.x)?e:n,(i=this.y)<(s=t.y)?i:s,(e+=this.width)>(n+=t.width)?e:n,(i+=this.height)>(s+=t.height)?i:s)},join:function(t){var e;(e=t.x-this.x)<0&&(this.x+=e,this.width-=e),(e=t.y-this.y)<0&&(this.y+=e,this.height-=e),(e=t.x+t.width-(this.x+this.width))>0&&(this.width+=e),(e=t.y+t.height-(this.y+this.height))>0&&(this.height+=e)},intersects:function(t){var e,i,n,s;return(e=this.x<(e=t.x)?e:this.x)<=(i=this.x+this.width>(i=t.x+t.width)?i:this.x+this.width)?!1:(n=this.y<(n=t.y)?n:this.y)<=(s=this.y+this.height>(s=t.y+t.height)?s:this.y)},intersection:function(t){var e,i,n,s,o,a;return(e=(o=this.x)<(a=t.x)?a:o)<=(i=(o+=this.width)>(a+=t.width)?a:o)&&(n=(o=this.y)<(a=t.y)?a:o)<=(s=(o+=this.height)>(a+=t.height)?a:o)?new _.geom.Rectangle(e,n,i-e,s-n):new _.geom.Rectangle},containsRect:function(t){return t.width<=0||t.height<=0?t.x>this.x&&t.y>this.y&&t.x+t.width<this.x+this.width&&t.y+t.height<this.y+this.height:t.x>=this.x&&t.y>=this.y&&t.x+t.width<=this.x+this.width&&t.y+t.height<=this.y+this.height},containsPoint:function(t){return this.contains(t.x,t.y)},contains:function(t,e){return(t-=this.x)>=0&&(e-=this.y)>=0&&t<this.width&&e<this.height},set_bottomRight:function(t){return this.width=t.x-this.x,this.height=t.y-this.y,t.clone()},get_bottomRight:function(){return new _.geom.Point(this.x+this.width,this.y+this.height)},set_topLeft:function(t){return this.width=t.x,this.height=t.y,t.clone()},get_topLeft:function(){return new _.geom.Point(this.x,this.y)},set_size:function(t){return this.width=t.x,this.height=t.y,t.clone()},get_size:function(){return new _.geom.Point(this.width,this.height)},set_bottom:function(t){return this.height=t-this.y,t},get_bottom:function(){return this.y+this.height},set_right:function(t){return this.width=t-this.x,t},get_right:function(){return this.x+this.width},set_top:function(t){return this.height-=t-this.y,this.y=t},get_top:function(){return this.y},set_left:function(t){return this.width-=t-this.x,this.x=t},get_left:function(){return this.x},setVoid:function(){this.width-=2147483647-this.x,this.x=2147483647,this.width=-2147483648-this.x,this.height-=2147483647-this.y,this.y=2147483647,this.height=-2147483648-this.y},setTo:function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n},copyFrom:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},setEmpty:function(){this.x=this.y=this.width=this.height=0},isEmpty:function(){return this.width<=0||this.height<=0},equals:function(t){return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},clone:function(){return new _.geom.Rectangle(this.x,this.y,this.width,this.height)},__class__:_.geom.Rectangle,__properties__:{set_left:"set_left",get_left:"get_left",set_right:"set_right",get_right:"get_right",set_top:"set_top",get_top:"get_top",set_bottom:"set_bottom",get_bottom:"get_bottom",set_size:"set_size",get_size:"get_size",set_topLeft:"set_topLeft",get_topLeft:"get_topLeft",set_bottomRight:"set_bottomRight",get_bottomRight:"get_bottomRight"}},_.geom.Transform=function(t){if(null==t)throw"Cannot create Transform with no DisplayObject.";this._displayObject=t,this._matrix=new _.geom.Matrix,this._fullMatrix=new _.geom.Matrix,this.set_colorTransform(new _.geom.ColorTransform)},i["flash.geom.Transform"]=_.geom.Transform,_.geom.Transform.__name__=["flash","geom","Transform"],_.geom.Transform.prototype={get_pixelBounds:function(){return this._displayObject.getBounds(null)},set_matrix:function(t){return this._matrix.copy(t),this._displayObject.syncMtx(),this._matrix},get_matrix:function(){return this._matrix.clone()},get_concatenatedMatrix:function(){return this.nmeGetFullMatrix(this._matrix)},set_colorTransform:function(t){return this.colorTransform=t,t},nmeSetMatrix:function(t){this._matrix.copy(t)},nmeSetFullMatrix:function(t){return this._fullMatrix.copy(t),this._fullMatrix},nmeGetFullMatrix:function(t){var e;return null!=t?(e=new _.geom.Matrix(t.a,t.b,t.c,t.d,t.tx,t.ty)).concat(this._fullMatrix):e=this._fullMatrix.clone(),e},__class__:_.geom.Transform,__properties__:{set_colorTransform:"set_colorTransform",get_concatenatedMatrix:"get_concatenatedMatrix",set_matrix:"set_matrix",get_matrix:"get_matrix",get_pixelBounds:"get_pixelBounds"}},_.media={},_.media.Sound=function(t,e){_.events.EventDispatcher.call(this),null!=t&&this.load(t,e)},i["flash.media.Sound"]=_.media.Sound,_.media.Sound.__name__=["flash","media","Sound"],_.media.Sound.canPlayType=function(t){var e,i;if(t=t.toLowerCase(),null!=_.media.Sound.canPlayMap){if(_.media.Sound.canPlayMap.exists(t))return _.media.Sound.canPlayMap.get(t)}else _.media.Sound.canPlayMap=new w.ds.StringMap;return e=_.media.Sound.getFormatType(t),i="no"!=(new Audio).canPlayType(e),_.media.Sound.canPlayMap.set(t,i),i},_.media.Sound.getFormatType=function(t){return"mp3"==t?"audio/mpeg;":"ogg"==t?'audio/ogg; codecs="vorbis"':null},_.media.Sound.__super__=_.events.EventDispatcher,_.media.Sound.prototype=t(_.events.EventDispatcher.prototype,{get_length:function(){return null!=this.component?1e3*this.component.duration:0},play:function(t,e,i){null==e&&(e=0),null==t&&(t=0);var n;if(0==this.qCache.length)(n=new _.media.SoundChannel).init(this,this.component,e),this.component=this.component.cloneNode(!0);else{n=this.qCache[0];for(var s=0,o=this.qCache;s<o.length;){var a=o[s];if(++s,1e3*a.component.currentTime==t){n=a;break}}r.remove(this.qCache,n)}n.set_soundTransform(i);try{n._loops=e,n.play(t)}catch(l){console&&console.log(l)}return n},load:function(t){var e=t.url,i=_.media.Sound.library;null!=i&&i.exists(e)?(this.component=i.get(e),_.media.Sound.library.set(e,this.component.cloneNode(!0))):this.component=new Audio(e),this.qCache=[]},close:function(){if(null==this.component)throw new _.errors.IOError("Attempt to close unexisting stream.");this.component=null},__class__:_.media.Sound,__properties__:{get_length:"get_length"}}),_.media.SoundChannel=function(){this._loops=1,this.active=!1,this.rightPeak=1,this.leftPeak=1,_.events.EventDispatcher.call(this)},i["flash.media.SoundChannel"]=_.media.SoundChannel,_.media.SoundChannel.__name__=["flash","media","SoundChannel"],_.media.SoundChannel.__super__=_.events.EventDispatcher,_.media.SoundChannel.prototype=t(_.events.EventDispatcher.prototype,{onEnded:function(){this.active&&(--this._loops>0?(this.set_position(this._position),this.component.paused&&this.component.play()):(this.stop(),this.component.currentTime=0,this.dispatchEvent(new _.events.Event("soundComplete"))))},set_position:function(t){if(this.component.currentTime!=t/1e3){var e=!this.component.paused;e&&this.component.pause(),this.component.currentTime=t/1e3,e&&this.component.play()}return t},get_position:function(){return 1e3*this.component.currentTime},get_duration:function(){var t,e=this.component;try{t=null!=e.buffered?e.buffered.end(0):e.duration}catch(i){t=e.duration,Math.isNaN(t)&&(t=0)}return t},set_soundTransform:function(t){return this.soundTransform=t,this.component.volume=null!=t?t.volume:1,t},stop:function(){this.active&&(this.active=!1,this.component.pause(),this.qSound.qCache.push(this))},play:function(t){var e,i=this.component;this.active||(e=this.get_duration(),0==t||e>=t/1e3?(this._position=this.set_position(t),i.load(),i.play(),this.active=!0):(this.set_position(0),i.load(),i.play(),i.pause(),this.qSound.qCache.push(this)))},init:function(t,i,n){null==n&&(n=1),this.qSound=t,this.component=i,this._loops=n,this.component.addEventListener("ended",e(this,this.onEnded))},__class__:_.media.SoundChannel,__properties__:{set_soundTransform:"set_soundTransform",set_position:"set_position",get_position:"get_position"}}),_.media.SoundLoaderContext=function(t,e){null==e&&(e=!1),null==t&&(t=0),this.bufferTime=t,this.checkPolicyFile=e},i["flash.media.SoundLoaderContext"]=_.media.SoundLoaderContext,_.media.SoundLoaderContext.__name__=["flash","media","SoundLoaderContext"],_.media.SoundLoaderContext.prototype={__class__:_.media.SoundLoaderContext},_.media.SoundTransform=function(t,e){null==e&&(e=0),null==t&&(t=1),this.volume=t,this.pan=e},i["flash.media.SoundTransform"]=_.media.SoundTransform,_.media.SoundTransform.__name__=["flash","media","SoundTransform"],_.media.SoundTransform.prototype={__class__:_.media.SoundTransform},_.net={},_.net.URLLoader=function(t){_.events.EventDispatcher.call(this),this.bytesLoaded=this.bytesTotal=0,this.set_dataFormat(_.net.URLLoaderDataFormat.TEXT),null!=t&&this.load(t)},i["flash.net.URLLoader"]=_.net.URLLoader,_.net.URLLoader.__name__=["flash","net","URLLoader"],_.net.URLLoader.__super__=_.events.EventDispatcher,_.net.URLLoader.prototype=t(_.events.EventDispatcher.prototype,{onStatus:function(t){var e=new _.events.HTTPStatusEvent("httpStatus",!1,!1,t);e.set_currentTarget(this),this.dispatchEvent(e)},onSecurityError:function(t){var e=new _.events.SecurityErrorEvent("securityError");e.text=t,e.set_currentTarget(this),this.dispatchEvent(e)},onProgress:function(t){var e=new _.events.ProgressEvent("progress");e.set_currentTarget(this),e.bytesLoaded=t.loaded,e.bytesTotal=t.total,this.dispatchEvent(e)},onOpen:function(){var t=new _.events.Event("open");t.set_currentTarget(this),this.dispatchEvent(t)},onError:function(t){var e=new _.events.IOErrorEvent("ioError");e.text=t,e.set_currentTarget(this),this.dispatchEvent(e)},onData:function(t){var e,i=t?t:this.getData();this.data=this.dataFormat==_.net.URLLoaderDataFormat.BINARY?_.utils.ByteArray.nmeOfBuffer(i):d.string(i),e=new _.events.Event("complete"),e.set_currentTarget(this),this.dispatchEvent(e)},requestUrl:function(t,e,i,n){var s=new XMLHttpRequest;this.getData=function(){return null!=s.response?s.response:s.responseText},this.registerEvents(s);var o="";if(A.Boot.__instanceof(i,_.utils.ByteArray)){var a=i;o=this.dataFormat==_.net.URLLoaderDataFormat.BINARY?a.data.buffer:a.readUTFBytes(a.length)}else if(A.Boot.__instanceof(i,_.net.URLVariables))for(var a=i,r=0,l=y.fields(a);r<l.length;){var m=l[r];++r,0!=o.length&&(o+="&"),o+=B.urlEncode(m)+"="+B.urlEncode(y.field(a,m))}else null!=i&&(o=i.toString());try{if("GET"==e&&null!=o&&""!=o){var c=t.split("?").length<=1;s.open(e,t+(c?"?":"&")+d.string(o),!0),o=""}else s.open(e,t,!0)}catch(h){return this.onError(h.toString()),void 0}this.dataFormat==_.net.URLLoaderDataFormat.BINARY&&(s.responseType="arraybuffer");for(var r=0;r<n.length;){var u=n[r];++r,s.setRequestHeader(u.name,u.value)}s.send(o),this.onOpen()},registerEvents:function(t){var i=this;"undefined"!=typeof XMLHttpRequestProgressEvent&&t.addEventListener("progress",e(this,this.onProgress),!1),t.onreadystatechange=function(){if(4==t.readyState){var e;try{e=t.status}catch(n){e=null}null!=e&&i.onStatus(e),null==e?i.onError("Failed to connect or resolve host"):e>=200&&400>e?i.onData(t.response):12029==e?i.onError("Failed to connect to host"):12007==e?i.onError("Unknown host"):0==e?(i.onError("Unable to make request (may be blocked due to cross-domain permissions)"),i.onSecurityError("Unable to make request (may be blocked due to cross-domain permissions)")):i.onError("Http Error #"+t.status)}}},load:function(t){this.requestUrl(t.url,t.method,t.data,t.formatRequestHeaders())},getData:function(){return null},close:function(){},set_dataFormat:function(t){return this.dataFormat=t==_.net.URLLoaderDataFormat.BINARY&&null==ArrayBuffer?_.net.URLLoaderDataFormat.TEXT:t,this.dataFormat},__class__:_.net.URLLoader,__properties__:{set_dataFormat:"set_dataFormat"}}),_.net.URLLoaderDataFormat=i["flash.net.URLLoaderDataFormat"]={__ename__:!0,__constructs__:["BINARY","TEXT","VARIABLES"]},_.net.URLLoaderDataFormat.BINARY=["BINARY",0],_.net.URLLoaderDataFormat.BINARY.toString=n,_.net.URLLoaderDataFormat.BINARY.__enum__=_.net.URLLoaderDataFormat,_.net.URLLoaderDataFormat.TEXT=["TEXT",1],_.net.URLLoaderDataFormat.TEXT.toString=n,_.net.URLLoaderDataFormat.TEXT.__enum__=_.net.URLLoaderDataFormat,_.net.URLLoaderDataFormat.VARIABLES=["VARIABLES",2],_.net.URLLoaderDataFormat.VARIABLES.toString=n,_.net.URLLoaderDataFormat.VARIABLES.__enum__=_.net.URLLoaderDataFormat,_.net.URLRequest=function(t){null!=t&&(this.url=t),this.requestHeaders=[],this.method="GET",this.contentType=null},i["flash.net.URLRequest"]=_.net.URLRequest,_.net.URLRequest.__name__=["flash","net","URLRequest"],_.net.URLRequest.prototype={formatRequestHeaders:function(){var t=this.requestHeaders;return null==t&&(t=[]),"GET"==this.method||null==this.data?t:((A.Boot.__instanceof(this.data,String)||A.Boot.__instanceof(this.data,_.utils.ByteArray))&&(t=t.slice()).push(new _.net.URLRequestHeader("Content-Type",null!=this.contentType?this.contentType:"application/x-www-form-urlencoded")),t)},__class__:_.net.URLRequest},_.net.URLRequestHeader=function(t,e){null==e&&(e=""),null==t&&(t=""),this.name=t,this.value=e},i["flash.net.URLRequestHeader"]=_.net.URLRequestHeader,_.net.URLRequestHeader.__name__=["flash","net","URLRequestHeader"],_.net.URLRequestHeader.prototype={__class__:_.net.URLRequestHeader},_.net._URLRequestMethod={},_.net._URLRequestMethod.URLRequestMethod_Impl_=function(){},i["flash.net._URLRequestMethod.URLRequestMethod_Impl_"]=_.net._URLRequestMethod.URLRequestMethod_Impl_,_.net._URLRequestMethod.URLRequestMethod_Impl_.__name__=["flash","net","_URLRequestMethod","URLRequestMethod_Impl_"],_.net._URLRequestMethod.URLRequestMethod_Impl_._new=function(t){return t},_.net._URLRequestMethod.URLRequestMethod_Impl_.toString=function(t){return t},_.net._URLRequestMethod.URLRequestMethod_Impl_.fromString=function(t){return t},_.net.URLVariables=function(t){null!=t&&this.decode(t)},i["flash.net.URLVariables"]=_.net.URLVariables,_.net.URLVariables.__name__=["flash","net","URLVariables"],_.net.URLVariables.prototype={toString:function(){for(var t="",e=y.fields(this),i=0,n=0;n<e.length;){var s=e[n];++n,t+=(0!=i++?"&":"")+B.urlEncode(s)+"="+B.urlEncode(y.field(this,s))}return t},decode:function(t){for(var e=y.fields(this),i=0;i<e.length;){var n=e[i];++i,y.deleteField(this,n)}for(var s=t.split(";").join("&").split("&"),i=0;i<s.length;){var n=s[i];++i;var o=n.indexOf("=");o>0?this[B.urlDecode(r.substr(n,0,o))]=B.urlDecode(r.substr(n,o+1,null)):0!=o&&(this[B.urlDecode(n)]="")}},__class__:_.net.URLVariables},_.system={},_.system.System=function(){},i["flash.system.System"]=_.system.System,_.system.System.__name__=["flash","system","System"],_.system.System.__properties__={get_vmVersion:"get_vmVersion",get_totalMemory:"get_totalMemory"},_.system.System.exit=function(){A.Browser.window.close()},_.system.System.get_totalMemory=function(){var t;return(t=console)&&(t=t.memory)&&(t=t.totalJSHeapSize)||0},_.system.System.get_vmVersion=function(){return"2.0 js openfl"},_.text={},_.text.AntiAliasType=i["flash.text.AntiAliasType"]={__ename__:!0,__constructs__:["ADVANCED","NORMAL"]},_.text.AntiAliasType.ADVANCED=["ADVANCED",0],_.text.AntiAliasType.ADVANCED.toString=n,_.text.AntiAliasType.ADVANCED.__enum__=_.text.AntiAliasType,_.text.AntiAliasType.NORMAL=["NORMAL",1],_.text.AntiAliasType.NORMAL.toString=n,_.text.AntiAliasType.NORMAL.__enum__=_.text.AntiAliasType,_.text.Font=function(){},i["flash.text.Font"]=_.text.Font,_.text.Font.__name__=["flash","text","Font"],_.text.Font.enumerateFonts=function(t){return null==t&&(t=!1),[]},_.text.Font.registerFont=function(){},_.text.Font.prototype={hasGlyphs:function(){return!1},__class__:_.text.Font},_.text.FontStyle=i["flash.text.FontStyle"]={__ename__:!0,__constructs__:["REGULAR","ITALIC","BOLD_ITALIC","BOLD"]},_.text.FontStyle.REGULAR=["REGULAR",0],_.text.FontStyle.REGULAR.toString=n,_.text.FontStyle.REGULAR.__enum__=_.text.FontStyle,_.text.FontStyle.ITALIC=["ITALIC",1],_.text.FontStyle.ITALIC.toString=n,_.text.FontStyle.ITALIC.__enum__=_.text.FontStyle,_.text.FontStyle.BOLD_ITALIC=["BOLD_ITALIC",2],_.text.FontStyle.BOLD_ITALIC.toString=n,_.text.FontStyle.BOLD_ITALIC.__enum__=_.text.FontStyle,_.text.FontStyle.BOLD=["BOLD",3],_.text.FontStyle.BOLD.toString=n,_.text.FontStyle.BOLD.__enum__=_.text.FontStyle,_.text.FontType=i["flash.text.FontType"]={__ename__:!0,__constructs__:["EMBEDDED","DEVICE"]},_.text.FontType.EMBEDDED=["EMBEDDED",0],_.text.FontType.EMBEDDED.toString=n,_.text.FontType.EMBEDDED.__enum__=_.text.FontType,_.text.FontType.DEVICE=["DEVICE",1],_.text.FontType.DEVICE.toString=n,_.text.FontType.DEVICE.__enum__=_.text.FontType,_.text.TextField=function(){this.qText="",this.type="DYNAMIC",this.maxChars=0,_.display.InteractiveObject.call(this);var t=this.component.style;t.whiteSpace="nowrap",t.overflow="hidden",this.defaultTextFormat=new _.text.TextFormat("_serif",16,0),this.textColor=0,this.wordWrap=this.qEditable=!1,this.set_width(this.set_height(100))
},i["flash.text.TextField"]=_.text.TextField,_.text.TextField.__name__=["flash","text","TextField"],_.text.TextField.__interfaces__=[_.display.IBitmapDrawable],_.text.TextField.__super__=_.display.InteractiveObject,_.text.TextField.prototype=t(_.display.InteractiveObject.prototype,{removeEventListener:function(t,e,i,n,s){null==s&&(s=!1),null==n&&(n=0),null==i&&(i=!1);var o=this.component;this.qEditable&&(this.component=this.qTextArea),_.display.InteractiveObject.prototype.removeEventListener.call(this,t,e,i,n,s),this.qEditable&&(this.component=o)},addEventListener:function(t,e,i,n,s){null==s&&(s=!1),null==n&&(n=0),null==i&&(i=!1);var o=this.component;this.qEditable&&(this.component=this.qTextArea),_.display.InteractiveObject.prototype.addEventListener.call(this,t,e,i,n,s),this.qEditable&&(this.component=o)},get_selectedText:function(){var t,e=this.qTextArea.selectionStart,i=this.qTextArea.selectionEnd;return e>i&&(t=e,e=i,i=t),this.qEditable?this.qTextArea.value.substring(e,i):null},set_selectionEndIndex:function(t){return this.qEditable&&this.get_selectionEndIndex()!=t&&(this.qTextArea.selectionEnd=t),t},set_selectionBeginIndex:function(t){return this.qEditable&&this.get_selectionBeginIndex()!=t&&(this.qTextArea.selectionStart=t),t},get_selectionEndIndex:function(){return this.qEditable?this.qTextArea.selectionEnd:0},get_selectionBeginIndex:function(){return this.qEditable?this.qTextArea.selectionStart:0},giveFocus:function(){(this.qEditable?this.qTextArea:this.component).focus()},set_selectable:function(t){if(this.selectable!=t){var e=this.component.style,i=(this.selectable=t)?null:"none",n="user-select",s=null;e.setProperty("-webkit-touch-callout",i,s),e.setProperty("-webkit-"+n,i,s),e.setProperty("-khtml-"+n,i,s),e.setProperty("-moz-"+n,i,s),e.setProperty("-ms-"+n,i,s),e.setProperty(n,i,s),e.setProperty("cursor",t?"":"default",s),this.component.setAttribute("unselectable",t?null:"on")}return t},set_maxChars:function(t){return this.maxChars!=t&&(this.maxChars=t,this.qEditable&&(this.qTextArea.maxLength=t>0?t:2147483647)),t},set_multiline:function(t){return this.multiline!=t&&(this.multiline=t,this.qEditable&&(this.set_type("DYNAMIC"),this.set_type("INPUT"))),t},set_type:function(t){var e,i,n,s,o,a="INPUT"==t,r=this;return a!=r.qEditable&&(e=r.component,s=r.get_text(),r.set_text(""!=s?"":" "),(r.qEditable=a)?(e.appendChild(i=document.createElement(this.multiline?"textarea":"input")),i.value=s+" ",i.maxLength=(n=this.maxChars)>0?n:2147483647,n=i.style,n.border="0",n.background="transparent",null!=(o=r.qWidth)&&(n.width=o+"px"),null!=(o=r.qHeight)&&(n.height=o+"px"),r.qTextArea=i):(e.removeChild(r.qTextArea),r.qTextArea=null),r.set_text(s)),t},set_autoSize:function(t){return this.autoSize!=t&&"NONE"!=(this.autoSize=t)&&this.set_width(this.set_height(null)),t},get_textHeight:function(){if(null==this.get_stage()){var t=this._measure_pre(),e=t.clientHeight;return this._measure_post(t),e}return this.component.clientHeight},get_textWidth:function(){if(null==this.get_stage()){var t=this._measure_pre(),e=t.clientWidth;return this._measure_post(t),e}return this.component.clientWidth},_measure_post:function(t){var e,i=t.style;for(e=i.length;--e>=0;)i[i[e]]="";t.innerHTML=""},_measure_pre:function(){var t,e=_.Lib.jsHelper(),i=e.style,n=this.component.style;for(t=n.length;--t>=0;)i[n[t]]=n[n[t]];return e.innerHTML=this.component.innerHTML,e},set_height:function(t){if(this.qHeight!=t){var e=null!=t?t+"px":"";this.component.style.height=e,this.qEditable&&(this.qTextArea.style.height=e),this.qHeight=t}return t},set_width:function(t){if(this.qWidth!=t){var e=null!=t?t+"px":"";this.component.style.width=e,this.qEditable&&(this.qTextArea.style.width=e),this.qWidth=t}return t},get_height:function(){return null!=this.qHeight?this.qHeight:this.get_textHeight()},get_width:function(){return null!=this.qWidth?this.qWidth:this.get_textWidth()},drawToSurface:function(t,e){this.defaultTextFormat;e.save(),e.fillStyle=this.component.style.color,e.font=this.qFontStyle,e.textBaseline="top",e.textAlign="left",e.fillText(this.get_text(),0,0),e.restore()},setSelection:function(t,e){this.qEditable&&this.qTextArea.setSelectionRange(t,e)},appendText:function(){},set_text:function(t){if(this.get_text()!=t){var e,i=this.defaultTextFormat,n=this.qEditable;this.qText=t,n?this.qTextArea.value=t:null==this.component.innerText?this.component.innerHTML=B.replace(B.htmlEscape(t),"\n","<br>"):this.component.innerText=t,e=(n?this.qTextArea:this.component).style,this.qFontStyle=e.font=i.get_fontStyle(),e.lineHeight=(this.qLineHeight=1.25*i.size|0)+"px",e.color=_.Lib.rgbf(null!=i.color?i.color:this.textColor,1)}return t},get_text:function(){return this.qEditable?this.qTextArea.value:this.qText},setTextFormat:function(){},__class__:_.text.TextField,__properties__:t(_.display.InteractiveObject.prototype.__properties__,{set_autoSize:"set_autoSize",set_maxChars:"set_maxChars",set_multiline:"set_multiline",set_selectable:"set_selectable",get_selectedText:"get_selectedText",set_selectionBeginIndex:"set_selectionBeginIndex",get_selectionBeginIndex:"get_selectionBeginIndex",set_selectionEndIndex:"set_selectionEndIndex",get_selectionEndIndex:"get_selectionEndIndex",set_text:"set_text",get_text:"get_text",get_textHeight:"get_textHeight",get_textWidth:"get_textWidth",set_type:"set_type"})}),_.text.TextFieldAutoSize=function(){},i["flash.text.TextFieldAutoSize"]=_.text.TextFieldAutoSize,_.text.TextFieldAutoSize.__name__=["flash","text","TextFieldAutoSize"],_.text.TextFormat=function(t,e,i,n,s,o,a,r,l,m,c,_,h){this.font=t,this.size=e,this.color=i,this.bold=n,this.italic=s,this.underline=o,this.url=a,this.target=r,this.align=l,this.leftMargin=m,this.rightMargin=c,this.indent=_,this.leading=h},i["flash.text.TextFormat"]=_.text.TextFormat,_.text.TextFormat.__name__=["flash","text","TextFormat"],_.text.TextFormat.translateFont=function(t){switch(t){case"_sans":return"sans-serif";case"_serif":return"sans";case"_typewriter":return"monospace";default:return null==t?"sans-serif":t}},_.text.TextFormat.prototype={get_fontStyle:function(){return(this.bold?"bold ":"")+(this.italic?"italic ":"")+this.size+"px "+_.text.TextFormat.translateFont(this.font)},clone:function(){var t=new _.text.TextFormat(this.font,this.size,this.color,this.bold,this.italic,this.underline,this.url,this.target);return t.align=this.align,t.leftMargin=this.leftMargin,t.rightMargin=this.rightMargin,t.indent=this.indent,t.leading=this.leading,t.blockIndent=this.blockIndent,t.bullet=this.bullet,t.display=this.display,t.kerning=this.kerning,t.letterSpacing=this.letterSpacing,t.tabStops=this.tabStops,t},__class__:_.text.TextFormat},_.text.TextFormatAlign=i["flash.text.TextFormatAlign"]={__ename__:!0,__constructs__:["LEFT","RIGHT","JUSTIFY","CENTER"]},_.text.TextFormatAlign.LEFT=["LEFT",0],_.text.TextFormatAlign.LEFT.toString=n,_.text.TextFormatAlign.LEFT.__enum__=_.text.TextFormatAlign,_.text.TextFormatAlign.RIGHT=["RIGHT",1],_.text.TextFormatAlign.RIGHT.toString=n,_.text.TextFormatAlign.RIGHT.__enum__=_.text.TextFormatAlign,_.text.TextFormatAlign.JUSTIFY=["JUSTIFY",2],_.text.TextFormatAlign.JUSTIFY.toString=n,_.text.TextFormatAlign.JUSTIFY.__enum__=_.text.TextFormatAlign,_.text.TextFormatAlign.CENTER=["CENTER",3],_.text.TextFormatAlign.CENTER.toString=n,_.text.TextFormatAlign.CENTER.__enum__=_.text.TextFormatAlign,_.ui={},_.ui.Mouse=function(){},i["flash.ui.Mouse"]=_.ui.Mouse,_.ui.Mouse.__name__=["flash","ui","Mouse"],_.ui.Mouse.hide=function(){_.Lib.get_stage().component.style.cursor="none"},_.ui.Mouse.show=function(){_.Lib.get_stage().component.style.cursor=null},_.ui.Multitouch=function(){},i["flash.ui.Multitouch"]=_.ui.Multitouch,_.ui.Multitouch.__name__=["flash","ui","Multitouch"],_.ui.MultitouchInputMode=i["flash.ui.MultitouchInputMode"]={__ename__:!0,__constructs__:["GESTURE","NONE","TOUCH_POINT"]},_.ui.MultitouchInputMode.GESTURE=["GESTURE",0],_.ui.MultitouchInputMode.GESTURE.toString=n,_.ui.MultitouchInputMode.GESTURE.__enum__=_.ui.MultitouchInputMode,_.ui.MultitouchInputMode.NONE=["NONE",1],_.ui.MultitouchInputMode.NONE.toString=n,_.ui.MultitouchInputMode.NONE.__enum__=_.ui.MultitouchInputMode,_.ui.MultitouchInputMode.TOUCH_POINT=["TOUCH_POINT",2],_.ui.MultitouchInputMode.TOUCH_POINT.toString=n,_.ui.MultitouchInputMode.TOUCH_POINT.__enum__=_.ui.MultitouchInputMode,_.utils={},_.utils.ByteArray=function(){this.littleEndian=!1,this.length=0,this._nmeResizeBuffer(this.allocated=this.position=0)},i["flash.utils.ByteArray"]=_.utils.ByteArray,_.utils.ByteArray.__name__=["flash","utils","ByteArray"],_.utils.ByteArray.fromBytes=function(t){var e=new _.utils.ByteArray;return e.byteView=new Uint8Array(t.b),e.set_length(e.byteView.length),e.allocated=e.length,e},_.utils.ByteArray.nmeOfBuffer=function(t){var e=new _.utils.ByteArray;return e.set_length(e.allocated=t.byteLength),e.data=new DataView(t),e.byteView=new Uint8Array(t),e},_.utils.ByteArray.prototype={set_length:function(t){return this.allocated<t?this._nmeResizeBuffer(this.allocated=0|Math.max(t,2*this.allocated)):this.allocated>t&&this._nmeResizeBuffer(this.allocated=t),this.length=t},set_endian:function(t){return this.littleEndian="littleEndian"==t,t},get_endian:function(){return this.littleEndian?"littleEndian":"bigEndian"},get_bytesAvailable:function(){return this.length-this.position},writeUTFBytes:function(t){for(var e,i=-1,n=t.length;++i<n;)e=t.charCodeAt(i),127>=e?this.writeByte(e):2047>=e?(this.writeByte(192|e>>6),this.writeByte(128|63&e)):65535>=e?(this.writeByte(224|e>>12),this.writeByte(128|e>>6&63),this.writeByte(128|63&e)):(this.writeByte(240|e>>18),this.writeByte(128|e>>12&63),this.writeByte(128|e>>6&63),this.writeByte(128|63&e))},writeUTF:function(t){this.writeUnsignedShort(this._getUTFBytesCount(t)),this.writeUTFBytes(t)},writeUnsignedShort:function(t){var e=this.position+2;this.length<e&&this.set_length(e),this.data.setUint16(this.position,t,this.littleEndian),this.position+=2},writeUnsignedInt:function(t){var e=this.position+4;this.length<e&&this.set_length(e),this.data.setUint32(this.position,t,this.littleEndian),this.position+=4},writeShort:function(t){var e=this.position+2;this.length<e&&this.set_length(e),this.data.setInt16(this.position,t,this.littleEndian),this.position+=2},writeInt:function(t){var e=this.position+4;this.length<e&&this.set_length(e),this.data.setInt32(this.position,t,this.littleEndian),this.position+=4},writeFloat:function(t){var e=this.position+4;this.length<e&&this.set_length(e),this.data.setFloat32(this.position,t,this.littleEndian),this.position+=4},writeDouble:function(t){var e=this.position+8;this.length<e&&this.set_length(e),this.data.setFloat64(this.position,t,this.littleEndian),this.position+=8},writeBytes:function(t,e,i){if(0>e||0>i)throw new _.errors.IOError("Write error - Out of bounds");var n=this.position+i;this.length<n&&this.set_length(n),this.byteView.set(t.byteView.subarray(e,e+i),this.position),this.position+=i},writeByte:function(t){var e=this.position+1;this.length<e&&this.set_length(e);var i=this.data;i.setInt8(this.position,t),this.position+=1},writeBoolean:function(t){this.writeByte(t?1:0)},toBase64:function(){for(var t,e,i,n=this,s=(n.position,n.length),o=-1,a=n.data,r="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";++o<s;)t=a.getUint8(o),e=++o<s?a.getUint8(o):0,i=++o<s?a.getUint8(o):0,r+=l.charAt(t>>2)+l.charAt((3&t)<<4|e>>4)+(s>o-1?l.charAt((15&e)<<2|i>>6):"=")+(s>o?l.charAt(63&i):"=");return r},toString:function(){var t,e=this.position;return this.position=0,t=this.readUTFBytes(this.length),this.position=e,t},readUTFBytes:function(t){for(var e="",i=this.position+t;this.position<i;){var n=this.data.getUint8(this.position++);if(128>n){if(0==n)break;e+=String.fromCharCode(n)}else if(224>n)e+=String.fromCharCode((63&n)<<6|127&this.data.getUint8(this.position++));else if(240>n){var s=this.data.getUint8(this.position++);e+=String.fromCharCode((31&n)<<12|(127&s)<<6|127&this.data.getUint8(this.position++))}else{var s=this.data.getUint8(this.position++),o=this.data.getUint8(this.position++);e+=String.fromCharCode((15&n)<<18|(127&s)<<12|o<<6&127|127&this.data.getUint8(this.position++))}}return e},readUTF:function(){return this.readUTFBytes(this.readUnsignedShort())},readUnsignedShort:function(){var t=this.data.getUint16(this.position,this.littleEndian);return this.position+=2,t},readUnsignedInt:function(){var t=this.data.getUint32(this.position,this.littleEndian);return this.position+=4,t},readUnsignedByte:function(){return this.data.getUint8(this.position++)},readShort:function(){var t=this.data.getInt16(this.position,this.littleEndian);return this.position+=2,t},readInt:function(){var t=this.data.getInt32(this.position,this.littleEndian);return this.position+=4,t},readFullBytes:function(t,e,i){this.length<i&&this.set_length(i);for(var n=e,s=e+i;s>n;){var o=n++;this.data.setInt8(this.position++,t.b[o])}},readFloat:function(){var t=this.data.getFloat32(this.position,this.littleEndian);return this.position+=4,t},readDouble:function(){var t=this.data.getFloat64(this.position,this.littleEndian);return this.position+=8,t},readBytes:function(t,e,i){if(null==e&&(e=0),null==i&&(i=this.length),0>e||0>i)throw new _.errors.IOError("Read error - Out of bounds");var n=e+i;t.length<n&&t.set_length(n),t.byteView.set(this.byteView.subarray(this.position,this.position+i),e),t.position=e,this.position+=i,t.position+i>t.length&&t.set_length(t.position+i)},readByte:function(){return this.data.getUint8(this.position++)},readBoolean:function(){return 0!=this.data.getUint8(this.position++)},nmeSet:function(t,e){this.data.setUint8(t,e)},nmeGetBuffer:function(){return this.data.buffer},nmeGet:function(t){return this.data.getUint8(t)},nmeFromBytes:function(t){this.byteView=new Uint8Array(t.b),this.set_length(this.byteView.length),this.allocated=this.length},clear:function(){this.set_length(this.position=0)},_nmeResizeBuffer:function(t){var e=this.byteView,i=new Uint8Array(t);null!=e&&(e.length<=t?i.set(e):i.set(e.subarray(0,t))),this.byteView=i,this.data=new DataView(i.buffer)},_getUTFBytesCount:function(t){for(var e,i=0,n=-1,s=t.length;++n<s;)e=t.charCodeAt(n),i+=127>=e?1:2047>=e?2:65535>=e?3:4;return i},__set:function(t,e){this.data.setUint8(t,e)},__get:function(t){return this.data.getUint8(t)},__class__:_.utils.ByteArray,__properties__:{get_bytesAvailable:"get_bytesAvailable",set_endian:"set_endian",get_endian:"get_endian",set_length:"set_length"}},_.utils.Endian=function(){},i["flash.utils.Endian"]=_.utils.Endian,_.utils.Endian.__name__=["flash","utils","Endian"];var w={};w.StackItem=i["haxe.StackItem"]={__ename__:!0,__constructs__:["CFunction","Module","FilePos","Method","Lambda"]},w.StackItem.CFunction=["CFunction",0],w.StackItem.CFunction.toString=n,w.StackItem.CFunction.__enum__=w.StackItem,w.StackItem.Module=function(t){var e=["Module",1,t];return e.__enum__=w.StackItem,e.toString=n,e},w.StackItem.FilePos=function(t,e,i){var s=["FilePos",2,t,e,i];return s.__enum__=w.StackItem,s.toString=n,s},w.StackItem.Method=function(t,e){var i=["Method",3,t,e];return i.__enum__=w.StackItem,i.toString=n,i},w.StackItem.Lambda=function(t){var e=["Lambda",4,t];return e.__enum__=w.StackItem,e.toString=n,e},w.CallStack=function(){},i["haxe.CallStack"]=w.CallStack,w.CallStack.__name__=["haxe","CallStack"],w.CallStack.exceptionStack=function(){return[]},w.CallStack.toString=function(t){for(var e=new x,i=0;i<t.length;){var n=t[i];++i,e.b+="\nCalled from ",w.CallStack.itemToString(e,n)}return e.b},w.CallStack.itemToString=function(t,e){var i=e;switch(i[1]){case 0:t.b+="a C function";break;case 1:var n=i[2];t.b+="module ",t.b+=d.string(n);break;case 2:var s=i[4],o=i[3],a=i[2];null!=a&&(w.CallStack.itemToString(t,a),t.b+=" ("),t.b+=d.string(o),t.b+=" line ",t.b+=d.string(s),null!=a&&(t.b+=")");break;case 3:var r=i[3],l=i[2];t.b+=d.string(l),t.b+=".",t.b+=d.string(r);break;case 4:var m=i[2];t.b+="local function #",t.b+=d.string(m)}},w.Resource=function(){},i["haxe.Resource"]=w.Resource,w.Resource.__name__=["haxe","Resource"],w.Resource.listNames=function(){for(var t=new Array,e=0,i=w.Resource.content;e<i.length;){var n=i[e];++e,t.push(n.name)}return t},w.Timer=function(){},i["haxe.Timer"]=w.Timer,w.Timer.__name__=["haxe","Timer"],w.Timer.stamp=function(){return(new Date).getTime()/1e3},w.ds={},w.ds.IntMap=function(){this.h={}},i["haxe.ds.IntMap"]=w.ds.IntMap,w.ds.IntMap.__name__=["haxe","ds","IntMap"],w.ds.IntMap.__interfaces__=[c],w.ds.IntMap.prototype={exists:function(t){return this.h.hasOwnProperty(t)},get:function(t){return this.h[t]},set:function(t,e){this.h[t]=e},__class__:w.ds.IntMap},w.ds.ObjectMap=function(){this.h={},this.h.__keys__={}},i["haxe.ds.ObjectMap"]=w.ds.ObjectMap,w.ds.ObjectMap.__name__=["haxe","ds","ObjectMap"],w.ds.ObjectMap.__interfaces__=[c],w.ds.ObjectMap.prototype={remove:function(t){var e=t.__id__;return this.h.hasOwnProperty(e)?(delete this.h[e],delete this.h.__keys__[e],!0):!1},set:function(t,e){var i=null!=t.__id__?t.__id__:t.__id__=++w.ds.ObjectMap.count;this.h[i]=e,this.h.__keys__[i]=t},__class__:w.ds.ObjectMap},w.ds.StringMap=function(){this.h={}},i["haxe.ds.StringMap"]=w.ds.StringMap,w.ds.StringMap.__name__=["haxe","ds","StringMap"],w.ds.StringMap.__interfaces__=[c],w.ds.StringMap.prototype={keys:function(){var t=[];for(var e in this.h)this.h.hasOwnProperty(e)&&t.push(e.substr(1));return r.iter(t)},remove:function(t){return t="$"+t,this.h.hasOwnProperty(t)?(delete this.h[t],!0):!1},exists:function(t){return this.h.hasOwnProperty("$"+t)},get:function(t){return this.h["$"+t]},set:function(t,e){this.h["$"+t]=e},__class__:w.ds.StringMap},w.io={},w.io.Bytes=function(){},i["haxe.io.Bytes"]=w.io.Bytes,w.io.Bytes.__name__=["haxe","io","Bytes"],w.io.Bytes.prototype={__class__:w.io.Bytes},w.io.Eof=function(){},i["haxe.io.Eof"]=w.io.Eof,w.io.Eof.__name__=["haxe","io","Eof"],w.io.Eof.prototype={toString:function(){return"Eof"},__class__:w.io.Eof};var A={};A.Boot=function(){},i["js.Boot"]=A.Boot,A.Boot.__name__=["js","Boot"],A.Boot.__string_rec=function(t,e){if(null==t)return"null";if(e.length>=5)return"<...>";var i=typeof t;switch("function"==i&&(t.__name__||t.__ename__)&&(i="object"),i){case"object":if(t instanceof Array){if(t.__enum__){if(2==t.length)return t[0];var n=t[0]+"(";e+="	";for(var s=2,o=t.length;o>s;){var a=s++;n+=2!=a?","+A.Boot.__string_rec(t[a],e):A.Boot.__string_rec(t[a],e)}return n+")"}var a,r=t.length,n="[";e+="	";for(var o=0;r>o;){var l=o++;n+=(l>0?",":"")+A.Boot.__string_rec(t[l],e)}return n+="]"}var m;try{m=t.toString}catch(c){return"???"}if(null!=m&&m!=Object.toString){var _=t.toString();if("[object Object]"!=_)return _}var h=null,n="{\n";e+="	";var u=null!=t.hasOwnProperty;for(var h in t)(!u||t.hasOwnProperty(h))&&"prototype"!=h&&"__class__"!=h&&"__super__"!=h&&"__interfaces__"!=h&&"__properties__"!=h&&(2!=n.length&&(n+=", \n"),n+=e+h+" : "+A.Boot.__string_rec(t[h],e));return e=e.substring(1),n+="\n"+e+"}";case"function":return"<function>";case"string":return t;default:return String(t)}},A.Boot.__interfLoop=function(t,e){if(null==t)return!1;if(t==e)return!0;var i=t.__interfaces__;if(null!=i)for(var n=0,s=i.length;s>n;){var o=n++,a=i[o];if(a==e||A.Boot.__interfLoop(a,e))return!0}return A.Boot.__interfLoop(t.__super__,e)},A.Boot.__instanceof=function(t,e){if(null==e)return!1;switch(e){case T:return(0|t)===t;case D:return"number"==typeof t;case V:return"boolean"==typeof t;case String:return"string"==typeof t;case I:return!0;default:if(null==t)return!1;if("function"==typeof e){if(t instanceof e)return e==Array?null==t.__enum__:!0;if(A.Boot.__interfLoop(t.__class__,e))return!0}return e==E&&null!=t.__name__?!0:e==F&&null!=t.__ename__?!0:t.__enum__==e}},A.Boot.__cast=function(t,e){if(A.Boot.__instanceof(t,e))return t;throw"Cannot cast "+d.string(t)+" to "+d.string(e)},A.Browser=function(){},i["js.Browser"]=A.Browser,A.Browser.__name__=["js","Browser"];var S={};S.Handler=function(){this._timer=0,this.fps=0,this.hasFocus=!0,this.mouseWheel=0,this.mouseMiddlePressed=!1,this.mouseRightPressed=!1,this.mouseLeftPressed=!1;var t=this;_.display.Sprite.call(this),this.joysticks=[],this.realJoysticks=[],this._rect=new _.geom.Rectangle,this._point=new _.geom.Point,this._joy=new S.utils.Joystick(0);for(var e=0;4>e;){var i=e++,n={buttons:function(){for(var t,e=[],i=0;20>i;){{i++}e.push(!1)}return t=e}(this),axes:function(){for(var t,e=[],i=0;4>i;){{i++}e.push(0)}return t=e}(this),axisCount:0};this.joysticks.push(n),this.realJoysticks.push(new S.utils.Joystick(i))}_.Lib.get_current().get_stage().addChild(this),S.Love.audio=new S.utils.LoveAudio,S.Love.event=new S.utils.LoveEvent,S.Love.filesystem=new S.utils.LoveFilesystem,S.Love.font=new S.utils.LoveFont,S.Love.graphics=new S.utils.LoveGraphics,S.Love.image=new S.utils.LoveImage,S.Love.joystick=new S.utils.LoveJoystick,S.Love.keyboard=new S.utils.LoveKeyboard,S.Love.math=new S.utils.LoveMath,S.Love.mouse=new S.utils.LoveMouse,S.Love.physics=new S.utils.LovePhysics,S.Love.sound=new S.utils.LoveSound,S.Love.system=new S.utils.LoveSystem,S.Love.thread=new S.utils.LoveThread,S.Love.timer=new S.utils.LoveTimer,S.Love.touch=new S.utils.LoveTouch,S.Love.window=new S.utils.LoveWindow,this.keys=function(){for(var t,e=[],i=0;255>i;){{i++}e.push(!1)}return t=e}(this),this.addEventListener("enterFrame",function(){var e=_.Lib.getTimer();if(t.dt=.001*(e-t._timer),t._timer=e,null!=S.Love.update&&S.Love.update(t.dt),null!=S.Love.draw&&(S.Love.graphics.clear(),S.Love.graphics.setColor(t.color.r,t.color.g,t.color.b,t.color.a),S.Love.draw(),null!=t.cursor)){var i=t.cursor._image;S.Love.graphics.draw(i,S.Love.handler.get_stage().get_mouseX(),S.Love.handler.get_stage().get_mouseY()),t.get_graphics().clear(),t._rect.width=i._bitmapData.component.width,t._rect.height=i._bitmapData.component.height,t.canvas.copyPixels(i._bitmapData,t._rect,t._point)}}),this.get_stage().addEventListener("keydown",function(e){if(t.keys[e.keyCode]||null==S.Love.keypressed||S.Love.keypressed(S.utils.LoveKeyboard.toChar(e.keyCode),!1),t.keys[e.keyCode]=!0,S.Love.keyboard._textInput){var i=S.utils.LoveKeyboard.toChar(e.keyCode);S.Love.keyboard.isDown("lshift")&&(i=i.toUpperCase()),"LSHIFT"!=i&&null!=S.Love.textinput&&S.Love.textinput(i)}}),this.get_stage().addEventListener("keyup",function(e){t.keys[e.keyCode]&&null!=S.Love.keyreleased&&S.Love.keyreleased(S.utils.LoveKeyboard.toChar(e.keyCode)),t.keys[e.keyCode]=!1}),this.get_stage().addEventListener("mousedown",function(e){t.mouseLeftPressed||null==S.Love.mousepressed||S.Love.mousepressed(e.get_stageX(),e.get_stageY(),"l"),t.mouseLeftPressed=!0}),this.get_stage().addEventListener("mouseup",function(e){t.mouseLeftPressed&&null!=S.Love.mousereleased&&S.Love.mousereleased(e.get_stageX(),e.get_stageY(),"l"),t.mouseLeftPressed=!1}),this.get_stage().addEventListener("mousewheel",function(e){if(t.mouseWheel!=e.get_delta()){var i=1==t.sign(e.get_delta())?"wu":"wd";null!=S.Love.mousepressed&&S.Love.mousepressed(e.get_stageX(),e.get_stageY(),i),null!=S.Love.mousereleased&&S.Love.mousereleased(e.get_stageX(),e.get_stageY(),i)}t.mouseWheel=e.get_delta()}),this.get_stage().addEventListener("touchbegin",function(t){var e=S.Love.touch._list[t.touchPointID];e._x=t.stageX,e._y=t.stageY,e._pressure=y.hasField(t,"pressure")?y.getProperty(t,"pressure"):1,e._isDown=!0,null!=S.Love.touchpressed&&S.Love.touchpressed(t.stageX,t.stageY,e),S.Love.touch._count++}),this.get_stage().addEventListener("touchend",function(t){var e=S.Love.touch._list[t.touchPointID];e._x=t.stageX,e._y=t.stageY,e._pressure=y.hasField(t,"pressure")?y.getProperty(t,"pressure"):1,null!=S.Love.touchreleased&&S.Love.touchreleased(t.stageX,t.stageY,e),S.Love.touch._count--}),this.get_stage().addEventListener("resize",function(){t.canvas=new _.display.BitmapData(S.Love.handler.get_stage().get_stageWidth(),S.Love.handler.get_stage().get_stageHeight()),t.bitmap.set_bitmapData(t.canvas),null!=S.Love.resize&&S.Love.resize(S.Love.handler.get_stage().get_stageWidth(),S.Love.handler.get_stage().get_stageHeight())}),this.get_stage().addEventListener("focus",function(){null!=S.Love.focus&&S.Love.focus(!0),t.hasFocus=!0}),this.get_stage().addEventListener("blur",function(){null!=S.Love.focus&&S.Love.focus(!1),t.hasFocus=!1}),this.get_stage().addEventListener("close",function(){null!=S.Love.quit&&S.Love.quit()}),this.color={r:255,g:255,b:255,a:255},this.bgColor={r:0,g:0,b:0,a:255},this.canvas=new _.display.BitmapData(this.get_stage().get_stageWidth(),this.get_stage().get_stageHeight(),!0,0),this.bitmap=new _.display.Bitmap(this.canvas),this.addChild(this.bitmap)},i["love2d.Handler"]=S.Handler,S.Handler.__name__=["love2d","Handler"],S.Handler.__super__=_.display.Sprite,S.Handler.prototype=t(_.display.Sprite.prototype,{get_intBgColor:function(){return this.rgb(this.bgColor.r,this.bgColor.g,this.bgColor.b)},get_intColor:function(){return this.rgb(this.color.r,this.color.g,this.color.b)},sign:function(t){return 0==t?0:0>t?-1:1},rgba:function(t,e,i,n){return(255&t)<<16|(255&e)<<8|255&i|n},rgb:function(t,e,i){return(255&t)<<16|(255&e)<<8|255&i},__class__:S.Handler,__properties__:t(_.display.Sprite.prototype.__properties__,{get_intColor:"get_intColor",get_intBgColor:"get_intBgColor"})}),S.Love=function(){},i["love2d.Love"]=S.Love,S.Love.__name__=["love2d","Love"],S.Love.__properties__={get_stage:"get_stage"},S.Love.init=function(){var t=new _.display.Sprite;t.addEventListener("addedToStage",function(){S.Love.handler=new S.Handler,S.Love._inited||null==S.Love.load||(S.Love.load(),S.Love._inited=!0)}),_.Lib.get_current().get_stage().addChild(t)},S.Love.print=function(t){console&&console.log(t)},S.Love.get_stage=function(){return S.Love.handler.get_stage()},S.Love.newError=function(t){null!=S.Love.errhand&&S.Love.errhand(t),console&&console.log(t)},S.utils={},S.utils.Object=function(){},i["love2d.utils.Object"]=S.utils.Object,S.utils.Object.__name__=["love2d","utils","Object"],S.utils.Object.prototype={typeOf:function(){return!1},type:function(){return v.getClassName(v.getClass(this))},__class__:S.utils.Object},S.utils.BezierCurve=function(t){S.utils.Object.call(this),this._vertices=t},i["love2d.utils.BezierCurve"]=S.utils.BezierCurve,S.utils.BezierCurve.__name__=["love2d","utils","BezierCurve"],S.utils.BezierCurve.__super__=S.utils.Object,S.utils.BezierCurve.prototype=t(S.utils.Object.prototype,{subdivide:function(t,e){if(!(0>=e));},getDegree:function(){return this._vertices.length-1},getControlPointCount:function(){return this._vertices.length},getControlPoint:function(t){return t>0&&t<this._vertices.length?this._vertices[t]:null},render:function(t){return null==t&&(t=5),null},getDerivative:function(){for(var t=function(t){for(var e,i=[],n=0,s=t._vertices.length-1;s>n;){{n++}i.push({x:0,y:0})}return e=i}(this),e=this._vertices.length-1,i=0,n=t.length;n>i;){var s=i++;t[s].x=(this._vertices[s+1].x-this._vertices[s].x)*e,t[s].y=(this._vertices[s+1].y-this._vertices[s].y)*e}return new S.utils.BezierCurve(t)},evaluate:function(t){if(0>t||t>1)return null!=S.Love.errhand&&S.Love.errhand("Invalid evaluation parameter: must be between 0 and 1"),console&&console.log("Invalid evaluation parameter: must be between 0 and 1"),null;if(this._vertices.length<2)return null!=S.Love.errhand&&S.Love.errhand("Invalid Bezier curve: Not enough control points."),console&&console.log("Invalid Bezier curve: Not enough control points."),null;for(var e=this._vertices.slice(),i=1,n=this._vertices.length;n>i;)for(var s=i++,o=0,a=this._vertices.length-s;a>o;){var r=o++;e[r].x=e[r].x*(1-t)+e[r+1].x*t,e[r].y=e[r].y*(1-t)+e[r+1].y*t}return e[0]},scale:function(t,e,i){null==i&&(i=0),null==e&&(e=0);for(var n=0,s=this._vertices.length;s>n;){var o=n++,a=this._vertices[o].x,r=this._vertices[o].y;this._vertices[o]={x:(a-e)*t+e,y:(r-i)*t+i}}},rotate:function(t,e,i){null==i&&(i=0),null==e&&(e=0);for(var n=Math.cos(t),s=Math.sin(t),o=0,a=this._vertices.length;a>o;){var r=o++,l=this._vertices[r].x,m=this._vertices[r].y;this._vertices[r]={x:n*(l-e)-s*(m-i)+e,y:s*(l-e)+n*(m-i)+i}}},translate:function(t,e){for(var i=0,n=this._vertices.length;n>i;){var s=i++,o=this._vertices[s].x,a=this._vertices[s].y;this._vertices[s]={x:o+t,y:a+e}}},setControlPoint:function(t,e,i){t>0&&t<this._vertices.length&&(this._vertices[t]={x:e,y:i})},insertControlPoint:function(t,e,i){null==i&&(i=-1);var n={x:t,y:e};i>this._vertices.length-1&&(i=-1),-1==i&&(i=this._vertices.length),-2==i&&(i=this._vertices.length-1),this._vertices.splice(i,0,n)},__class__:S.utils.BezierCurve}),S.utils.Cursor=function(t,e,i){null==i&&(i=0),null==e&&(e=0),S.utils.Object.call(this),A.Boot.__instanceof(t,String)&&(this._image=S.Love.graphics.newImage(t),this._type="image"),this._hotx=e,this._hoty=i},i["love2d.utils.Cursor"]=S.utils.Cursor,S.utils.Cursor.__name__=["love2d","utils","Cursor"],S.utils.Cursor.__super__=S.utils.Object,S.utils.Cursor.prototype=t(S.utils.Object.prototype,{getImage:function(){return this._image},getType:function(){return this._type},__class__:S.utils.Cursor}),S.utils.Data=function(){S.utils.Object.call(this)},i["love2d.utils.Data"]=S.utils.Data,S.utils.Data.__name__=["love2d","utils","Data"],S.utils.Data.__super__=S.utils.Object,S.utils.Data.prototype=t(S.utils.Object.prototype,{getString:function(){return""},getSize:function(){return 0},getPointer:function(){return null},__class__:S.utils.Data}),S.utils.Drawable=function(){S.utils.Object.call(this)},i["love2d.utils.Drawable"]=S.utils.Drawable,S.utils.Drawable.__name__=["love2d","utils","Drawable"],S.utils.Drawable.__super__=S.utils.Object,S.utils.Drawable.prototype=t(S.utils.Object.prototype,{draw:function(){},__class__:S.utils.Drawable}),S.utils.Font=function(t,e){null==e&&(e=12),S.utils.Object.call(this),A.Boot.__instanceof(t,String)&&(this._flashFont=L.Assets.getFont(t)),this._size=e},i["love2d.utils.Font"]=S.utils.Font,S.utils.Font.__name__=["love2d","utils","Font"],S.utils.Font.__super__=S.utils.Object,S.utils.Font.prototype=t(S.utils.Object.prototype,{getSize:function(){return this._size},getFlashFont:function(){return this._flashFont},hasGlyphs:function(t){return this._flashFont.hasGlyphs(t)},__class__:S.utils.Font}),S.utils.Image=function(t){S.utils.Drawable.call(this),A.Boot.__instanceof(t,String)&&(this._bitmapData=L.Assets.getBitmapData(t))},i["love2d.utils.Image"]=S.utils.Image,S.utils.Image.__name__=["love2d","utils","Image"],S.utils.Image.__super__=S.utils.Drawable,S.utils.Image.prototype=t(S.utils.Drawable.prototype,{draw:function(t,e,i,n,s,o,a,r){S.Love.graphics.bitmap(this._bitmapData,t,e,n,s,i,o,a,r)},getDimensions:function(){return{width:this._bitmapData.component.width,height:this._bitmapData.component.height}},getHeight:function(){return this._bitmapData.component.height},getWidth:function(){return this._bitmapData.component.width},__class__:S.utils.Image}),S.utils.ImageData=function(t,e){S.utils.Data.call(this),this._bitmapData=new _.display.BitmapData(t,e)},i["love2d.utils.ImageData"]=S.utils.ImageData,S.utils.ImageData.__name__=["love2d","utils","ImageData"],S.utils.ImageData.__super__=S.utils.Data,S.utils.ImageData.prototype=t(S.utils.Data.prototype,{mapPixel:function(){},getPixel:function(t,e){return t>-1&&e>-1&&t<this._bitmapData.component.width&&e<this._bitmapData.component.height||(null!=S.Love.errhand&&S.Love.errhand("The X and Y must be in range of [0, w - 1 or h - 1]"),console&&console.log("The X and Y must be in range of [0, w - 1 or h - 1]")),null},setPixel:function(t,e,i,n,s,o){t>-1&&e>-1&&t<this._bitmapData.component.width&&e<this._bitmapData.component.height?this._bitmapData.setPixel32(t,e,S.Love.handler.rgba(i,n,s,o)):(null!=S.Love.errhand&&S.Love.errhand("The X and Y must be in range of [0, w - 1 or h - 1]"),console&&console.log("The X and Y must be in range of [0, w - 1 or h - 1]"))},getDimensions:function(){return{width:this._bitmapData.component.width,height:this._bitmapData.component.height}},getHeight:function(){return this._bitmapData.component.height},getWidth:function(){return this._bitmapData.component.width},__class__:S.utils.ImageData}),S.utils.Joystick=function(t){S.utils.Object.call(this),this._id=t
},i["love2d.utils.Joystick"]=S.utils.Joystick,S.utils.Joystick.__name__=["love2d","utils","Joystick"],S.utils.Joystick.__super__=S.utils.Object,S.utils.Joystick.prototype=t(S.utils.Object.prototype,{getGamepadMapping:function(){},isGamepadDown:function(){return!1},isGamepad:function(){return!0},isConnected:function(){return!0},getName:function(){return"unknown"},setVibration:function(t,e){return null==e&&(e=0),null==t&&(t=0),!1},getVibration:function(){return{left:0,right:0}},isVibrationSupported:function(){return!1},getButtonCount:function(){return 20},getHatCount:function(){return 2},getHat:function(){return"unknown"},getAxisCount:function(){return S.Love.handler.joysticks[this._id].axisCount},getGamepadAxis:function(t){return S.Love.handler.joysticks[this._id].axes[t]},isDown:function(t){return S.Love.handler.joysticks[this._id].buttons[t]},getAxes:function(){return S.Love.handler.joysticks[this._id].axes},getAxis:function(t){return S.Love.handler.joysticks[this._id].axes[t]},getGUID:function(){return this._id},getID:function(){return this._id},__class__:S.utils.Joystick}),S.utils.LoveAudio=function(){this._volume=1,this._sources=[]},i["love2d.utils.LoveAudio"]=S.utils.LoveAudio,S.utils.LoveAudio.__name__=["love2d","utils","LoveAudio"],S.utils.LoveAudio.prototype={newSource:function(t,e){return new S.utils.Source(t,e)},resume:function(t){if(null!=t)t.resume();else for(var e=0,i=this._sources;e<i.length;){var n=i[e];++e,n.resume()}},stop:function(t){if(null!=t)t.stop();else for(var e=0,i=this._sources;e<i.length;){var n=i[e];++e,n.stop()}},pause:function(t){if(null!=t)t.pause();else for(var e=0,i=this._sources;e<i.length;){var n=i[e];++e,n.pause()}},play:function(t){null!=t&&t.play()},getSourceCount:function(){for(var t=0,e=0,i=this._sources;e<i.length;){var n=i[e];++e,n._playing&&t++}return t},getVolume:function(){return this._volume},setVolume:function(t){this._volume=t},__class__:S.utils.LoveAudio},S.utils.LoveEvent=function(){},i["love2d.utils.LoveEvent"]=S.utils.LoveEvent,S.utils.LoveEvent.__name__=["love2d","utils","LoveEvent"],S.utils.LoveEvent.prototype={quit:function(){null!=S.Love.quit&&S.Love.quit(),_.system.System.exit(0)},push:function(){},pump:function(){},wait:function(){return null},poll:function(){return null},clear:function(){},__class__:S.utils.LoveEvent},S.utils.LoveFilesystem=function(){this.init()},i["love2d.utils.LoveFilesystem"]=S.utils.LoveFilesystem,S.utils.LoveFilesystem.__name__=["love2d","utils","LoveFilesystem"],S.utils.LoveFilesystem.prototype={getLastModified:function(){return null},isDirectory:function(){return!1},createDirectory:function(){return!1},write:function(t,e,i){return null==i&&(i=-1),!1},read:function(t,e){return null==e&&(e=-1),"You can't access files while targeting JS."},remove:function(){return!1},exists:function(){return!1},init:function(){},__class__:S.utils.LoveFilesystem},S.utils.LoveFont=function(){},i["love2d.utils.LoveFont"]=S.utils.LoveFont,S.utils.LoveFont.__name__=["love2d","utils","LoveFont"],S.utils.LoveFont.prototype={__class__:S.utils.LoveFont},S.utils.LoveGraphics=function(){this._lineWidth=1,this._pointSize=1,this._sprite=new _.display.Sprite,this.gr=this._sprite.get_graphics(),this._bm=new _.display.Bitmap,this._mat=new _.geom.Matrix,this._jointStyle="round",this._bufferRect=new _.geom.Rectangle,this._colorTransform=new _.geom.ColorTransform,this._textFormat=new _.text.TextFormat,this._textField=new _.text.TextField,this._textField.set_text(""),this._textField.defaultTextFormat=this._textFormat,this._textField.embedFonts=!0,this._textField.set_selectable(!1),this._textField.set_visible(!0),this._textField.set_autoSize("LEFT"),this._sprite.addChild(this._bm),_.Lib.get_current().get_stage().addChild(this._sprite)},i["love2d.utils.LoveGraphics"]=S.utils.LoveGraphics,S.utils.LoveGraphics.__name__=["love2d","utils","LoveGraphics"],S.utils.LoveGraphics.prototype={newQuad:function(t,e,i,n,s,o){return null==n&&(n=1),null==i&&(i=1),null==e&&(e=0),null==t&&(t=0),new S.utils.Quad(t,e,i,n,s,o)},newSpriteBatch:function(t,e,i){return null==i&&(i="dynamic"),null==e&&(e=1e3),new S.utils.SpriteBatch(t,e,i)},newFont:function(t,e){return null==e&&(e=12),new S.utils.Font(t,e)},newImage:function(t){return new S.utils.Image(t)},printf:function(t,e,i,n,s,o,a,r,l,m){null==m&&(m=0),null==l&&(l=0),null==r&&(r=1),null==a&&(a=1),null==o&&(o=0),null==s&&(s="left"),null==i&&(i=0),null==e&&(e=0),this._textField.textColor=S.Love.handler.get_intColor(),this._textField.set_visible(!0),this._textField.set_width(n),this._textField.set_text(t),this._textField.set_x(e),this._textField.set_y(i),this._textField.set_rotation(o),this._textField.set_scaleX(a),this._textField.set_scaleY(r),this._textFormat.align=function(){var t;switch(s){case"left":t=_.text.TextFormatAlign.LEFT;break;case"right":t=_.text.TextFormatAlign.RIGHT;break;case"center":t=_.text.TextFormatAlign.CENTER;break;case"justify":t=_.text.TextFormatAlign.JUSTIFY;break;default:t=_.text.TextFormatAlign.LEFT}return t}(this)},print:function(t,e,i,n,s,o,a,r){null==r&&(r=0),null==a&&(a=0),null==o&&(o=1),null==s&&(s=1),null==n&&(n=0),null==i&&(i=0),null==e&&(e=0),this._textField.textColor=S.Love.handler.get_intColor(),this._textField.set_visible(!0),this._textField.set_text(t),this._textField.set_x(this._textField.set_y(0)),this._mat.identity(),this._mat.translate(-a*s,-r*o),this._mat.scale(s,o),0!=n&&this._mat.rotate(n),this._mat.translate(e+a*s,i+r*o),S.Love.handler.canvas.draw(this._textField,this._mat)},bitmap:function(t,e,i,n,s,o,a,r,l){null==r&&(r=0),null==a&&(a=0),null==o&&(o=0),null==s&&(s=1),null==n&&(n=1),null==i&&(i=0),null==e&&(e=0),this.gr.clear(),this._mat.identity(),this._mat.translate(-a,-r),null!=l?this._mat.translate(-l._x,-l._y):0!=o&&this._mat.rotate(o),this._mat.scale(n,s),this._mat.translate(e,i),this._colorTransform.redMultiplier=S.Love.handler.color.r/255,this._colorTransform.greenMultiplier=S.Love.handler.color.g/255,this._colorTransform.blueMultiplier=S.Love.handler.color.b/255,this._colorTransform.alphaMultiplier=S.Love.handler.color.a/255,null!=l?(this._bufferRect.x=e+-a*n,this._bufferRect.y=i+-r*s,this._bufferRect.width=l._width*n,this._bufferRect.height=l._height*s,S.Love.handler.canvas.draw(t,this._mat,this._colorTransform,this._blendMode,this._bufferRect,!1)):(this._bufferRect.setEmpty(),S.Love.handler.canvas.draw(t,this._mat,this._colorTransform,this._blendMode))},draw:function(t,e,i,n,s,o,a,r,l){null==r&&(r=0),null==a&&(a=0),null==o&&(o=1),null==s&&(s=1),null==n&&(n=0),null==i&&(i=0),null==e&&(e=0),t.draw(e,i,n,s,o,a,r,l)},polygon:function(t,e){this.gr.clear(),"fill"==t?this.gr.beginFill(S.Love.handler.get_intColor(),S.Love.handler.color.a/255):this.gr.lineStyle(this._lineWidth,S.Love.handler.get_intColor(),S.Love.handler.color.a/255),this.gr.moveTo(e[0].x,e[0].y);for(var i=1,n=e.length;n>i;){var s=i++;this.gr.lineTo(e[s].x,e[s].y)}this.gr.lineTo(e[0].x,e[0].y),this.gr.endFill(),S.Love.handler.canvas.draw(this._sprite)},arc:function(t,e,i,n,s,o,a){null==a&&(a=10)},line:function(t,e,i,n){if(A.Boot.__instanceof(t,D));else if(A.Boot.__instanceof(t,Array)){if(0==t.length)return console&&console.log("Array is empty."),void 0;t.length%2!=0&&t.pop()}this.gr.clear(),this.gr.lineStyle(this._lineWidth,S.Love.handler.get_intColor(),S.Love.handler.color.a/255),A.Boot.__instanceof(t,D)?(this.gr.moveTo(i,n),this.gr.lineTo(t,e)):A.Boot.__instanceof(t,Array),S.Love.handler.canvas.draw(this._sprite)},point:function(t,e){this.rectangle("fill",t,e,this._pointSize,this._pointSize)},circle:function(t,e,i,n){this.gr.clear(),"line"==t?(this.gr.lineStyle(this._lineWidth,S.Love.handler.get_intColor(),S.Love.handler.color.a/255),this.gr.drawCircle(e,i,n)):(this.gr.beginFill(S.Love.handler.get_intColor(),S.Love.handler.color.a/255),this.gr.drawCircle(e,i,n),this.gr.endFill()),S.Love.handler.canvas.draw(this._sprite)},rectangle:function(t,e,i,n,s){this.gr.clear(),"line"==t?(this.gr.lineStyle(this._lineWidth,S.Love.handler.get_intColor(),S.Love.handler.color.a/255),this.gr.drawRect(e,i,n,s)):(this.gr.beginFill(S.Love.handler.get_intColor(),S.Love.handler.color.a/255),this.gr.drawRect(e,i,n,s),this.gr.endFill()),S.Love.handler.canvas.draw(this._sprite)},getBlendMode:function(){switch(this._blendMode){case _.display.BlendMode.ADD:return"additive";case _.display.BlendMode.ALPHA:case _.display.BlendMode.NORMAL:return"alpha";case _.display.BlendMode.SUBTRACT:return"subtractive";case _.display.BlendMode.MULTIPLY:return"multiplicative";default:return""}return""},setBlendMode:function(t){switch(null==t&&(t="alpha"),t){case"additive":this._blendMode=_.display.BlendMode.ADD;break;case"alpha":this._blendMode=_.display.BlendMode.ALPHA;break;case"subtractive":this._blendMode=_.display.BlendMode.SUBTRACT;break;case"multiplicative":this._blendMode=_.display.BlendMode.MULTIPLY}},setNewFont:function(t,e){null==e&&(e=12);var i=this.newFont(t,e);return this.setFont(i),i},getFont:function(){return this._font},setFont:function(t){this._font=t,this._textFormat.font=this._font.getFlashFont().fontName,this._textFormat.size=this._font.getSize(),this._textField.defaultTextFormat=this._textFormat,this._textField.setTextFormat(this._textFormat,0,this._textField.get_text().length)},getPointSize:function(){return this._pointSize},setPointSize:function(t){this._pointSize=t},getLineJoin:function(){var t=this;switch(t._jointStyle){case"round":return"none";case"miter":return"miter";case"bevel":return"bevel"}return""},setLineJoin:function(t){switch(t){case"none":this._jointStyle="round";break;case"miter":this._jointStyle="miter";break;case"bevel":this._jointStyle="bevel";break;default:return}},getLineWidth:function(){return this._lineWidth},setLineWidth:function(t){this._lineWidth=t},getBackgroundColor:function(){return S.Love.handler.bgColor},setBackgroundColor:function(t,e,i,n){null==n&&(n=255),null==i&&(i=255),null==e&&(e=255),null==t&&(t=255),t=0>t?0:t>255?255:t,e=0>e?0:e>255?255:e,i=0>i?0:i>255?255:i,n=0>n?0:n>255?255:n,S.Love.handler.bgColor={r:t,g:e,b:i,a:n}},getColor:function(){return S.Love.handler.color},setColor:function(t,e,i,n){null==n&&(n=255),null==i&&(i=255),null==e&&(e=255),null==t&&(t=255),t=0>t?0:t>255?255:t,e=0>e?0:e>255?255:e,i=0>i?0:i>255?255:i,n=0>n?0:n>255?255:n,S.Love.handler.color={r:t,g:e,b:i,a:n},this._colorTransform.redMultiplier=t/255,this._colorTransform.greenMultiplier=e/255,this._colorTransform.blueMultiplier=i/255,this._colorTransform.alphaMultiplier=n/255},reset:function(){this.setColor(null,null,null,null),this.setBackgroundColor(0,0,0,255),this.setBlendMode("alpha"),this._pointSize=this._lineWidth=1},clear:function(){this.gr.clear();var t=S.Love.handler.canvas;t.fillRect(t.rect,-16777216|S.Love.handler.get_intBgColor())},pop:function(){},push:function(){},shear:function(t,e){this._kx=t,this._ky=e},scale:function(t,e){this._scaleX=t,this._scaleY=e},rotate:function(t){this._angle=t},translate:function(t,e){this._dx=t,this._dy=e},origin:function(){this._angle=0,this._scaleX=1,this._scaleY=1,this._kx=0,this._ky=0,this._dx=0,this._dy=0},__class__:S.utils.LoveGraphics},S.utils.LoveImage=function(){},i["love2d.utils.LoveImage"]=S.utils.LoveImage,S.utils.LoveImage.__name__=["love2d","utils","LoveImage"],S.utils.LoveImage.prototype={newImageData:function(t,e){return new S.utils.ImageData(t,e)},__class__:S.utils.LoveImage},S.utils.LoveJoystick=function(){S.utils.LoveJoystick._buttonsString=new w.ds.StringMap,S.utils.LoveJoystick._buttonsInt=new w.ds.IntMap},i["love2d.utils.LoveJoystick"]=S.utils.LoveJoystick,S.utils.LoveJoystick.__name__=["love2d","utils","LoveJoystick"],S.utils.LoveJoystick.setMap=function(t,e){S.utils.LoveJoystick._buttonsString.set(t,e),S.utils.LoveJoystick._buttonsInt.set(e,t)},S.utils.LoveJoystick.toString=function(){return""},S.utils.LoveJoystick.toInt=function(){return 0},S.utils.LoveJoystick.prototype={setGamepadMapping:function(){return!1},getJoystickCount:function(){return S.Love.handler.realJoysticks.length},getJoysticks:function(){return S.Love.handler.realJoysticks},__class__:S.utils.LoveJoystick},S.utils.OUYA=function(){},i["love2d.utils.OUYA"]=S.utils.OUYA,S.utils.OUYA.__name__=["love2d","utils","OUYA"],S.utils.LoveKeyboard=function(){this._textInput=!1,S.utils.LoveKeyboard._keyChar=new w.ds.StringMap,S.utils.LoveKeyboard._keyInt=new w.ds.IntMap,S.utils.LoveKeyboard._setMap(8,"backspace"),S.utils.LoveKeyboard._setMap(9,"tab"),S.utils.LoveKeyboard._setMap(45,"insert"),S.utils.LoveKeyboard._setMap(13,"return"),S.utils.LoveKeyboard._setMap(46,"delete"),S.utils.LoveKeyboard._setMap(144,"numlock"),S.utils.LoveKeyboard._setMap(20,"capslock"),S.utils.LoveKeyboard._setMap(145,"scrolllock"),S.utils.LoveKeyboard._setMap(16,"lshift"),S.utils.LoveKeyboard._setMap(17,"lctrl"),S.utils.LoveKeyboard._setMap(18,"lalt"),S.utils.LoveKeyboard._setMap(91,"lgui"),S.utils.LoveKeyboard._setMap(92,"rgui"),S.utils.LoveKeyboard._setMap(19,"pause"),S.utils.LoveKeyboard._setMap(27,"escape"),S.utils.LoveKeyboard._setMap(37,"left"),S.utils.LoveKeyboard._setMap(39,"right"),S.utils.LoveKeyboard._setMap(38,"up"),S.utils.LoveKeyboard._setMap(40,"down"),S.utils.LoveKeyboard._setMap(36,"home"),S.utils.LoveKeyboard._setMap(35,"end"),S.utils.LoveKeyboard._setMap(33,"pageup"),S.utils.LoveKeyboard._setMap(34,"pagedown"),S.utils.LoveKeyboard._setMap(48,"0"),S.utils.LoveKeyboard._setMap(49,"1"),S.utils.LoveKeyboard._setMap(50,"2"),S.utils.LoveKeyboard._setMap(51,"3"),S.utils.LoveKeyboard._setMap(52,"4"),S.utils.LoveKeyboard._setMap(53,"5"),S.utils.LoveKeyboard._setMap(54,"6"),S.utils.LoveKeyboard._setMap(55,"7"),S.utils.LoveKeyboard._setMap(56,"8"),S.utils.LoveKeyboard._setMap(57,"9"),S.utils.LoveKeyboard._setMap(96,"kp0"),S.utils.LoveKeyboard._setMap(97,"kp1"),S.utils.LoveKeyboard._setMap(98,"kp2"),S.utils.LoveKeyboard._setMap(99,"kp3"),S.utils.LoveKeyboard._setMap(100,"kp4"),S.utils.LoveKeyboard._setMap(101,"kp5"),S.utils.LoveKeyboard._setMap(102,"kp6"),S.utils.LoveKeyboard._setMap(103,"kp7"),S.utils.LoveKeyboard._setMap(104,"kp8"),S.utils.LoveKeyboard._setMap(105,"kp9"),S.utils.LoveKeyboard._setMap(110,"kp."),S.utils.LoveKeyboard._setMap(188,"kp,"),S.utils.LoveKeyboard._setMap(111,"kp/"),S.utils.LoveKeyboard._setMap(106,"kp*"),S.utils.LoveKeyboard._setMap(107,"kp+"),S.utils.LoveKeyboard._setMap(109,"kp-"),S.utils.LoveKeyboard._setMap(65,"a"),S.utils.LoveKeyboard._setMap(66,"b"),S.utils.LoveKeyboard._setMap(67,"c"),S.utils.LoveKeyboard._setMap(68,"d"),S.utils.LoveKeyboard._setMap(69,"e"),S.utils.LoveKeyboard._setMap(70,"f"),S.utils.LoveKeyboard._setMap(71,"g"),S.utils.LoveKeyboard._setMap(72,"h"),S.utils.LoveKeyboard._setMap(73,"i"),S.utils.LoveKeyboard._setMap(74,"j"),S.utils.LoveKeyboard._setMap(75,"k"),S.utils.LoveKeyboard._setMap(76,"l"),S.utils.LoveKeyboard._setMap(77,"m"),S.utils.LoveKeyboard._setMap(78,"n"),S.utils.LoveKeyboard._setMap(79,"o"),S.utils.LoveKeyboard._setMap(80,"p"),S.utils.LoveKeyboard._setMap(81,"q"),S.utils.LoveKeyboard._setMap(82,"r"),S.utils.LoveKeyboard._setMap(83,"s"),S.utils.LoveKeyboard._setMap(84,"t"),S.utils.LoveKeyboard._setMap(85,"u"),S.utils.LoveKeyboard._setMap(86,"v"),S.utils.LoveKeyboard._setMap(87,"w"),S.utils.LoveKeyboard._setMap(88,"x"),S.utils.LoveKeyboard._setMap(89,"y"),S.utils.LoveKeyboard._setMap(90,"z"),S.utils.LoveKeyboard._setMap(187,"="),S.utils.LoveKeyboard._setMap(192,"`"),S.utils.LoveKeyboard._setMap(191,"/"),S.utils.LoveKeyboard._setMap(220,"\\"),S.utils.LoveKeyboard._setMap(219,"["),S.utils.LoveKeyboard._setMap(221,"]"),S.utils.LoveKeyboard._setMap(186,";"),S.utils.LoveKeyboard._setMap(222,"'"),S.utils.LoveKeyboard._setMap(112,"f1"),S.utils.LoveKeyboard._setMap(113,"f2"),S.utils.LoveKeyboard._setMap(114,"f3"),S.utils.LoveKeyboard._setMap(115,"f4"),S.utils.LoveKeyboard._setMap(116,"f5"),S.utils.LoveKeyboard._setMap(117,"f6"),S.utils.LoveKeyboard._setMap(118,"f7"),S.utils.LoveKeyboard._setMap(119,"f8"),S.utils.LoveKeyboard._setMap(120,"f9"),S.utils.LoveKeyboard._setMap(121,"f10"),S.utils.LoveKeyboard._setMap(122,"f11"),S.utils.LoveKeyboard._setMap(123,"f12"),S.utils.LoveKeyboard._setMap(32," ")},i["love2d.utils.LoveKeyboard"]=S.utils.LoveKeyboard,S.utils.LoveKeyboard.__name__=["love2d","utils","LoveKeyboard"],S.utils.LoveKeyboard._setMap=function(t,e){S.utils.LoveKeyboard._keyChar.set(e,t),S.utils.LoveKeyboard._keyInt.set(t,e)},S.utils.LoveKeyboard.toChar=function(t){return S.utils.LoveKeyboard._keyInt.exists(t)?S.utils.LoveKeyboard._keyInt.get(t):"unknown"},S.utils.LoveKeyboard.toInt=function(t){return S.utils.LoveKeyboard._keyChar.exists(t)?S.utils.LoveKeyboard._keyChar.get(t):-1},S.utils.LoveKeyboard.prototype={hasKeyRepeat:function(){return!1},setKeyRepeat:function(){},setTextInput:function(t){null==t&&(t=!0),this._textInput=t},hasTextInput:function(){return this._textInput},isDown:function(t){return A.Boot.__instanceof(t,T)?S.Love.handler.keys[t]:A.Boot.__instanceof(t,String)?S.Love.handler.keys[S.utils.LoveKeyboard.toInt(t)]:!1},__class__:S.utils.LoveKeyboard},S.utils.LoveMath=function(){this._seed=Math.round(2147483646*Math.random()),this.rng=this.newRandomGenerator()},i["love2d.utils.LoveMath"]=S.utils.LoveMath,S.utils.LoveMath.__name__=["love2d","utils","LoveMath"],S.utils.LoveMath.prototype={newBezierCurve:function(t){return new S.utils.BezierCurve(t)},newRandomGenerator:function(t){return new S.utils.RandomGenerator(t)},triangulate:function(){return null},isConvex:function(t){for(var e,i,n,s=0,o=t.length,a=0;o>a;){var r=a++;if(e=(r+1)%o,i=(r+2)%o,n=(t[e].x-t[r].x)*(t[i].y-t[e].y),n-=(t[e].y-t[r].y)*(t[i].x-t[e].x),0>n?s|=1:n>0&&(s|=2),3==s)return!1}return 0!=s?!0:!1},getRandomSeed:function(){return this.rng._seed},setRandomSeed:function(t){t>=1&&2147483646>=t?this.rng._seed=t:(null!=S.Love.errhand&&S.Love.errhand("The seed number must be within the range of [1, 2147483646]."),console&&console.log("The seed number must be within the range of [1, 2147483646]."))},noise:function(){return 0},randomNormal:function(t,e){return null==e&&(e=0),null==t&&(t=1),this.rng.randomNormal(t,e)},random:function(t,e){return this.rng.random(t,e)},__class__:S.utils.LoveMath},S.utils.LoveMouse=function(){},i["love2d.utils.LoveMouse"]=S.utils.LoveMouse,S.utils.LoveMouse.__name__=["love2d","utils","LoveMouse"],S.utils.LoveMouse.prototype={newCursor:function(t,e,i){return null==e&&(e=0),new S.utils.Cursor(t,e,i)},getSystemCursor:function(){return null},getCursor:function(){return S.Love.handler.cursor},setCursor:function(t){S.Love.handler.cursor=t},isVisible:function(){return this._visible},setVisible:function(t){t?(_.ui.Mouse.show(),this._visible=!0):(_.ui.Mouse.hide(),this._visible=!1)},isDown:function(t){switch(t){case"l":return S.Love.handler.mouseLeftPressed;case"r":return S.Love.handler.mouseRightPressed;case"m":return S.Love.handler.mouseMiddlePressed;case"wu":return 1==S.Love.handler.sign(S.Love.handler.mouseWheel);case"wd":return-1==S.Love.handler.sign(S.Love.handler.mouseWheel);default:return!1}},isGrabbed:function(){return!1},setGrabbed:function(){},setPosition:function(){},setY:function(){},setX:function(){},getPosition:function(){return{x:S.Love.handler.get_stage().get_mouseX(),y:S.Love.handler.get_stage().get_mouseY()}},getY:function(){return S.Love.handler.get_stage().get_mouseY()},getX:function(){return S.Love.handler.get_stage().get_mouseX()},__class__:S.utils.LoveMouse},S.utils.LovePhysics=function(){},i["love2d.utils.LovePhysics"]=S.utils.LovePhysics,S.utils.LovePhysics.__name__=["love2d","utils","LovePhysics"],S.utils.LovePhysics.prototype={__class__:S.utils.LovePhysics},S.utils.LoveSound=function(){},i["love2d.utils.LoveSound"]=S.utils.LoveSound,S.utils.LoveSound.__name__=["love2d","utils","LoveSound"],S.utils.LoveSound.prototype={__class__:S.utils.LoveSound},S.utils.LoveSystem=function(){},i["love2d.utils.LoveSystem"]=S.utils.LoveSystem,S.utils.LoveSystem.__name__=["love2d","utils","LoveSystem"],S.utils.LoveSystem.prototype={getOS:function(){return"HTML5"},getClipboardText:function(){return""},setClipboardText:function(){},isAccelerometerSupported:function(){return!1},__class__:S.utils.LoveSystem},S.utils.LoveThread=function(){},i["love2d.utils.LoveThread"]=S.utils.LoveThread,S.utils.LoveThread.__name__=["love2d","utils","LoveThread"],S.utils.LoveThread.prototype={__class__:S.utils.LoveThread},S.utils.LoveTimer=function(){this.fps=new L.display.FPS},i["love2d.utils.LoveTimer"]=S.utils.LoveTimer,S.utils.LoveTimer.__name__=["love2d","utils","LoveTimer"],S.utils.LoveTimer.prototype={sleep:function(){},step:function(){},getTime:function(){return _.Lib.getTimer()},getAverageDelta:function(){return S.Love.handler.dt},getDelta:function(){return S.Love.handler.dt},getFPS:function(){return 0},__class__:S.utils.LoveTimer},S.utils.LoveTouch=function(){this._list=function(){for(var t,e=[],i=0;10>i;){var n=i++;e.push(new S.utils.Touch(n))}return t=e}(this),this._count=0},i["love2d.utils.LoveTouch"]=S.utils.LoveTouch,S.utils.LoveTouch.__name__=["love2d","utils","LoveTouch"],S.utils.LoveTouch.prototype={getPointsCount:function(){return this._count},getList:function(){return this._list},__class__:S.utils.LoveTouch},S.utils.LoveWindow=function(){this._flags={fullscreen:!1,vsync:!0,fsaa:0,resizable:!1,borderless:!1,centered:!0}},i["love2d.utils.LoveWindow"]=S.utils.LoveWindow,S.utils.LoveWindow.__name__=["love2d","utils","LoveWindow"],S.utils.LoveWindow.prototype={hasMouseFocus:function(){return!0},getIcon:function(){return null},hasFocus:function(){return S.Love.handler.hasFocus},isVisible:function(){return S.Love.handler.hasFocus},getFullscreenModes:function(){return null},setIcon:function(){return!1},getMode:function(t){t(S.Love.handler.get_stage().get_stageWidth(),S.Love.handler.get_stage().get_stageHeight(),this._flags)},setMode:function(t,e){return t=0>=t?S.Love.handler.get_stage().get_stageWidth():t,e=0>=e?S.Love.handler.get_stage().get_stageHeight():e,!1},getTitle:function(){return A.Browser.document.title},setTitle:function(t){A.Browser.document.title=t},getFullscreen:function(){return{fullscreen:S.Love.handler.get_stage().displayState==_.display.StageDisplayState.FULL_SCREEN?!0:!1,fstype:"normal"}},setFullscreen:function(t){return S.Love.handler.get_stage().displayState=t?_.display.StageDisplayState.FULL_SCREEN:_.display.StageDisplayState.NORMAL,S.Love.handler.canvas=new _.display.BitmapData(S.Love.handler.get_stage().get_stageWidth(),S.Love.handler.get_stage().get_stageHeight()),S.Love.handler.bitmap.set_bitmapData(S.Love.handler.canvas),!0},isCreated:function(){return!0},getDesktopDimensions:function(t){return null==t&&(t=1),{width:A.Browser.window.screen.width,height:A.Browser.window.screen.height}},getDimensions:function(){return{width:S.Love.handler.get_stage().get_stageWidth(),height:S.Love.handler.get_stage().get_stageHeight()}},getHeight:function(){return S.Love.handler.get_stage().get_stageHeight()},getWidth:function(){return S.Love.handler.get_stage().get_stageWidth()},__class__:S.utils.LoveWindow},S.utils.Quad=function(t,e,i,n,s,o){null==o&&(o=-1),null==s&&(s=-1),null==n&&(n=1),null==i&&(i=1),null==e&&(e=0),null==t&&(t=0),S.utils.Object.call(this),this._x=t,this._y=e,this._width=i,this._height=n,-1!=s?this._sx=1>s?1:s:s=this._width,-1!=o?this._sy=1>o?1:o:o=this._height},i["love2d.utils.Quad"]=S.utils.Quad,S.utils.Quad.__name__=["love2d","utils","Quad"],S.utils.Quad.__super__=S.utils.Object,S.utils.Quad.prototype=t(S.utils.Object.prototype,{getViewport:function(){return{x:this._x,y:this._y,width:this._width,height:this._height}},setViewport:function(t,e,i,n){null==n&&(n=1),null==i&&(i=1),null==e&&(e=0),null==t&&(t=0),this._x=t,this._y=e,this._width=i,this._height=n},__class__:S.utils.Quad}),S.utils.RandomGenerator=function(t){S.utils.Object.call(this),null==t&&(t=Math.round(2147483646*Math.random())),this._seed=t},i["love2d.utils.RandomGenerator"]=S.utils.RandomGenerator,S.utils.RandomGenerator.__name__=["love2d","utils","RandomGenerator"],S.utils.RandomGenerator.__super__=S.utils.Object,S.utils.RandomGenerator.prototype=t(S.utils.Object.prototype,{getSeed:function(){return this._seed},setSeed:function(t){t>=1&&2147483646>=t?this._seed=t:(null!=S.Love.errhand&&S.Love.errhand("The seed number must be within the range of [1, 2147483646]."),console&&console.log("The seed number must be within the range of [1, 2147483646]."))},randomNormal:function(t,e){return null==e&&(e=0),null==t&&(t=1),-1},random:function(t,e){if(null==t&&null==e&&(t=0,e=1),null!=t&&null==e){var i=t;t=0,e=i}if(t>e){var i=t;t=e,e=i}return this._seed=16807*this._seed%2147483646|0,t+this._seed/2147483646*Math.abs(e-t)},__class__:S.utils.RandomGenerator}),S.utils.Source=function(t,e){null==e&&(e="stream"),this._looping=!1,this._stopped=!1,this._playing=!1,this._paused=!1,this._position=0,this._volumeMax=1,this._volumeMin=0,S.utils.Object.call(this),A.Boot.__instanceof(t,String)&&(this._sound=L.Assets.getSound(t)),this._type=e,S.Love.audio._sources.push(this),this.setVolume(S.Love.audio._volume)},i["love2d.utils.Source"]=S.utils.Source,S.utils.Source.__name__=["love2d","utils","Source"],S.utils.Source.__super__=S.utils.Object,S.utils.Source.prototype=t(S.utils.Object.prototype,{getVolume:function(){return this._channel.soundTransform.volume},setVolume:function(t){null==t&&(t=S.Love.audio._volume),t=t<this._volumeMin?this._volumeMin:t,t=t>this._volumeMax?this._volumeMax:t,this._channel.soundTransform.volume=t},getVolumeLimits:function(){return{min:this._volumeMin,max:this._volumeMax}},setVolumeLimits:function(t,e){null==e&&(e=0),null==t&&(t=0),t=0>t?0:t,t=t>1?1:t,e=0>e?0:e,e=e>1?1:e,e=t>e?t:e,this._volumeMin=t,this._volumeMax=e},isStatic:function(){return"static"==this._type},isLooping:function(){return this._looping},isStopped:function(){return this._stopped},isPaused:function(){return this._paused},isPlaying:function(){return this._playing},tell:function(t){return null==t&&(t="seconds"),"seconds"==t?this._position/1e3|0:0},seek:function(t,e){null==e&&(e="seconds"),"seconds"==e&&(this._position=t)},setLooping:function(){this._looping=!0},resume:function(){this._paused&&(this._channel=this._sound.play(this._position,this._looping?1e4:0),this.setVolume(this._channel.soundTransform.volume),this._playing=!0,this._paused=!1,this._stopped=!1)},pause:function(){this._position=1e3*this._channel.component.currentTime,this._channel.stop(),this._paused=!0,this._playing=!1,this._stopped=!1},stop:function(){this._channel.stop(),this._stopped=!0,this._playing=!1,this._paused=!1},play:function(){this._channel=this._sound.play(0,this._looping?1e4:0),this.setVolume(this._channel.soundTransform.volume),this._playing=!0,this._paused=!1,this._stopped=!1},__class__:S.utils.Source}),S.utils.SpriteBatch=function(t,e,i){null==i&&(i="dynamic"),null==e&&(e=1e3),this._numQuads=0,S.utils.Drawable.call(this),this._image=t,this._tilesheet=S.utils.TilesheetCache.get(t),this._size=e,this._usageHint=i,this._color={r:1,g:1,b:1,a:1},this._imageQuad=new S.utils.Quad(0,0,t._bitmapData.component.width,t._bitmapData.component.height),this._renderItems=[]},i["love2d.utils.SpriteBatch"]=S.utils.SpriteBatch,S.utils.SpriteBatch.__name__=["love2d","utils","SpriteBatch"],S.utils.SpriteBatch.getRenderItem=function(){return S.utils.SpriteBatch.RenderItemPool.length>0?S.utils.SpriteBatch.RenderItemPool.pop():new S.utils.RenderItem},S.utils.SpriteBatch.__super__=S.utils.Drawable,S.utils.SpriteBatch.prototype=t(S.utils.Drawable.prototype,{unbind:function(){},bind:function(){},numQuads:function(){for(var t=this._renderItems.length,e=null,i=0,n=0;t>n;){var s=n++;e=this._renderItems[s],i+=e.numQuads}return i},getTilesheet:function(){return null==this._tilesheet&&(this._tilesheet=S.utils.TilesheetCache.get(this._image)),this._tilesheet},getCount:function(){return this._numQuads},getImage:function(){return this._image},setImage:function(t){this._image=t,this._tilesheet=S.utils.TilesheetCache.get(t)},getBufferSize:function(){return this._size},draw:function(){for(var t,e,i=this._renderItems.length,n=0;i>n;){var s=n++;e=this._renderItems[s],t=16,e.isColored?t|=4:e.isAlpha,e.tilesheet.drawTiles(S.Love.graphics.gr,e.renderList,!1,t)}},setBufferSize:function(t){if(this._numQuads<t)for(var e,i=0,n=0,s=0,o=this._renderItems.length,a=0;o>a;){var r=a++;if(e=this._renderItems[r],i=n,s=e.numQuads,n+=s,n>t){var l=(t-i)*e.numElementsPerQuad;e.renderList.splice(l,e.renderList.length-l),e.numQuads=t-i;for(var m=r+1;o>m;){{m++}e=this._renderItems.pop(),e.clear(),S.utils.SpriteBatch.RenderItemPool.push(e)}break}}this._size=t},set:function(t,e,i,n,s,o,a,r,l,m,c){if(null==m&&(m=0),null==l&&(l=0),null==r&&(r=0),null==a&&(a=0),null==o&&(o=1),null==s&&(s=1),null==n&&(n=0),t<this._numQuads&&t>=0){null==c&&(c=this._imageQuad);var _=1,h=0,u=0,y=1,d=(a-c._halfWidth)*s,p=(r-c._halfHeight)*o,g=Math.sin(n),f=Math.cos(n);_=f*s,h=g*o,u=g*s,y=f*o;for(var x=d*f+p*g,B=-d*g+p*f,v=_,b=u,w=h,A=y,S=(1!=this._color.r||1!=this._color.g||1!=this._color.b,1!=this._color.a,this._renderItems.length),L=null,M=0,C=0,T=-1,I=0;S>I;){var D=I++;L=this._renderItems[D];var V=L.numQuads;if(C=M,M+=V,M>t){T=t-C;break}}if(-1==T)return;var E=L.renderList,F=T*L.numElementsPerQuad;E[F++]=e-x,E[F++]=i-B,E[F++]=this._tilesheet.addTileRectID(c),E[F++]=v,E[F++]=-b,E[F++]=w,E[F++]=A,L.isColored&&(E[F++]=this._color.r,E[F++]=this._color.g,E[F++]=this._color.b),L.isAlpha&&(E[F++]=this._color.a)}},add:function(t,e,i,n,s,o,a,r,l,m){if(null==l&&(l=0),null==r&&(r=0),null==a&&(a=0),null==o&&(o=0),null==s&&(s=1),null==n&&(n=1),null==i&&(i=0),!(this._numQuads>=this._size)){null==m&&(m=this._imageQuad);var c=1!=this._color.r||1!=this._color.g||1!=this._color.b,_=1!=this._color.a;(null==this._currentRenderItem||this._currentRenderItem.isAlpha!=_||this._currentRenderItem.isColored!=c||this._currentRenderItem.tilesheet!=this._tilesheet)&&(this._currentRenderItem=S.utils.SpriteBatch.RenderItemPool.length>0?S.utils.SpriteBatch.RenderItemPool.pop():new S.utils.RenderItem,this._currentRenderItem.isColored=c,this._currentRenderItem.isAlpha=_,this._currentRenderItem.numElementsPerQuad=c&&_?S.utils.RenderItem.NUM_ELEMENTS_RGB_ALPHA:c&&!_?S.utils.RenderItem.NUM_ELEMENTS_RGB:!c&&_?S.utils.RenderItem.NUM_ELEMENTS_ALPHA:S.utils.RenderItem.NUM_ELEMENTS_NO_RGB_ALPHA,this._currentRenderItem.tilesheet=this._tilesheet,this._renderItems.push(this._currentRenderItem));var h=1,u=0,y=0,d=1,p=0,g=1,f=(o-m._halfWidth)*n,x=(a-m._halfHeight)*s,B=f,v=x;0!=i&&(p=Math.sin(i),g=Math.cos(i),h=g*n,u=p*s,y=p*n,d=g*s,B=f*g+x*p,v=-f*p+x*g);var b=h,w=y,A=u,L=d,M=this._currentRenderItem.renderList,C=M.length;M[C++]=t-B,M[C++]=e-v,M[C++]=this._tilesheet.addTileRectID(m),M[C++]=b,M[C++]=-w,M[C++]=A,M[C++]=L,this._currentRenderItem.isColored&&(M[C++]=this._color.r,M[C++]=this._color.g,M[C++]=this._color.b),this._currentRenderItem.isAlpha&&(M[C++]=this._color.a),this._currentRenderItem.numQuads++,this._numQuads++}},isAlpha:function(){return 1!=this._color.a},isColored:function(){return 1!=this._color.r||1!=this._color.g||1!=this._color.b},clear:function(){this._numQuads=0;for(var t,e=this._renderItems.length,i=0;e>i;){{i++}t=this._renderItems.pop(),t.clear(),S.utils.SpriteBatch.RenderItemPool.push(t)}},getColor:function(){return{r:Math.round(255*this._color.r),g:Math.round(255*this._color.g),b:Math.round(255*this._color.b),a:Math.round(255*this._color.a)}},setColor:function(t,e,i,n){null==n&&(n=255),this._color={r:t/255,g:e/255,b:i/255,a:n/255}},__class__:S.utils.SpriteBatch}),S.utils.TilesheetCache=function(){},i["love2d.utils.TilesheetCache"]=S.utils.TilesheetCache,S.utils.TilesheetCache.__name__=["love2d","utils","TilesheetCache"],S.utils.TilesheetCache.get=function(t){if(S.utils.TilesheetCache.cache.h.hasOwnProperty(t.__id__))return S.utils.TilesheetCache.cache.h[t.__id__];var e=new S.utils.TilesheetExt(t._bitmapData);return S.utils.TilesheetCache.cache.set(t,e),e};var L={};L.display={},L.display.Tilesheet=function(t){this.nmeBitmap=t,this.qOffsets=new Array,this.qRects=new Array,this.bounds=new _.geom.Rectangle,this.tile=new _.geom.Rectangle,this.matrix=new _.geom.Matrix},i["openfl.display.Tilesheet"]=L.display.Tilesheet,L.display.Tilesheet.__name__=["openfl","display","Tilesheet"],L.display.Tilesheet.prototype={drawTiles:function(t,e,i,n){null==n&&(n=0),null==i&&(i=!1);
var s,o,a,r,l,m,c,_,h,u,y,d,p,g,f=t.rec,x=t.len,B=0,v=e.length,b=0,w=this.bounds,A=this.tile,S=this.matrix,L=0!=(1&n),M=0!=(2&n),C=0!=(16&n),T=L||M||C;for(f[x++]=16,f[x++]=this.nmeBitmap,f[x++]=n,s=x,f[x++]=0,0!=(4&n)&&(b+=3),0!=(8&n)&&b++,w.setVoid();v>B;)for(f[x++]=c=e[B++],f[x++]=_=e[B++],a=e[B++],l=this.qRects[a],r=this.qOffsets[a],f[x++]=h=r.x,f[x++]=u=r.y,f[x++]=y=l.x,f[x++]=d=l.y,f[x++]=p=l.width,f[x++]=g=l.height,A.x=-r.x,A.width=l.width,A.y=-r.y,A.height=l.height,T&&(S.identity(),C?(f[x++]=S.a=e[B++],f[x++]=S.b=e[B++],f[x++]=S.c=e[B++],f[x++]=S.d=e[B++]):(L&&S.scale(f[x++]=m=e[B++],m),M&&S.rotate(f[x++]=e[B++])),S.translate(l.x,l.y),A.transform(S)),A.x+=c,A.y+=_,w.join(A),o=0;o++<b;)f[x++]=e[B++];f[s]=x,t.len=x,t.grab(w.x,w.y,w.x+w.width,w.y+w.height)},addTileRect:function(t,e){return null==e&&(e=new _.geom.Point),this.qRects.push(t),this.qOffsets.push(e),this.qRects.length-1},__class__:L.display.Tilesheet},S.utils.TilesheetExt=function(t){this._numTiles=0,L.display.Tilesheet.call(this,t),this.tileIDs=new w.ds.ObjectMap},i["love2d.utils.TilesheetExt"]=S.utils.TilesheetExt,S.utils.TilesheetExt.__name__=["love2d","utils","TilesheetExt"],S.utils.TilesheetExt.__super__=L.display.Tilesheet,S.utils.TilesheetExt.prototype=t(L.display.Tilesheet.prototype,{addTileRectID:function(t){if(this.tileIDs.h.hasOwnProperty(t.__id__))return this.tileIDs.h[t.__id__];var e=this._numTiles;return this.tileIDs.set(t,e),this.addTileRect(new _.geom.Rectangle(t._x,t._y,t._width,t._height)),this._numTiles++,e},destroy:function(){this.tileIDs=null},__class__:S.utils.TilesheetExt}),S.utils.RenderItem=function(){this.numElementsPerQuad=0,this.numQuads=0,this.renderList=[]},i["love2d.utils.RenderItem"]=S.utils.RenderItem,S.utils.RenderItem.__name__=["love2d","utils","RenderItem"],S.utils.RenderItem.prototype={clear:function(){this.renderList.splice(0,this.renderList.length),this.numQuads=0},__class__:S.utils.RenderItem},S.utils.Touch=function(t){S.utils.Object.call(this),this._id=t,this._isDown=!1,this._x=this._y=this._sizeX=this._sizeY=0,this._pressure=1},i["love2d.utils.Touch"]=S.utils.Touch,S.utils.Touch.__name__=["love2d","utils","Touch"],S.utils.Touch.__super__=S.utils.Object,S.utils.Touch.prototype=t(S.utils.Object.prototype,{getPressure:function(){return this._pressure},getSize:function(){return{x:this._sizeX,y:this._sizeY}},getPosition:function(){return{x:this._x,y:this._y}},isDown:function(){return this._isDown},getY:function(){return this._y},getX:function(){return this._x},__class__:S.utils.Touch});var M={};M.AssetData=function(){},i["nme.AssetData"]=M.AssetData,M.AssetData.__name__=["nme","AssetData"],M.AssetData.initialize=function(){M.AssetData.initialized||(M.AssetData.path.set("img/hero.png","img/hero.png"),M.AssetData.type.set("img/hero.png","image".toUpperCase()),M.AssetData.initialized=!0)},L.Assets=function(){},i["openfl.Assets"]=L.Assets,L.Assets.__name__=["openfl","Assets"],L.Assets.__properties__={get_type:"get_type",get_path:"get_path",get_library:"get_library",get_id:"get_id"},L.Assets.initialize=function(){L.Assets.initialized||(M.AssetData.initialize(),L.Assets.initialized=!0)},L.Assets.getBitmapData=function(t,e){null==e&&(e=!0),L.Assets.initialize();var i,n,o=M.AssetData.type,a=L.Assets.cachedBitmapData;return o.exists(t)&&"IMAGE"==o.get(t)?a.exists(t)?L.Assets.cachedBitmapData.get(t).clone():(n=s.loaders.get(M.AssetData.path.get(t)).contentLoaderInfo.content,i=n.bitmapData.clone(),e&&L.Assets.cachedBitmapData.set(t,i),i):(console&&console.log('BitmapData "'+t+'" not found.'),null)},L.Assets.getBytes=function(t){if(L.Assets.initialize(),M.AssetData.type.exists(t)){var e=null,i=s.urlLoaders.get(M.AssetData.path.get(t)).data;if(A.Boot.__instanceof(i,String)){var n=new _.utils.ByteArray;n.writeUTFBytes(i)}else e=A.Boot.__instanceof(i,_.utils.ByteArray)?i:null;return null!=e?(e.position=0,e):null}return console.log('[openfl.Assets] There is no String or ByteArray asset with an ID of "'+t+'"'),null},L.Assets.getFont=function(t){return L.Assets.initialize(),M.AssetData.type.exists(t)&&"FONT"==M.AssetData.type.get(t)?A.Boot.__cast(v.createInstance(M.AssetData.className.get(t),[]),_.text.Font):(console.log('[openfl.Assets] There is no Font asset with an ID of "'+t+'"'),null)},L.Assets.getSound=function(t){if(L.Assets.initialize(),M.AssetData.type.exists(t)){var e=M.AssetData.type.get(t);if("SOUND"==e||"MUSIC"==e)return new _.media.Sound(new _.net.URLRequest(M.AssetData.path.get(t)))}return console.log('[openfl.Assets] There is no Sound asset with an ID of "'+t+'"'),null},L.Assets.getText=function(t){var e=L.Assets.getBytes(t);return null==e?null:e.readUTFBytes(e.length)},L.Assets.resolveClass=function(t){return t=B.replace(t,"native.","flash."),t=B.replace(t,"browser.","flash."),v.resolveClass(t)},L.Assets.resolveEnum=function(t){return t=B.replace(t,"native.","flash."),t=B.replace(t,"browser.","flash."),v.resolveEnum(t)},L.Assets.get_id=function(){L.Assets.initialize();for(var t=[],e=M.AssetData.type.keys();e.hasNext();){var i=e.next();t.push(i)}return t},L.Assets.get_library=function(){return L.Assets.initialize(),M.AssetData.library},L.Assets.get_path=function(){return L.Assets.initialize(),M.AssetData.path},L.Assets.get_type=function(){return L.Assets.initialize(),M.AssetData.type},L._Assets={},L._Assets.AssetType_Impl_=function(){},i["openfl._Assets.AssetType_Impl_"]=L._Assets.AssetType_Impl_,L._Assets.AssetType_Impl_.__name__=["openfl","_Assets","AssetType_Impl_"],L._Assets.AssetType_Impl_._new=function(t){return t},L._Assets.AssetType_Impl_.toString=function(t){return t},L._Assets.AssetType_Impl_.fromString=function(t){return t},L._Assets.LibraryType_Impl_=function(){},i["openfl._Assets.LibraryType_Impl_"]=L._Assets.LibraryType_Impl_,L._Assets.LibraryType_Impl_.__name__=["openfl","_Assets","LibraryType_Impl_"],L._Assets.LibraryType_Impl_._new=function(t){return t},L._Assets.LibraryType_Impl_.toString=function(t){return t},L._Assets.LibraryType_Impl_.fromString=function(t){return t},L.display.FPS=function(t,i,n){null==n&&(n=0),null==i&&(i=10),null==t&&(t=10),_.text.TextField.call(this),this.set_x(t),this.set_y(i),this.set_selectable(!1),this.defaultTextFormat=new _.text.TextFormat("_sans",12,n),this.set_text("FPS: "),this.cacheCount=0,this.times=[],this.addEventListener("enterFrame",e(this,this.this_onEnterFrame))},i["openfl.display.FPS"]=L.display.FPS,L.display.FPS.__name__=["openfl","display","FPS"],L.display.FPS.__super__=_.text.TextField,L.display.FPS.prototype=t(_.text.TextField.prototype,{this_onEnterFrame:function(){var t=w.Timer.stamp();for(this.times.push(t);this.times[0]<t-1;)this.times.shift();var e=this.times.length;e!=this.cacheCount&&this.visible&&this.set_text("FPS: "+Math.round((e+this.cacheCount)/2)),this.cacheCount=e},__class__:L.display.FPS});var C=0;Array.prototype.indexOf&&(r.remove=function(t,e){var i=t.indexOf(e);return-1==i?!1:(t.splice(i,1),!0)}),Math.__name__=["Math"],Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,i.Math=Math,Math.isFinite=function(t){return isFinite(t)},Math.isNaN=function(t){return isNaN(t)},_.display.DisplayObject.remapTouch=new w.ds.StringMap,_.display.DisplayObject.remapTouch.set("mousedown","touchstart"),_.display.DisplayObject.remapTouch.set("mousemove","touchmove"),_.display.DisplayObject.remapTouch.set("mouseup","touchend"),String.prototype.__class__=i.String=String,String.__name__=["String"],Array.prototype.__class__=i.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=i.Date=Date,Date.__name__=["Date"];var T=i.Int={__name__:["Int"]},I=i.Dynamic={__name__:["Dynamic"]},D=i.Float=Number;D.__name__=["Float"];var V=i.Bool=Boolean;V.__ename__=["Bool"];var E=i.Class={__name__:["Class"]},F={};_.Lib.__init(),function(){var t=Event.prototype,e=_.events.Event.prototype;t.clone=e.clone,t.isDefaultPrevented=e.isDefaultPrevented,t.get_target=e.get_target,t.set_target=e.set_target,t.get_currentTarget=e.get_currentTarget,t.set_currentTarget=e.set_currentTarget}(),function(){var t=MouseEvent.prototype,e=_.events.MouseEvent.prototype;t.get_buttonDown=e.get_buttonDown,t.get_delta=e.get_delta,t.get_stageX=e.get_stageX,t.get_stageY=e.get_stageY,t.get_localX=e.get_localX,t.get_localY=e.get_localY,t.get_localPoint=e.get_localPoint}(),w.Resource.content=[],f.physics=new g,b.collision.B2Collision.b2_nullFeature=255,b.collision.B2Collision.s_incidentEdge=b.collision.B2Collision.makeClipPointVector(),b.collision.B2Collision.s_clipPoints1=b.collision.B2Collision.makeClipPointVector(),b.collision.B2Collision.s_clipPoints2=b.collision.B2Collision.makeClipPointVector(),b.collision.B2Collision.s_edgeAO=new Array,b.collision.B2Collision.s_edgeBO=new Array,b.collision.B2Collision.s_localTangent=new b.common.math.B2Vec2,b.collision.B2Collision.s_localNormal=new b.common.math.B2Vec2,b.collision.B2Collision.s_planePoint=new b.common.math.B2Vec2,b.collision.B2Collision.s_normal=new b.common.math.B2Vec2,b.collision.B2Collision.s_tangent=new b.common.math.B2Vec2,b.collision.B2Collision.s_tangent2=new b.common.math.B2Vec2,b.collision.B2Collision.s_v11=new b.common.math.B2Vec2,b.collision.B2Collision.s_v12=new b.common.math.B2Vec2,b.collision.B2Collision.b2CollidePolyTempVec=new b.common.math.B2Vec2,b.collision.B2Distance.s_simplex=new b.collision.B2Simplex,b.collision.B2Distance.s_saveA=new Array,b.collision.B2Distance.s_saveB=new Array,b.collision.B2DynamicTreeNode.currentID=0,b.collision.B2TimeOfImpact.b2_toiCalls=0,b.collision.B2TimeOfImpact.b2_toiIters=0,b.collision.B2TimeOfImpact.b2_toiMaxIters=0,b.collision.B2TimeOfImpact.b2_toiRootIters=0,b.collision.B2TimeOfImpact.b2_toiMaxRootIters=0,b.collision.B2TimeOfImpact.s_cache=new b.collision.B2SimplexCache,b.collision.B2TimeOfImpact.s_distanceInput=new b.collision.B2DistanceInput,b.collision.B2TimeOfImpact.s_xfA=new b.common.math.B2Transform,b.collision.B2TimeOfImpact.s_xfB=new b.common.math.B2Transform,b.collision.B2TimeOfImpact.s_fcn=new b.collision.B2SeparationFunction,b.collision.B2TimeOfImpact.s_distanceOutput=new b.collision.B2DistanceOutput,b.collision.shapes.B2Shape.e_hitCollide=1,b.collision.shapes.B2Shape.e_missCollide=0,b.collision.shapes.B2Shape.e_startsInsideCollide=-1,b.collision.shapes.B2PolygonShape.s_mat=new b.common.math.B2Mat22,b.common.B2Settings.VERSION="2.1alpha",b.common.B2Settings.USHRT_MAX=65535,b.common.B2Settings.b2_pi=Math.PI,b.common.B2Settings.b2_maxManifoldPoints=2,b.common.B2Settings.b2_aabbExtension=.1,b.common.B2Settings.b2_aabbMultiplier=2,b.common.B2Settings.b2_polygonRadius=2*b.common.B2Settings.b2_linearSlop,b.common.B2Settings.b2_linearSlop=.005,b.common.B2Settings.b2_angularSlop=2/180*b.common.B2Settings.b2_pi,b.common.B2Settings.b2_toiSlop=8*b.common.B2Settings.b2_linearSlop,b.common.B2Settings.b2_maxTOIContactsPerIsland=32,b.common.B2Settings.b2_maxTOIJointsPerIsland=32,b.common.B2Settings.b2_velocityThreshold=1,b.common.B2Settings.b2_maxLinearCorrection=.2,b.common.B2Settings.b2_maxAngularCorrection=8/180*b.common.B2Settings.b2_pi,b.common.B2Settings.b2_maxTranslation=2,b.common.B2Settings.b2_maxTranslationSquared=b.common.B2Settings.b2_maxTranslation*b.common.B2Settings.b2_maxTranslation,b.common.B2Settings.b2_maxRotation=.5*b.common.B2Settings.b2_pi,b.common.B2Settings.b2_maxRotationSquared=b.common.B2Settings.b2_maxRotation*b.common.B2Settings.b2_maxRotation,b.common.B2Settings.b2_contactBaumgarte=.2,b.common.B2Settings.b2_timeToSleep=.5,b.common.B2Settings.b2_linearSleepTolerance=.01,b.common.B2Settings.b2_angularSleepTolerance=2/180*b.common.B2Settings.b2_pi,b.common.math.B2Math.b2Vec2_zero=new b.common.math.B2Vec2(0,0),b.common.math.B2Math.b2Mat22_identity=b.common.math.B2Mat22.fromVV(new b.common.math.B2Vec2(1,0),new b.common.math.B2Vec2(0,1)),b.common.math.B2Math.b2Transform_identity=new b.common.math.B2Transform(b.common.math.B2Math.b2Vec2_zero,b.common.math.B2Math.b2Mat22_identity),b.dynamics.B2Body.s_xf1=new b.common.math.B2Transform,b.dynamics.B2Body.e_islandFlag=1,b.dynamics.B2Body.e_awakeFlag=2,b.dynamics.B2Body.e_allowSleepFlag=4,b.dynamics.B2Body.e_bulletFlag=8,b.dynamics.B2Body.e_fixedRotationFlag=16,b.dynamics.B2Body.e_activeFlag=32,b.dynamics.B2Body.b2_staticBody=0,b.dynamics.B2Body.b2_kinematicBody=1,b.dynamics.B2Body.b2_dynamicBody=2,b.dynamics.B2ContactFilter.b2_defaultFilter=new b.dynamics.B2ContactFilter,b.dynamics.B2ContactListener.b2_defaultListener=new b.dynamics.B2ContactListener,b.dynamics.B2ContactManager.s_evalCP=new b.collision.B2ContactPoint,b.dynamics.B2DebugDraw.e_shapeBit=1,b.dynamics.B2DebugDraw.e_jointBit=2,b.dynamics.B2DebugDraw.e_aabbBit=4,b.dynamics.B2DebugDraw.e_pairBit=8,b.dynamics.B2DebugDraw.e_centerOfMassBit=16,b.dynamics.B2DebugDraw.e_controllerBit=32,b.dynamics.B2Island.s_impulse=new b.dynamics.B2ContactImpulse,b.dynamics.B2World.s_timestep2=new b.dynamics.B2TimeStep,b.dynamics.B2World.s_xf=new b.common.math.B2Transform,b.dynamics.B2World.s_backupA=new b.common.math.B2Sweep,b.dynamics.B2World.s_backupB=new b.common.math.B2Sweep,b.dynamics.B2World.s_timestep=new b.dynamics.B2TimeStep,b.dynamics.B2World.s_queue=new Array,b.dynamics.B2World.s_jointColor=new b.common.B2Color(.5,.8,.8),b.dynamics.B2World.e_newFixture=1,b.dynamics.B2World.e_locked=2,b.dynamics.contacts.B2Contact.e_sensorFlag=1,b.dynamics.contacts.B2Contact.e_continuousFlag=2,b.dynamics.contacts.B2Contact.e_islandFlag=4,b.dynamics.contacts.B2Contact.e_toiFlag=8,b.dynamics.contacts.B2Contact.e_touchingFlag=16,b.dynamics.contacts.B2Contact.e_enabledFlag=32,b.dynamics.contacts.B2Contact.e_filterFlag=64,b.dynamics.contacts.B2Contact.s_input=new b.collision.B2TOIInput,b.dynamics.contacts.B2PositionSolverManifold.circlePointA=new b.common.math.B2Vec2,b.dynamics.contacts.B2PositionSolverManifold.circlePointB=new b.common.math.B2Vec2,b.dynamics.contacts.B2ContactSolver.staticFix=b.common.B2Settings.b2_maxManifoldPoints,b.dynamics.contacts.B2ContactSolver.s_worldManifold=new b.collision.B2WorldManifold,b.dynamics.contacts.B2ContactSolver.s_psm=new b.dynamics.contacts.B2PositionSolverManifold,b.dynamics.joints.B2PulleyJoint.b2_minPulleyLength=2,b.dynamics.joints.B2RevoluteJoint.tImpulse=new b.common.math.B2Vec2,_.Lib.qTimeStamp=Date.now()+0,_.Lib.mouseX=0,_.Lib.mouseY=0,_.geom.Transform.DEG_TO_RAD=Math.PI/180,_.media.Sound.library=new w.ds.StringMap,_.system.System.useCodePage=!1,_.ui.Multitouch.supportsTouchEvents=!1,_.ui.Multitouch.maxTouchPoints=0,w.ds.ObjectMap.count=0,A.Browser.window="undefined"!=typeof window?window:null,A.Browser.document="undefined"!=typeof window?window.document:null,S.Love._version="0.9.0",S.Love._hoveversion="0.1.0",S.Love._inited=!1,S.utils.OUYA.O=0,S.utils.OUYA.U=3,S.utils.OUYA.Y=4,S.utils.OUYA.A=1,S.utils.OUYA.L1=6,S.utils.OUYA.L2=8,S.utils.OUYA.R1=7,S.utils.OUYA.R2=9,S.utils.OUYA.MENU=16777234,S.utils.OUYA.AXIS_LS_X=0,S.utils.OUYA.AXIS_LS_Y=1,S.utils.OUYA.AXIS_RS_X=11,S.utils.OUYA.AXIS_RS_Y=14,S.utils.OUYA.AXIS_L2=17,S.utils.OUYA.AXIS_R2=18,S.utils.OUYA.DPAD_UP=19,S.utils.OUYA.DPAD_RIGHT=22,S.utils.OUYA.DPAD_DOWN=20,S.utils.OUYA.DPAD_LEFT=21,S.utils.OUYA.R3=11,S.utils.OUYA.L3=10,S.utils.SpriteBatch.RenderItemPool=[],S.utils.SpriteBatch.RECT=new _.geom.Rectangle,S.utils.TilesheetCache.cache=new w.ds.ObjectMap,S.utils.RenderItem.NUM_ELEMENTS_RGB_ALPHA=11,S.utils.RenderItem.NUM_ELEMENTS_RGB=10,S.utils.RenderItem.NUM_ELEMENTS_ALPHA=8,S.utils.RenderItem.NUM_ELEMENTS_NO_RGB_ALPHA=7,M.AssetData.className=new w.ds.StringMap,M.AssetData.library=new w.ds.StringMap,M.AssetData.path=new w.ds.StringMap,M.AssetData.type=new w.ds.StringMap,M.AssetData.initialized=!1,L.Assets.cachedBitmapData=new w.ds.StringMap,L.Assets.initialized=!1,s.main()}();